<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.45rem !important;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.45rem !important;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--pink);text-decoration:none;line-height:1.5;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}h1, h2, h3, h4, h5, h6{margin-top:0;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:0.85rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:0.85rem;}blockquote.translation{font-size:1em;}</style><style data-href="/styles.2c5e1fe12488927e3ca4.css" id="gatsby-global-css">html{background-color:transparent}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#d33a31;background-color:var(--bg)}body.light{--bg:#f0e7db;--bg-secondary:#f9fafb;--header:var(--pink);--textNormal:#222;--textTitle:#222;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;--form-shadow:0 2px 15px 0 rgba(210,214,220,0.5)}body.dark,body.light{--textLink:var(--pink)}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--bg-secondary:#363c48;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:rgba(115,124,153,0.2);--inlineCode-text:#e6e6e6;--form-shadow:0 2px 15px 0 rgba(26,26,27,0.637)}body:lang(ar) article,body:lang(fa) article,body:lang(he) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre,body:lang(he) .language-text,body:lang(he) article .translations,body:lang(he) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text,body:lang(he) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote,body:lang(he) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}.box{padding:.5rem 1rem;border:1px solid var(--textNormal);border-radius:.25rem}.box,.boxes{margin-bottom:1rem}.boxes{border:2px solid var(--textNormal);border-radius:6px}.boxes>.box{border-width:0;border-radius:0;margin-bottom:0}.boxes>.box:first-child{border-top-left-radius:4px!important;border-top-right-radius:4px!important}.boxes>.box:last-child{border-bottom-left-radius:4px!important;border-bottom-right-radius:4px!important}.boxes>.box.box-header{background-color:rgba(100,100,150,.04)}.boxes>.box.box-body{padding-top:1rem;padding-bottom:1rem}.boxes>.box.box-footer{background-color:rgba(100,100,150,.04)}.boxes .box+.box{border-top-width:1px}.boxes .boxes{margin-bottom:0}.boxes.transparent,.boxes.transparent .box{background-color:transparent}.boxes.inverted{color:#fff}.boxes.inverted,.boxes.inverted .box{background-color:#2d353c;border-color:var(--textNormal)}.boxes.secondary{border-width:0}.boxes.secondary>.box{border-width:1px;border-radius:.25rem}.boxes.secondary>.box.box-header{background-color:transparent;margin-bottom:0;border-width:0;border-radius:0!important}.boxes.secondary>.box.box-body{padding-top:1rem;padding-bottom:1rem;margin-bottom:0}.boxes.secondary>.box.box-footer{background-color:transparent;border-width:0;border-radius:0!important}.p-y-0{padding-top:0!important;padding-bottom:0!important}.p-y-8{padding-top:.5rem!important;padding-bottom:.5rem!important}.col,.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11,.col-12{position:relative;width:100%;padding-left:.75rem;padding-right:.75rem}.col-4{flex:0 0 33.33333%;max-width:33.33333%}.cols-10>.col-4{flex:0 0 40%;max-width:40%}.b-r-1{border-right:1px solid var(--textNormal)!important}.row{display:flex;flex-wrap:wrap;margin-left:-.75rem;margin-right:-.75rem}.row.g-32{margin-left:-16px!important;margin-right:-16px!important}.row.g-32>[class*=col]{padding-left:16px!important;padding-right:16px!important}.boxes>.box>.m-t-0+p p{margin-bottom:1rem}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="icon" href="/favicon-32x32.png?v=0d7082db0bcaf1381f0ae2cbdc939311" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#6b37bf"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=0d7082db0bcaf1381f0ae2cbdc939311"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">shanejix | shanejix</title><meta data-react-helmet="true" property="og:title" content="ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡"/><meta data-react-helmet="true" property="og:description" content="åŒæ­¥é“¾æ¥: https://www.shanejix.com/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/ æ‘˜è‡ª ç°ä»£ JavaScript æ•™ç¨‹;æ€»ç»“è‡ªå·±è§‰å¾—é‡è¦/ç–å¿½/æœªçŸ¥çš„éƒ¨åˆ†ï¼Œé—²æ¥æ— äº‹æ—¶çœ‹çœ‹ï¼ŒæŠ“è€³æŒ è…®æ—¶çœ‹çœ‹ã€‚é•¿ç¯‡é¢„è­¦ï¼ ECMA-26â€¦"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="shanejix"/><meta data-react-helmet="true" name="twitter:title" content="ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡"/><meta data-react-helmet="true" name="twitter:description" content="åŒæ­¥é“¾æ¥: https://www.shanejix.com/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/ æ‘˜è‡ª ç°ä»£ JavaScript æ•™ç¨‹;æ€»ç»“è‡ªå·±è§‰å¾—é‡è¦/ç–å¿½/æœªçŸ¥çš„éƒ¨åˆ†ï¼Œé—²æ¥æ— äº‹æ—¶çœ‹çœ‹ï¼ŒæŠ“è€³æŒ è…®æ—¶çœ‹çœ‹ã€‚é•¿ç¯‡é¢„è­¦ï¼ ECMA-26â€¦"/><meta data-react-helmet="true" name="description" content="learner &amp;&amp; coder"/><script async="" type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-7633830809578886",
            enable_page_level_ads: true
        });
        </script><link as="script" rel="preload" href="/webpack-runtime-e0256f23ab3c5c1ffc4c.js"/><link as="script" rel="preload" href="/framework-b17a64ad725e0b3c1338.js"/><link as="script" rel="preload" href="/app-5c7248fcb69374f91873.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/cac18b802c8b308508681dc900d8d8f756c7bdb5-c7c9c4e9ce9bf74cce02.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-06eb50339f2f3ac086e8.js"/><link as="fetch" rel="preload" href="/page-data/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="14j5ye3">.css-14j5ye3{margin-left:auto;margin-right:auto;padding:0 1.3125rem;max-width:42rem;}</style><div style="color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out" class="css-14j5ye3"><style data-emotion-css="zhpt6k">.css-zhpt6k{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;min-height:15vh;}</style><header class="css-zhpt6k"><div style="margin-right:auto"><style data-emotion-css="w4vfos">.css-w4vfos{height:15vh;line-height:15vh;text-shadow:none;background-image:none;}</style><a class="css-w4vfos" href="/"><style data-emotion-css="4nx8jl">.css-4nx8jl{display:inline-block;font-style:normal;}</style><h3 class="css-4nx8jl">Shane Jix</h3></a></div><div><div style="height:24px"></div></div></header><main style="min-height:calc(100vh - 25vh)"><article style="border-radius:3px;margin-bottom:0.5rem;font-size:1rem"><section><h1 style="margin-top:1.75rem;margin-bottom:0;margin-left:-0.5rem;margin-right:-0.5rem">ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:0.875rem"><span>create:<!-- -->June 08, 2021</span>Â Â <span>update:<!-- -->April 12, 2022</span>Â Â <span> â€¢ <!-- -->ğŸ¥˜ğŸ¥˜ğŸ¥˜ğŸ¥˜ 101 min read</span></p></section><section><blockquote>
<p>åŒæ­¥é“¾æ¥: <a href="https://www.shanejix.com/posts/%E7%8E%B0%E4%BB%A3%20JavaScript%20%E6%95%99%E7%A8%8B%20%E2%80%94%20JavaScript%20%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%AF%87/">https://www.shanejix.com/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/</a></p>
</blockquote>
<p>æ‘˜è‡ª <a href="https://zh.javascript.info/">ç°ä»£ JavaScript æ•™ç¨‹</a>;æ€»ç»“è‡ªå·±è§‰å¾—é‡è¦/ç–å¿½/æœªçŸ¥çš„éƒ¨åˆ†ï¼Œé—²æ¥æ— äº‹æ—¶çœ‹çœ‹ï¼ŒæŠ“è€³æŒ è…®æ—¶çœ‹çœ‹ã€‚é•¿ç¯‡é¢„è­¦ï¼</p>
<hr>
<h2>ECMA-262 è§„èŒƒ</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æœ€æƒå¨çš„ä¿¡æ¯æ¥æº(è¯­è¨€ç»†èŠ‚)ï¼Œæ¯å¹´éƒ½ä¼šå‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬çš„è§„èŒƒ</code></pre></div>
<p>ğŸš© æœ€æ–°çš„è§„èŒƒè‰æ¡ˆè¯·è§ <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a></p>
<p>ğŸš© æœ€æ–°æœ€å‰æ²¿çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬â€œå³å°†çº³å…¥è§„èŒƒçš„â€ï¼ˆæ‰€è°“çš„ â€œstage 3â€ï¼‰ï¼Œè¯·çœ‹è¿™é‡Œçš„ææ¡ˆ <a href="https://github.com/tc39/proposals">https://github.com/tc39/proposals</a></p>
<h2>ç°ä»£æ¨¡å¼ï¼Œâ€œuse strictâ€</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æ–°çš„ç‰¹æ€§è¢«åŠ å…¥ï¼Œæ—§çš„åŠŸèƒ½ä¹Ÿæ²¡æœ‰æ”¹å˜ è¿™ä¹ˆåšæœ‰åˆ©äºå…¼å®¹æ—§ä»£ç ï¼Œ

- ä½†ç¼ºç‚¹æ˜¯ JavaScript åˆ›é€ è€…çš„ä»»ä½•é”™è¯¯æˆ–ä¸å®Œå–„çš„å†³å®šä¹Ÿå°†æ°¸è¿œè¢«ä¿ç•™åœ¨ JavaScript è¯­è¨€ä¸­

- è¿™ç§æƒ…å†µä¸€ç›´æŒç»­åˆ° 2009 å¹´ ECMAScript 5 (ES5) çš„å‡ºç°

- ES5 è§„èŒƒå¢åŠ äº†æ–°çš„è¯­è¨€ç‰¹æ€§å¹¶ä¸”ä¿®æ”¹äº†ä¸€äº›å·²ç»å­˜åœ¨çš„ç‰¹æ€§

- ä¸ºäº†ä¿è¯æ—§çš„åŠŸèƒ½èƒ½å¤Ÿä½¿ç”¨ï¼Œå¤§éƒ¨åˆ†çš„ä¿®æ”¹æ˜¯é»˜è®¤ä¸ç”Ÿæ•ˆçš„

- ã€éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡ä»¤ â€”â€” "use strict" æ¥æ˜ç¡®åœ°æ¿€æ´»è¿™äº›ç‰¹æ€§ã€‘</code></pre></div>
<p>ğŸš© ä½ç½®å’Œæ—¶æœº</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è„šæœ¬æ–‡ä»¶çš„é¡¶éƒ¨

- å‡½æ•°ä½“çš„å¼€å¤´

- â€œclassesâ€ å’Œ â€œmodulesâ€è‡ªåŠ¨å¯ç”¨`'use strict'`

---

- æ²¡æœ‰åŠæ³•å–æ¶ˆ `'use strict'`

- consoleæ§åˆ¶å°`'use strict'; &lt;Shift+Enter æ¢è¡Œ>`</code></pre></div>
<h2>å¤§å†™å½¢å¼çš„å¸¸æ•°</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ä¸ªæ™®éçš„åšæ³•æ˜¯å°†å¸¸é‡ç”¨ä½œåˆ«åï¼Œä»¥ä¾¿è®°ä½é‚£äº›åœ¨æ‰§è¡Œä¹‹å‰å°±å·²çŸ¥çš„éš¾ä»¥è®°ä½çš„å€¼</code></pre></div>
<p>ğŸš©<strong>ä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿æ¥å‘½åè¿™äº›å¸¸é‡</strong></p>
<p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä»¥æ‰€è°“çš„â€œwebâ€ï¼ˆåå…­è¿›åˆ¶ï¼‰æ ¼å¼ä¸ºé¢œè‰²å£°æ˜å¸¸é‡ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">COLOR_RED</span> <span class="token operator">=</span> <span class="token string">"#F00"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">COLOR_GREEN</span> <span class="token operator">=</span> <span class="token string">"#0F0"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">COLOR_BLUE</span> <span class="token operator">=</span> <span class="token string">"#00F"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">COLOR_ORANGE</span> <span class="token operator">=</span> <span class="token string">"#FF7F00"</span><span class="token punctuation">;</span>

<span class="token comment">// â€¦â€¦å½“æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªé¢œè‰²</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token constant">COLOR_ORANGE</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// #FF7F00</span></code></pre></div>
<p>å¥½å¤„ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">-  `COLOR_ORANGE` æ¯” `"#FF7F00"` æ›´å®¹æ˜“è®°å¿†

- æ¯”èµ· `COLOR_ORANGE` è€Œè¨€ï¼Œ`"#FF7F00"` æ›´å®¹æ˜“è¾“é”™

- é˜…è¯»ä»£ç æ—¶ï¼Œ`COLOR_ORANGE` æ¯” `#FF7F00` æ›´æ˜“æ‡‚</code></pre></div>
<p>ğŸš© ä»€ä¹ˆæ—¶å€™è¯¥ä¸ºå¸¸é‡ä½¿ç”¨å¤§å†™å‘½åï¼Œä»€ä¹ˆæ—¶å€™è¿›è¡Œå¸¸è§„å‘½åï¼Ÿè®©æˆ‘ä»¬å¼„æ¸…æ¥šä¸€ç‚¹</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä½œä¸ºä¸€ä¸ªâ€œå¸¸æ•°â€ï¼Œæ„å‘³ç€å€¼æ°¸è¿œä¸å˜

- **ä½†æ˜¯æœ‰äº›å¸¸é‡åœ¨æ‰§è¡Œä¹‹å‰å°±å·²çŸ¥äº†ï¼ˆæ¯”å¦‚çº¢è‰²çš„åå…­è¿›åˆ¶å€¼ï¼‰ï¼Œè¿˜æœ‰äº›åœ¨æ‰§è¡ŒæœŸé—´è¢«â€œè®¡ç®—â€å‡ºæ¥ï¼Œä½†åˆå§‹èµ‹å€¼ä¹‹åå°±ä¸ä¼šæ”¹å˜**</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> pageLoadTime <span class="token operator">=</span> <span class="token comment">/* ç½‘é¡µåŠ è½½æ‰€éœ€çš„æ—¶é—´ */</span><span class="token punctuation">;</span>


<span class="token comment">// **`pageLoadTime` çš„å€¼åœ¨é¡µé¢åŠ è½½ä¹‹å‰æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥é‡‡ç”¨å¸¸è§„å‘½å,ä½†æ˜¯å®ƒä»ç„¶æ˜¯ä¸ªå¸¸é‡ï¼Œå› ä¸ºèµ‹å€¼ä¹‹åä¸ä¼šæ”¹å˜**</span>

<span class="token comment">// æ¢å¥è¯è¯´ï¼Œ**å¤§å†™å‘½åçš„å¸¸é‡ä»…ç”¨ä½œâ€œç¡¬ç¼–ç ï¼ˆhard-codedï¼‰â€å€¼çš„åˆ«å**ã€‚**å½“å€¼åœ¨æ‰§è¡Œä¹‹å‰æˆ–åœ¨è¢«å†™å…¥ä»£ç çš„æ—¶å€™ï¼Œå°±çŸ¥é“å€¼æ˜¯ä»€ä¹ˆäº†**ã€‚</span></code></pre></div>
<h2>æ•°æ®ç±»å‹</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨ JavaScript ä¸­æœ‰ 8 ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆè¯‘æ³¨ï¼š**7 ç§åŸå§‹ç±»å‹(åŸºæœ¬æ•°æ®ç±»å‹)å’Œ 1 ç§å¼•ç”¨ç±»å‹(å¤æ‚æ•°æ®ç±»å‹)**ï¼‰

- `number`

- `bigint`

- `string`

- `boolean`

- `null`

- `undefined`

- `symbol`

- `object`</code></pre></div>
<p>ğŸš© å¯ä»¥é€šè¿‡ <code class="language-text">typeof</code> è¿ç®—ç¬¦æŸ¥çœ‹å­˜å‚¨åœ¨å˜é‡ä¸­çš„æ•°æ®ç±»å‹</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä¸¤ç§å½¢å¼ï¼š`typeof x` æˆ–è€… `typeof(x)`

- ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç±»å‹åç§°ï¼Œä¾‹å¦‚ `"string"`

- `typeof null` ä¼šè¿”å› `"object"` â€”â€” è¿™æ˜¯ JavaScript ç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªé”™è¯¯ï¼Œå®é™…ä¸Šå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ª object

- `typeof alert` çš„ç»“æœæ˜¯ `"function"`ã€‚åœ¨ JavaScript è¯­è¨€ä¸­æ²¡æœ‰ä¸€ä¸ªç‰¹åˆ«çš„ `â€œfunctionâ€` ç±»å‹ã€‚å‡½æ•°éš¶å±äº object ç±»å‹ã€‚ä½†æ˜¯ `typeof` ä¼šå¯¹å‡½æ•°åŒºåˆ†å¯¹å¾…ï¼Œå¹¶è¿”å› `"function"`ã€‚è¿™ä¹Ÿæ˜¯æ¥è‡ªäº JavaScript è¯­è¨€æ—©æœŸçš„é—®é¢˜ã€‚*ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ç§è¡Œä¸ºæ˜¯ä¸æ­£ç¡®çš„ï¼Œä½†åœ¨å®é™…ç¼–ç¨‹ä¸­å´éå¸¸æ–¹ä¾¿ã€‚*</code></pre></div>
<h2>Number ç±»å‹</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">number ç±»å‹ä»£è¡¨æ•´æ•°å’Œæµ®ç‚¹æ•°;é™¤äº†å¸¸è§„çš„æ•°å­—ï¼Œè¿˜åŒ…æ‹¬æ‰€è°“çš„â€œç‰¹æ®Šæ•°å€¼ï¼ˆâ€œspecial numeric valuesâ€ï¼‰â€ä¹Ÿå±äºè¿™ç§ç±»å‹ï¼šInfinityã€-Infinity å’Œ NaNã€‚

- `alert( 1 / 0 ); // Infinity`

- `alert( "not a number" / 2 + 5 ); // NaN` **NaN æ˜¯ç²˜æ€§çš„ã€‚ä»»ä½•å¯¹ NaN çš„è¿›ä¸€æ­¥æ“ä½œéƒ½ä¼šè¿”å› NaN**</code></pre></div>
<h2>å¸¸ç”¨çš„ç±»å‹è½¬æ¢:è½¬æ¢ä¸º string ç±»å‹ã€è½¬æ¢ä¸º number ç±»å‹å’Œè½¬æ¢ä¸º boolean ç±»å‹</h2>
<p>ğŸš© å­—ç¬¦ä¸²è½¬æ¢</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è½¬æ¢å‘ç”Ÿåœ¨è¾“å‡ºå†…å®¹çš„æ—¶å€™

- æˆ–é€šè¿‡ String(value) è¿›è¡Œæ˜¾å¼è½¬æ¢</code></pre></div>
<p>ğŸš© æ•°å­—å‹è½¬æ¢</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è½¬æ¢å‘ç”Ÿåœ¨è¿›è¡Œç®—æœ¯æ“ä½œæ—¶

- æˆ–é€šè¿‡ Number(value) è¿›è¡Œæ˜¾å¼è½¬æ¢

- è§„åˆ™ï¼š

 - Number(undefined);// NaN

 - Number(null);// 0

 - Number(true);// 1

 - Number(false);// 0

 - Number(str);// åŸæ ·è¯»å–strå­—ç¬¦ä¸²ï¼Œå¿½ç•¥ä¸¤ç«¯ç©ºç™½ï¼Œç©ºå­—ç¬¦ä¸²è½¬æ¢ä¸º0ï¼Œå‡ºé”™åˆ™ä¸ºNaN</code></pre></div>
<p>ğŸš© å¸ƒå°”å‹è½¬æ¢</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è½¬æ¢å‘ç”Ÿåœ¨è¿›è¡Œé€»è¾‘æ“ä½œæ—¶

- å¯ä»¥é€šè¿‡ Boolean(value) è¿›è¡Œæ˜¾å¼è½¬æ¢

    - Boolean(0);//false

    - Boolean(null);//false

    - Boolean(undefined);//false

    - Boolean(NaN);//false

    - Boolean("");//false

    - Boolean(" ");//true

    - Boolean("0");//true</code></pre></div>
<h2>è‡ªå¢/è‡ªå‡</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">**æ‰€æœ‰çš„è¿ç®—ç¬¦éƒ½æœ‰è¿”å›å€¼**ï¼Œè‡ªå¢/è‡ªå‡ä¹Ÿä¸ä¾‹å¤–


- å‰ç½®å½¢å¼è¿”å›ä¸€ä¸ªæ–°çš„å€¼

- åç½®è¿”å›åŸæ¥çš„å€¼ï¼ˆåšåŠ æ³•/å‡æ³•ä¹‹å‰çš„å€¼ï¼‰</code></pre></div>
<h2>èµ‹å€¼ <code class="language-text">=</code> è¿”å›ä¸€ä¸ªå€¼</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨ JavaScript ä¸­ï¼Œå¤§å¤šæ•°è¿ç®—ç¬¦éƒ½ä¼šè¿”å›ä¸€ä¸ªå€¼

- è¿™å¯¹äº + å’Œ - æ¥è¯´æ˜¯æ˜¾è€Œæ˜“è§çš„

- ä½†å¯¹äº = æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤</code></pre></div>
<p>ğŸš©<strong>è¯­å¥ x = value å°†å€¼ value å†™å…¥ x ç„¶åè¿”å› xã€‚</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">-</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">alert</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

<span class="token comment">// ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œ(a = b + 1) çš„ç»“æœæ˜¯èµ‹ç»™ a çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ 3ï¼‰ã€‚ç„¶åè¯¥å€¼è¢«ç”¨äºè¿›ä¸€æ­¥çš„è¿ç®—ã€‚</span>

<span class="token comment">// æœ‰æ—¶ä¼šåœ¨ JavaScript åº“ä¸­çœ‹åˆ°å®ƒã€‚ä¸è¿‡ï¼Œè¯·ä¸è¦å†™è¿™æ ·çš„ä»£ç ã€‚è¿™æ ·çš„æŠ€å·§ç»å¯¹ä¸ä¼šä½¿ä»£ç å˜å¾—æ›´æ¸…æ™°æˆ–å¯è¯»ã€‚</span></code></pre></div>
<h2>åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤§å°æ—¶ï¼ŒJavaScript ä¼šä½¿ç”¨â€œå­—å…¸ï¼ˆdictionaryï¼‰â€æˆ–â€œè¯å…¸ï¼ˆlexicographicalï¼‰â€é¡ºåºè¿›è¡Œåˆ¤å®š</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ¢è¨€ä¹‹ï¼Œå­—ç¬¦ä¸²æ˜¯æŒ‰å­—ç¬¦ï¼ˆæ¯ï¼‰é€ä¸ªè¿›è¡Œæ¯”è¾ƒçš„ã€‚</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Z"</span> <span class="token operator">></span> <span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Glow"</span> <span class="token operator">></span> <span class="token string">"Glee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Bee"</span> <span class="token operator">></span> <span class="token string">"Be"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<p>ğŸš© å­—ç¬¦ä¸²çš„æ¯”è¾ƒç®—æ³•éå¸¸ç®€å•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é¦–å…ˆæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„é¦–ä½å­—ç¬¦å¤§å°

- å¦‚æœä¸€æ–¹å­—ç¬¦è¾ƒå¤§ï¼ˆæˆ–è¾ƒå°ï¼‰ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²å¤§äºï¼ˆæˆ–å°äºï¼‰å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç®—æ³•ç»“æŸã€‚

- å¦åˆ™ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²çš„é¦–ä½å­—ç¬¦ç›¸ç­‰ï¼Œåˆ™ç»§ç»­å–å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²å„è‡ªçš„åä¸€ä½å­—ç¬¦è¿›è¡Œæ¯”è¾ƒ

- é‡å¤ä¸Šè¿°æ­¥éª¤è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ¯”è¾ƒå®ŒæˆæŸå­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦ä¸ºæ­¢

- å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦åŒæ—¶ç”¨å®Œï¼Œé‚£ä¹ˆåˆ™åˆ¤å®šå®ƒä»¬ç›¸ç­‰ï¼Œå¦åˆ™æœªç»“æŸï¼ˆè¿˜æœ‰æœªæ¯”è¾ƒçš„å­—ç¬¦ï¼‰çš„å­—ç¬¦ä¸²æ›´å¤§</code></pre></div>
<p>ğŸš©<strong>éçœŸæ­£çš„å­—å…¸é¡ºåºï¼Œè€Œæ˜¯ Unicode ç¼–ç é¡ºåº</strong></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿™æ˜¯å› ä¸ºåœ¨ JavaScript ä½¿ç”¨çš„å†…éƒ¨ç¼–ç è¡¨ä¸­ï¼ˆUnicodeï¼‰ï¼Œå°å†™å­—æ¯çš„å­—ç¬¦ç´¢å¼•å€¼æ›´å¤§</code></pre></div>
<h2>å€¼çš„æ¯”è¾ƒ</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é¿å…é—®é¢˜ï¼š

- é™¤äº†ä¸¥æ ¼ç›¸ç­‰ === å¤–ï¼Œå…¶ä»–ä½†å‡¡æ˜¯æœ‰ undefined/null å‚ä¸çš„æ¯”è¾ƒï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ ¼å¤–å°å¿ƒ

- é™¤éä½ éå¸¸æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™æ°¸è¿œä¸è¦ä½¿ç”¨ >= > &lt; &lt;= å»æ¯”è¾ƒä¸€ä¸ªå¯èƒ½ä¸º null/undefined çš„å˜é‡

- å¯¹äºå–å€¼å¯èƒ½æ˜¯ null/undefined çš„å˜é‡ï¼Œè¯·æŒ‰éœ€è¦åˆ†åˆ«æ£€æŸ¥å®ƒçš„å–å€¼æƒ…å†µ</code></pre></div>
<h2>é€»è¾‘ æˆ– è¿ç®—ç¬¦</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''ä¸€ä¸ªæˆ–è¿ç®— || çš„é“¾ï¼Œå°†è¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œå¦‚æœä¸å­˜åœ¨çœŸå€¼ï¼Œå°±è¿”å›è¯¥é“¾çš„æœ€åä¸€ä¸ªå€¼''</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿”å›çš„å€¼æ˜¯æ“ä½œæ•°çš„åˆå§‹å½¢å¼ï¼Œä¸ä¼šåšå¸ƒå°”è½¬æ¢</code></pre></div>
<p>ğŸš©<code class="language-text">ä¸â€œçº¯ç²¹çš„ã€ä¼ ç»Ÿçš„ã€ä»…ä»…å¤„ç†å¸ƒå°”å€¼çš„æˆ–è¿ç®—â€ç›¸æ¯”ï¼Œè¿™ä¸ªè§„åˆ™å°±å¼•èµ·äº†ä¸€äº›å¾ˆæœ‰è¶£çš„ç”¨æ³•</code></p>
<p>ä¸€ï¼Œâ€è·å–å˜é‡åˆ—è¡¨æˆ–è€…è¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªçœŸå€¼â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä¾‹å¦‚ï¼Œæœ‰å˜é‡ firstNameã€lastName å’Œ nickNameï¼Œéƒ½æ˜¯å¯é€‰çš„ï¼ˆå³å¯ä»¥æ˜¯ undefinedï¼Œä¹Ÿå¯ä»¥æ˜¯å‡å€¼ï¼‰ã€‚</span>

<span class="token comment">// ç”¨æˆ–è¿ç®— || æ¥é€‰æ‹©æœ‰æ•°æ®çš„é‚£ä¸€ä¸ªï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥ï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™ç”¨ "Anonymous"ï¼‰ï¼š</span>

<span class="token keyword">let</span> firstName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lastName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> nickName <span class="token operator">=</span> <span class="token string">"SuperCoder"</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>firstName <span class="token operator">||</span> lastName <span class="token operator">||</span> nickName <span class="token operator">||</span> <span class="token string">"Anonymous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SuperCoder</span>

<span class="token comment">// å¦‚æœæ‰€æœ‰å˜é‡çš„å€¼éƒ½ä¸ºå‡ï¼Œç»“æœå°±æ˜¯ "Anonymous"ã€‚</span></code></pre></div>
<p>äºŒï¼Œâ€çŸ­è·¯æ±‚å€¼ï¼ˆShort-circuit evaluationï¼‰â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æˆ–è¿ç®—ç¬¦ || çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æ‰€è°“çš„â€œçŸ­è·¯æ±‚å€¼â€ã€‚</span>

<span class="token comment">// è¿™æŒ‡çš„æ˜¯ï¼Œ|| å¯¹å…¶å‚æ•°è¿›è¡Œå¤„ç†ï¼Œç›´åˆ°è¾¾åˆ°ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œç„¶åç«‹å³è¿”å›è¯¥å€¼ï¼Œè€Œæ— éœ€å¤„ç†å…¶ä»–å‚æ•°ã€‚</span>

<span class="token comment">//å¦‚æœæ“ä½œæ•°ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼ï¼Œä¾‹å¦‚å˜é‡èµ‹å€¼æˆ–å‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸€ç‰¹æ€§çš„é‡è¦æ€§å°±å˜å¾—æ˜¾è€Œæ˜“è§äº†ã€‚</span>

<span class="token comment">//åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªä¼šæ‰“å°ç¬¬äºŒæ¡ä¿¡æ¯ï¼š</span>

<span class="token boolean">true</span> <span class="token operator">||</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"not printed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token boolean">false</span> <span class="token operator">||</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"printed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åœ¨ç¬¬ä¸€è¡Œä¸­ï¼Œæˆ–è¿ç®—ç¬¦ || åœ¨é‡åˆ° true æ—¶ç«‹å³åœæ­¢è¿ç®—ï¼Œæ‰€ä»¥ alert æ²¡æœ‰è¿è¡Œã€‚</span>

<span class="token comment">// æœ‰æ—¶ï¼Œäººä»¬åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåªåœ¨å·¦ä¾§çš„æ¡ä»¶ä¸ºå‡æ—¶æ‰æ‰§è¡Œå‘½ä»¤ã€‚</span></code></pre></div>
<h2>é€»è¾‘ ä¸ è¿ç®—ç¬¦</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸è¿ç®—è¿”å›ç¬¬ä¸€ä¸ªå‡å€¼ï¼Œå¦‚æœæ²¡æœ‰å‡å€¼å°±è¿”å›æœ€åä¸€ä¸ªå€¼</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿”å›çš„å€¼æ˜¯æ“ä½œæ•°çš„åˆå§‹å½¢å¼ï¼Œ**ä¸ä¼šåšå¸ƒå°”è½¬æ¢**</code></pre></div>
<p>ä¸€ï¼Œâ€è·å–å˜é‡åˆ—è¡¨æˆ–è€…è¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªå‡å€¼â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span></code></pre></div>
<p>äºŒï¼Œâ€çŸ­è·¯æ±‚å€¼ï¼ˆShort-circuit evaluationï¼‰:å¦‚æœæ‰€æœ‰çš„å€¼éƒ½æ˜¯çœŸå€¼ï¼Œæœ€åä¸€ä¸ªå€¼å°†ä¼šè¢«è¿”å›â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3ï¼Œæœ€åä¸€ä¸ªå€¼</span></code></pre></div>
<p>ä¸è¿ç®— &#x26;&#x26; çš„ä¼˜å…ˆçº§æ¯”æˆ–è¿ç®— || è¦é«˜</p>
<h2>é€»è¾‘ é è¿ç®—ç¬¦</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é€»è¾‘éè¿ç®—ç¬¦æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æŒ‰å¦‚ä¸‹è¿ä½œï¼š

- å°†æ“ä½œæ•°è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹ï¼štrue/falseã€‚

- **è¿”å›ç›¸åçš„å€¼**</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">**ä¸¤ä¸ªéè¿ç®— !! æœ‰æ—¶å€™ç”¨æ¥å°†æŸä¸ªå€¼è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹**</code></pre></div>
<h2>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆnullish coalescing operatorï¼‰ ??</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å°†å€¼æ—¢ä¸æ˜¯ null ä¹Ÿä¸æ˜¯ undefined çš„è¡¨è¾¾å¼**å®šä¹‰ä¸º**â€œå·²å®šä¹‰çš„ï¼ˆdefinedï¼‰


a ?? b çš„ç»“æœæ˜¯ï¼š

- å¦‚æœ a æ˜¯å·²å®šä¹‰çš„ï¼Œåˆ™ç»“æœä¸º a

- å¦‚æœ a ä¸æ˜¯å·²å®šä¹‰çš„ï¼Œåˆ™ç»“æœä¸º b


- æ¢å¥è¯è¯´ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ null/undefinedï¼Œåˆ™ ?? è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦åˆ™ï¼Œè¿”å›ç¬¬äºŒä¸ªå‚æ•°</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">result <span class="token operator">=</span> a <span class="token operator">??</span> b<span class="token punctuation">;</span>

<span class="token comment">// ç­‰ä»·äº</span>

result <span class="token operator">=</span> a <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© åœºæ™¯ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 1. ä¸ºå¯èƒ½æ˜¯æœªå®šä¹‰çš„å˜é‡æä¾›ä¸€ä¸ªé»˜è®¤å€¼</span>

<span class="token keyword">let</span> user<span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user <span class="token operator">??</span> <span class="token string">"Anonymous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Anonymous</span>

<span class="token comment">// 2. å¯ä»¥ä½¿ç”¨ ?? åºåˆ—ä»ä¸€ç³»åˆ—çš„å€¼ä¸­é€‰æ‹©å‡ºç¬¬ä¸€ä¸ªé null/undefined çš„å€¼</span>

<span class="token keyword">let</span> firstName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lastName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> nickName <span class="token operator">=</span> <span class="token string">"Supercoder"</span><span class="token punctuation">;</span>

<span class="token comment">// æ˜¾ç¤ºç¬¬ä¸€ä¸ªå·²å®šä¹‰çš„å€¼ï¼š</span>
<span class="token function">alert</span><span class="token punctuation">(</span>firstName <span class="token operator">??</span> lastName <span class="token operator">??</span> nickName <span class="token operator">??</span> <span class="token string">"Anonymous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Supercoder</span></code></pre></div>
<p>ğŸš©** || å’Œ ?? ä¹‹é—´é‡è¦çš„åŒºåˆ«æ˜¯**ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- || è¿”å›ç¬¬ä¸€ä¸ª çœŸ å€¼

- ?? è¿”å›ç¬¬ä¸€ä¸ª å·²å®šä¹‰çš„ å€¼</code></pre></div>
<h2>switch ç±»å‹å¾ˆå…³é”®</h2>
<p>ğŸš© ä¸¥æ ¼ç›¸ç­‰</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// è¢«æ¯”è¾ƒçš„å€¼å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹æ‰èƒ½è¿›è¡ŒåŒ¹é…</span>

<span class="token keyword">let</span> arg <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Enter a value?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token string">"0"</span><span class="token operator">:</span>
  <span class="token keyword">case</span> <span class="token string">"1"</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"One or zero"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">case</span> <span class="token string">"2"</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Never executes!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"An unknown value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å…¥ 3ï¼Œå› ä¸º prompt çš„ç»“æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ "3"ï¼Œä¸ä¸¥æ ¼ç›¸ç­‰ === äºæ•°å­—ç±»å‹çš„ 3ï¼Œæ‰€ä»¥ case 3 ä¸ä¼šæ‰§è¡Œï¼å› æ­¤ case 3 éƒ¨åˆ†æ˜¯ä¸€æ®µæ— æ•ˆä»£ç ã€‚æ‰€ä»¥ä¼šæ‰§è¡Œ default åˆ†æ”¯ã€‚</span></code></pre></div>
<h2>å‡½æ•° return è¿”å›å€¼</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">1.**ç©ºå€¼çš„ return æˆ–æ²¡æœ‰ return çš„å‡½æ•°è¿”å›å€¼ä¸º undefined**</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">2.**ä¸è¦åœ¨ return ä¸è¿”å›å€¼ä¹‹é—´æ·»åŠ æ–°è¡Œ**</code></pre></div>
<p>å¯¹äº return çš„é•¿è¡¨è¾¾å¼ï¼Œå¯èƒ½ä½ ä¼šå¾ˆæƒ³å°†å…¶æ”¾åœ¨å•ç‹¬ä¸€è¡Œ</p>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">return</span><span class="token punctuation">;</span>
some <span class="token operator">+</span> long <span class="token operator">+</span> expression <span class="token operator">+</span> or <span class="token operator">+</span> whatever <span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ä½†è¿™ä¸è¡Œï¼Œå› ä¸º JavaScript é»˜è®¤ä¼šåœ¨ return ä¹‹ååŠ ä¸Šåˆ†å·ã€‚ä¸Šé¢è¿™æ®µä»£ç å’Œä¸‹é¢è¿™æ®µä»£ç è¿è¡Œæµç¨‹ç›¸åŒï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">return</span><span class="token punctuation">;</span>
some <span class="token operator">+</span> long <span class="token operator">+</span> expression <span class="token operator">+</span> or <span class="token operator">+</span> whatever <span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å› æ­¤ï¼Œå®é™…ä¸Šå®ƒçš„è¿”å›å€¼å˜æˆäº†ç©ºå€¼</p>
<h2>å‡½æ•°è¡¨è¾¾å¼æœ«å°¾ä¼šæœ‰ä¸ªåˆ†å·ï¼Ÿ</h2>
<p>ğŸš© ä¸ºä»€ä¹ˆå‡½æ•°è¡¨è¾¾å¼ç»“å°¾æœ‰ä¸€ä¸ªåˆ†å· ; è€Œå‡½æ•°å£°æ˜æ²¡æœ‰?</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>ç­”æ¡ˆå¾ˆç®€å•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åœ¨ä»£ç å—çš„ç»“å°¾ä¸éœ€è¦åŠ åˆ†å· ;

    - if { ... }

    - for { }

    - function f { }

    - ç­‰è¯­æ³•ç»“æ„åé¢éƒ½ä¸ç”¨åŠ 


- å‡½æ•°è¡¨è¾¾å¼æ˜¯åœ¨è¯­å¥å†…éƒ¨çš„ï¼š

    - `let sayHi = ...;`

    - ä½œä¸ºä¸€ä¸ªå€¼ï¼Œå®ƒä¸æ˜¯ä»£ç å—è€Œæ˜¯ä¸€ä¸ªèµ‹å€¼è¯­å¥

    - ä¸ç®¡å€¼æ˜¯ä»€ä¹ˆï¼Œéƒ½å»ºè®®åœ¨è¯­å¥æœ«å°¾æ·»åŠ åˆ†å· ;

    - æ‰€ä»¥è¿™é‡Œçš„åˆ†å·ä¸å‡½æ•°è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå®ƒåªæ˜¯ç”¨äºç»ˆæ­¢è¯­å¥</code></pre></div>
<h2>Babel ï¼šTranspiler And Polyfill</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å½“ä½¿ç”¨è¯­è¨€çš„ä¸€äº›ç°ä»£ç‰¹æ€§æ—¶ï¼Œä¸€äº›å¼•æ“å¯èƒ½æ— æ³•æ”¯æŒè¿™æ ·çš„ä»£ç 


- æ­£å¦‚ä¸Šæ‰€è¿°ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åŠŸèƒ½åœ¨ä»»ä½•åœ°æ–¹éƒ½æœ‰å®ç°


- è¿™å°±æ˜¯ Babel æ¥æ‹¯æ•‘çš„ä¸œè¥¿</code></pre></div>
<p>ğŸš©<a href="https://babeljs.io/">Babel</a> æ˜¯ä¸€ä¸ª <a href="https://en.wikipedia.org/wiki/Source-to-source_compiler">transpiler</a>,å®ƒå°†ç°ä»£çš„ JavaScript ä»£ç è½¬åŒ–ä¸ºä»¥å‰çš„æ ‡å‡†å½¢å¼ã€‚</p>
<p>å®é™…ä¸Šï¼ŒBabel åŒ…å«äº†ä¸¤éƒ¨åˆ†</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">1.ç¬¬ä¸€ï¼Œç”¨äºé‡å†™ä»£ç çš„ transpiler ç¨‹åº

- å¼€å‘è€…åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šè¿è¡Œå®ƒ,å®ƒä»¥ä¹‹å‰çš„è¯­è¨€æ ‡å‡†å¯¹ä»£ç è¿›è¡Œé‡å†™

- ç„¶åå°†ä»£ç ä¼ åˆ°é¢å‘ç”¨æˆ·çš„ç½‘ç«™

- åƒ [webpack](http://webpack.github.io/) è¿™æ ·çš„ç°ä»£é¡¹ç›®æ„å»ºç³»ç»Ÿï¼Œæä¾›äº†åœ¨æ¯æ¬¡ä»£ç æ”¹å˜æ—¶è‡ªåŠ¨è¿è¡Œ transpiler çš„æ–¹æ³•ï¼Œå› æ­¤å¾ˆå®¹æ˜“é›†æˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">2.ç¬¬äºŒï¼Œpolyfill

- æ–°çš„è¯­è¨€ç‰¹æ€§å¯èƒ½ä¸ä»…åŒ…æ‹¬è¯­æ³•ç»“æ„ï¼Œè¿˜åŒ…æ‹¬æ–°çš„å†…å»ºå‡½æ•°

- Transpiler ä¼šé‡å†™ä»£ç ï¼Œå°†è¯­æ³•ç»“æ„è½¬æ¢ä¸ºæ—§çš„ç»“æ„

- ä½†æ˜¯å¯¹äºæ–°çš„å†…å»ºå‡½æ•°ï¼Œéœ€è¦æˆ‘ä»¬å»å®ç°

- JavaScript æ˜¯ä¸€ä¸ªé«˜åº¦åŠ¨æ€åŒ–çš„è¯­è¨€ï¼Œè„šæœ¬å¯ä»¥æ·»åŠ /ä¿®æ”¹ä»»ä½•å‡½æ•°ï¼Œä»è€Œä½¿å®ƒä»¬çš„è¡Œä¸ºç¬¦åˆç°ä»£æ ‡å‡†

- æ›´æ–°/æ·»åŠ æ–°å‡½æ•°çš„è„šæœ¬ç§°ä¸º â€œpolyfillâ€ï¼Œå®ƒâ€œå¡«è¡¥â€äº†ç¼ºå£ï¼Œå¹¶æ·»åŠ äº†ç¼ºå°‘çš„å®ç°</code></pre></div>
<p>ğŸš© ä¸¤ä¸ªæœ‰æ„æ€çš„ polyfills</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- [core js](https://github.com/zloirock/core-js) æ”¯æŒå¾ˆå¤šï¼Œå…è®¸åªåŒ…å«éœ€è¦çš„åŠŸèƒ½

- [polyfill.io](http://polyfill.io/) æ ¹æ®åŠŸèƒ½å’Œç”¨æˆ·çš„æµè§ˆå™¨ï¼Œä¸ºè„šæœ¬æä¾› polyfill çš„æœåŠ¡</code></pre></div>
<p>ğŸš©transpiler å’Œ polyfill æ˜¯å¿…è¦çš„</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœè¦ä½¿ç”¨ç°ä»£è¯­è¨€åŠŸèƒ½ï¼Œtranspiler å’Œ polyfill æ˜¯å¿…è¦çš„</code></pre></div>
<h2>å°¾éšï¼ˆtrailingï¼‰æˆ–æ‚¬æŒ‚ï¼ˆhangingï¼‰é€—å·</h2>
<p>åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå±æ€§åº”ä»¥é€—å·ç»“å°¾ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå±æ€§åº”ä»¥é€—å·ç»“å°¾,å«åšå°¾éšï¼ˆtrailingï¼‰æˆ–æ‚¬æŒ‚ï¼ˆhangingï¼‰é€—å·

- è¿™æ ·ä¾¿äºæ·»åŠ ã€åˆ é™¤å’Œç§»åŠ¨å±æ€§ï¼Œå› ä¸ºæ‰€æœ‰çš„è¡Œéƒ½æ˜¯ç›¸ä¼¼çš„</code></pre></div>
<h2>æ–¹æ‹¬å·è®¿é—®å±æ€§çš„çµæ´»æ€§</h2>
<p>ğŸš© å¯¹äºå¤šè¯å±æ€§ï¼Œç‚¹æ“ä½œå°±ä¸èƒ½ç”¨äº†ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// è¿™å°†æç¤ºæœ‰è¯­æ³•é”™è¯¯</span>
user<span class="token punctuation">.</span>likes birds <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment">// JavaScript ç†è§£ä¸äº†ã€‚å®ƒè®¤ä¸ºæˆ‘ä»¬åœ¨å¤„ç† user.likesï¼Œç„¶ååœ¨é‡åˆ°æ„å¤–çš„ birds æ—¶ç»™å‡ºäº†è¯­æ³•é”™è¯¯ã€‚</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ç‚¹ç¬¦å·è¦æ±‚ key æ˜¯''æœ‰æ•ˆçš„å˜é‡æ ‡è¯†ç¬¦''ã€‚è¿™æ„å‘³ç€ï¼š''ä¸åŒ…å«ç©ºæ ¼ï¼Œä¸ä»¥æ•°å­—å¼€å¤´ï¼Œä¹Ÿä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå…è®¸ä½¿ç”¨ $ å’Œ _ï¼‰''ã€‚


- å¦ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ–¹æ‹¬å·ï¼Œå¯ç”¨äºä»»ä½•å­—ç¬¦ä¸²</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è®¾ç½®</span>
user<span class="token punctuation">[</span><span class="token string">"likes birds"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">[</span><span class="token string">"likes birds"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// åˆ é™¤</span>
<span class="token keyword">delete</span> user<span class="token punctuation">[</span><span class="token string">"likes birds"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// è¯·æ³¨æ„æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ä¸²è¦æ”¾åœ¨å¼•å·ä¸­ï¼Œå•å¼•å·æˆ–åŒå¼•å·éƒ½å¯ä»¥</span></code></pre></div>
<p>ğŸš© æ–¹æ‹¬å·åŒæ ·â€æä¾›äº†ä¸€ç§å¯ä»¥é€šè¿‡ä»»æ„è¡¨è¾¾å¼æ¥è·å–å±æ€§åçš„æ–¹æ³•â€ â€”â€” è·Ÿè¯­ä¹‰ä¸Šçš„å­—ç¬¦ä¸²ä¸åŒ â€”â€” æ¯”å¦‚åƒç±»ä¼¼äºä¸‹é¢çš„å˜é‡ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token string">"likes birds"</span><span class="token punctuation">;</span>

<span class="token comment">// è·Ÿ user["likes birds"] = true; ä¸€æ ·</span>
user<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš©â€å˜é‡ key å¯ä»¥æ˜¯ç¨‹åºè¿è¡Œæ—¶è®¡ç®—å¾—åˆ°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ ¹æ®ç”¨æˆ·çš„è¾“å…¥å¾—åˆ°çš„ã€‚ç„¶åå¯ä»¥ç”¨å®ƒæ¥è®¿é—®å±æ€§ã€‚è¿™ç»™äº†æˆ‘ä»¬å¾ˆå¤§çš„<code class="language-text">çµæ´»æ€§</code>ã€‚â€</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"What do you want to know about the user?"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¿é—®å˜é‡</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Johnï¼ˆå¦‚æœè¾“å…¥ "name"ï¼‰</span></code></pre></div>
<p>ç‚¹ç¬¦å·ä¸èƒ½ä»¥ç±»ä¼¼çš„æ–¹å¼ä½¿ç”¨ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span></code></pre></div>
<h2>è®¡ç®—å±æ€§ &#x26;&#x26; æ–¹æ‹¬å·è®¿é—®å±æ€§</h2>
<p>ğŸš© åœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œä½¿ç”¨æ–¹æ‹¬å·</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> fruit <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Which fruit to buy?"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>fruit<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// å±æ€§åæ˜¯ä» fruit å˜é‡ä¸­å¾—åˆ°çš„</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>bag<span class="token punctuation">.</span>apple<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 å¦‚æœ fruit="apple"</span></code></pre></div>
<p>ğŸš© æœ¬è´¨ä¸Šï¼Œè¿™è·Ÿä¸‹é¢çš„è¯­æ³•æ•ˆæœç›¸åŒï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> fruit <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Which fruit to buy?"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ä» fruit å˜é‡ä¸­è·å–å€¼</span>
bag<span class="token punctuation">[</span>fruit<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></code></pre></div>
<h2>å±æ€§å‘½åæ²¡æœ‰é™åˆ¶</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å˜é‡åä¸èƒ½æ˜¯ç¼–ç¨‹è¯­è¨€çš„æŸä¸ªä¿ç•™å­—ï¼Œå¦‚ â€œforâ€ã€â€œletâ€ã€â€œreturnâ€ ç­‰â€¦â€¦</code></pre></div>
<p>ğŸš© ä½†â€å¯¹è±¡çš„å±æ€§åå¹¶ä¸å—æ­¤é™åˆ¶â€ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// è¿™äº›å±æ€§éƒ½æ²¡é—®é¢˜</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">let</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token keyword">return</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>for <span class="token operator">+</span> obj<span class="token punctuation">.</span>let <span class="token operator">+</span> obj<span class="token punctuation">.</span>return<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span></code></pre></div>
<p>ğŸš© ç®€è€Œè¨€ä¹‹ï¼Œå±æ€§å‘½åæ²¡æœ‰é™åˆ¶ã€‚</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ''å±æ€§åå¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²æˆ–è€… symbolï¼ˆä¸€ç§ç‰¹æ®Šçš„æ ‡å¿—ç¬¦ç±»å‹ï¼Œå°†åœ¨åé¢ä»‹ç»ï¼‰''


- ''å…¶ä»–ç±»å‹ä¼šè¢«è‡ªåŠ¨åœ°è½¬æ¢ä¸ºå­—ç¬¦ä¸²''</code></pre></div>
<p>ğŸš© é™·é˜±ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åä¸º `__proto__ `çš„å±æ€§ã€‚ä¸èƒ½å°†å®ƒè®¾ç½®ä¸ºä¸€ä¸ª''éå¯¹è±¡''çš„å€¼</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// åˆ†é…ä¸€ä¸ªæ•°å­—</span>
<span class="token function">alert</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object] â€” å€¼ä¸ºå¯¹è±¡ï¼Œä¸é¢„æœŸç»“æœä¸åŒ</span></code></pre></div>
<h2>å¯¹è±¡æœ‰é¡ºåºå—?</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¯¹è±¡æœ‰é¡ºåºå—ï¼Ÿæ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬éå†ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬è·å–å±æ€§çš„é¡ºåºæ˜¯å’Œå±æ€§æ·»åŠ æ—¶çš„é¡ºåºç›¸åŒå—ï¼Ÿè¿™é è°±å—ï¼Ÿ

- ç®€çŸ­çš„å›ç­”æ˜¯ï¼šâ€œæœ‰ç‰¹åˆ«çš„é¡ºåºâ€ï¼š''æ•´æ•°å±æ€§ä¼šè¢«è¿›è¡Œæ’åºï¼Œå…¶ä»–å±æ€§åˆ™æŒ‰ç…§åˆ›å»ºçš„é¡ºåºæ˜¾ç¤º''

> è¿™é‡Œçš„â€œæ•´æ•°å±æ€§â€æŒ‡çš„æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä¸åšä»»ä½•æ›´æ”¹çš„æƒ…å†µä¸‹ä¸ä¸€ä¸ªæ•´æ•°è¿›è¡Œç›¸äº’è½¬æ¢çš„å­—ç¬¦ä¸²</code></pre></div>
<p>ğŸš© æ•´æ•°å±æ€§ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> codes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">49</span><span class="token operator">:</span> <span class="token string">"Germany"</span><span class="token punctuation">,</span>
  <span class="token number">41</span><span class="token operator">:</span> <span class="token string">"Switzerland"</span><span class="token punctuation">,</span>
  <span class="token number">44</span><span class="token operator">:</span> <span class="token string">"Great Britain"</span><span class="token punctuation">,</span>
  <span class="token comment">// ..,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">"USA"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">in</span> codes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 41, 44, 49</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© éæ•´æ•°å±æ€§ï¼ŒæŒ‰ç…§åˆ›å»ºæ—¶çš„é¡ºåºæ¥æ’åºï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  surname<span class="token operator">:</span> <span class="token string">"Smith"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// å¢åŠ ä¸€ä¸ª</span>

<span class="token comment">// éæ•´æ•°å±æ€§æ˜¯æŒ‰ç…§åˆ›å»ºçš„é¡ºåºæ¥æ’åˆ—çš„</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name, surname, age</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© åˆ©ç”¨éæ•´æ•°å±æ€§åæ¥æ¬ºéª—ç¨‹åºï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> codes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"+49"</span><span class="token operator">:</span> <span class="token string">"Germany"</span><span class="token punctuation">,</span>
  <span class="token string">"+41"</span><span class="token operator">:</span> <span class="token string">"Switzerland"</span><span class="token punctuation">,</span>
  <span class="token string">"+44"</span><span class="token operator">:</span> <span class="token string">"Great Britain"</span><span class="token punctuation">,</span>
  <span class="token comment">// ..,</span>
  <span class="token string">"+1"</span><span class="token operator">:</span> <span class="token string">"USA"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">in</span> codes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token operator">+</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 49, 41, 44, 1</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>åƒåœ¾å›æ”¶</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">JavaScriptå†…å­˜ç®¡ç†å¾—é‡è¦æ¦‚å¿µ-å¯è¾¾æ€§ï¼ˆReachabilityï¼‰

- ''å¯è¾¾å€¼ï¼šä»¥æŸç§æ–¹å¼å¯è®¿é—®æˆ–å¯ç”¨çš„å€¼''

- ''æ ¹ï¼ˆrootsï¼‰''ï¼šå›ºæœ‰çš„å¯è¾¾å€¼çš„åŸºæœ¬é›†åˆï¼ˆè¿™äº›å€¼æ˜æ˜¾ä¸èƒ½è¢«é‡Šæ”¾ï¼‰ï¼š

    * å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œå‚æ•°

    * åµŒå¥—è°ƒç”¨æ—¶ï¼Œå½“å‰è°ƒç”¨é“¾ä¸Šæ‰€æœ‰å‡½æ•°çš„å˜é‡ä¸å‚æ•°

    * å…¨å±€å˜é‡

    * è¿˜æœ‰ä¸€äº›å†…éƒ¨çš„</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''è¢«å¼•ç”¨ä¸å¯è®¿é—®ï¼ˆä»ä¸€ä¸ªæ ¹ï¼‰ä¸åŒ''ï¼šä¸€ç»„ç›¸äº’è¿æ¥çš„å¯¹è±¡å¯èƒ½æ•´ä½“éƒ½ä¸å¯è¾¾</code></pre></div>
<p><a href="https://zh.javascript.info/garbage-collection#ke-da-xing-reachability">https://zh.javascript.info/garbage-collection#ke-da-xing-reachability</a></p>
<h2>this</h2>
<p>ğŸ’¡<code class="language-text">this</code> çš„å€¼æ˜¯åœ¨ä»£ç è¿è¡Œæ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œå®ƒå–å†³äº<code class="language-text">ä»£ç ä¸Šä¸‹æ–‡</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å¦‚æœä½ ç»å¸¸ä½¿ç”¨å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆä½ å¯èƒ½å·²ç»ä¹ æƒ¯äº†â€œç»‘å®š thisâ€çš„æ¦‚å¿µï¼Œå³åœ¨å¯¹è±¡ä¸­å®šä¹‰çš„æ–¹æ³•æ€»æ˜¯æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„ this


* åœ¨ JavaScript ä¸­ï¼Œthis æ˜¯â€œè‡ªç”±â€çš„ï¼Œå®ƒçš„å€¼æ˜¯åœ¨è°ƒç”¨æ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œå®ƒçš„å€¼å¹¶ä¸å–å†³äºæ–¹æ³•å£°æ˜çš„ä½ç½®ï¼Œè€Œæ˜¯å–å†³äºåœ¨â€œç‚¹ç¬¦å·å‰â€çš„æ˜¯ä»€ä¹ˆå¯¹è±¡


* åœ¨è¿è¡Œæ—¶å¯¹ this æ±‚å€¼çš„è¿™ä¸ªæ¦‚å¿µæ—¢æœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹

    - ä¸€æ–¹é¢ï¼Œå‡½æ•°å¯ä»¥è¢«é‡ç”¨äºä¸åŒçš„å¯¹è±¡

    - å¦ä¸€æ–¹é¢ï¼Œæ›´å¤§çš„çµæ´»æ€§é€ æˆäº†æ›´å¤§çš„å‡ºé”™çš„å¯èƒ½</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœ `obj.f()` è¢«è°ƒç”¨äº†ï¼Œåˆ™ `this` åœ¨ `f` å‡½æ•°è°ƒç”¨æœŸé—´æ˜¯ `obj`</code></pre></div>
<h2>new æ“ä½œç¬¦</h2>
<p>ğŸš©<code class="language-text">new</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å½“ä¸€ä¸ªå‡½æ•°è¢«ä½¿ç”¨ new æ“ä½œç¬¦æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š

- ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡è¢«åˆ›å»ºå¹¶åˆ†é…ç»™ this

- å‡½æ•°ä½“æ‰§è¡Œ.é€šå¸¸å®ƒä¼šä¿®æ”¹ thisï¼Œä¸ºå…¶æ·»åŠ æ–°çš„å±æ€§

- è¿”å› this çš„å€¼</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// `new User(...)` åšçš„å°±æ˜¯ç±»ä¼¼çš„äº‹æƒ…</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// this = {};ï¼ˆéšå¼åˆ›å»ºï¼‰</span>

  <span class="token comment">// æ·»åŠ å±æ€§åˆ° this</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>isAdmin <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// return this;ï¼ˆéšå¼è¿”å›ï¼‰</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© <code class="language-text">return</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é€šå¸¸ï¼Œæ„é€ å™¨æ²¡æœ‰ return è¯­å¥,ä»»åŠ¡æ˜¯å°†æ‰€æœ‰å¿…è¦çš„ä¸œè¥¿å†™å…¥ thisï¼Œå¹¶è‡ªåŠ¨è½¬æ¢ä¸ºç»“æœ

- ä½†æ˜¯ï¼Œå¦‚æœè¿™æœ‰ä¸€ä¸ª return è¯­å¥ï¼Œé‚£ä¹ˆè§„åˆ™å°±ç®€å•äº†ï¼š

    * ''å¦‚æœ return è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ this''

    * ''å¦‚æœ return è¿”å›çš„æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹ï¼Œåˆ™å¿½ç•¥''</code></pre></div>
<p>ğŸš© æ€è€ƒé¢˜ï¼šæ˜¯å¦å¯ä»¥åˆ›å»ºåƒ new A() == new B() è¿™æ ·çš„å‡½æ•° A å’Œ Bï¼Ÿ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> a <span class="token operator">==</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿™æ˜¯æ„é€ å™¨çš„ä¸»è¦ç›®çš„ â€”â€” å®ç°''å¯é‡ç”¨çš„å¯¹è±¡åˆ›å»º''ä»£ç </code></pre></div>
<h2>new.target</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ new.target å±æ€§æ¥æ£€æŸ¥/åˆ¤æ–­è¯¥å‡½æ•°æ˜¯è¢«

- é€šè¿‡ new è°ƒç”¨çš„â€œæ„é€ å™¨æ¨¡å¼â€

- è¿˜æ˜¯æ²¡è¢«é€šè¿‡ new è°ƒç”¨çš„â€œå¸¸è§„æ¨¡å¼â€</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸å¸¦ "new"ï¼š</span>
<span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// å¸¦ "new"ï¼š</span>
<span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function User { ... }</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœä½ æ²¡æœ‰é€šè¿‡ new è¿è¡Œæˆ‘</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â€¦â€¦æˆ‘ä¼šç»™ä½ æ·»åŠ  new</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è°ƒç”¨é‡å®šå‘åˆ°æ–°ç”¨æˆ·</span>
<span class="token function">alert</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John</span></code></pre></div>
<h2>?.å¯é€‰é“¾</h2>
<p>ğŸš©<code class="language-text">ä¸å­˜åœ¨çš„å±æ€§â€çš„é—®é¢˜</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// è·å– user.address.streetï¼Œè€Œè¯¥ç”¨æˆ·æ°å¥½æ²¡æä¾›åœ°å€ä¿¡æ¯ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯ï¼š</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€ä¸ªæ²¡æœ‰ "address" å±æ€§çš„ user å¯¹è±¡</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error!</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿™æ˜¯é¢„æœŸçš„ç»“æœ

- JavaScript çš„å·¥ä½œåŸç†å°±æ˜¯è¿™æ ·çš„,ä½†æ˜¯åœ¨å¾ˆå¤šå®é™…åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬''æ›´å¸Œæœ›å¾—åˆ°çš„æ˜¯ undefined è€Œä¸æ˜¯ä¸€ä¸ªé”™è¯¯''</code></pre></div>
<p>å¯èƒ½æœ€å…ˆæƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯åœ¨è®¿é—®è¯¥å€¼çš„å±æ€§ä¹‹å‰ï¼Œä½¿ç”¨ if æˆ–æ¡ä»¶è¿ç®—ç¬¦ ? å¯¹è¯¥å€¼è¿›è¡Œæ£€æŸ¥ï¼Œåƒè¿™æ ·:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>address <span class="token operator">?</span> user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>â€¦â€¦ä½†æ˜¯ä¸å¤Ÿä¼˜é›…ï¼ŒğŸ’¡â€å¯¹äºåµŒå¥—å±‚æ¬¡æ›´æ·±çš„å±æ€§å°±ä¼šå‡ºç°æ›´å¤šæ¬¡è¿™æ ·çš„é‡å¤ï¼Œè¿™å°±æ˜¯é—®é¢˜äº†â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å°è¯•è·å– user.address.street.nameã€‚æ—¢éœ€è¦æ£€æŸ¥ user.addressï¼Œåˆéœ€è¦æ£€æŸ¥ user.address.streetï¼š</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// user æ²¡æœ‰ address å±æ€§</span>

<span class="token function">alert</span><span class="token punctuation">(</span>
  user<span class="token punctuation">.</span>address <span class="token operator">?</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street <span class="token operator">?</span> user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street<span class="token punctuation">.</span>name <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™æ ·å°±â€å¤ªæ‰¯æ·¡äº†â€ï¼Œå¹¶ä¸”è¿™å¯èƒ½å¯¼è‡´å†™å‡ºæ¥çš„ä»£ç å¾ˆéš¾è®©åˆ«äººç†è§£</p>
<p>æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯ ğŸ’¡ ä½¿ç”¨ &#x26;&#x26; è¿ç®—ç¬¦ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// user æ²¡æœ‰ address å±æ€§</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>address <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefinedï¼ˆä¸æŠ¥é”™</span></code></pre></div>
<p>ä½†ä»ç„¶ä¸å¤Ÿä¼˜é›…</p>
<p>ğŸš©<code class="language-text">å¯é€‰é“¾</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''å¦‚æœå¯é€‰é“¾ ?. å‰é¢çš„éƒ¨åˆ†æ˜¯ undefined æˆ–è€… nullï¼Œå®ƒä¼šåœæ­¢è¿ç®—å¹¶è¿”å›è¯¥éƒ¨åˆ†''</code></pre></div>
<p>ğŸš©<code class="language-text">ä¸è¦è¿‡åº¦ä½¿ç”¨å¯é€‰é“¾</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''åº”è¯¥åªå°† ?. ä½¿ç”¨åœ¨ä¸€äº›ä¸œè¥¿`å¯ä»¥ä¸å­˜åœ¨(null/undefined)`çš„åœ°æ–¹''</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä¾‹å¦‚ï¼Œå¦‚æœæ ¹æ®çš„ä»£ç é€»è¾‘ï¼Œuser å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œä½† address æ˜¯å¯é€‰çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è¿™æ ·å†™ user.address?.streetï¼Œè€Œä¸æ˜¯è¿™æ · user?.address?.street

- æ‰€ä»¥ï¼Œå¦‚æœ user æ°å·§å› ä¸ºå¤±è¯¯å˜ä¸º undefinedï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªç¼–ç¨‹é”™è¯¯å¹¶ä¿®å¤å®ƒã€‚å¦åˆ™ï¼Œä»£ç ä¸­çš„é”™è¯¯åœ¨ä¸æ°å½“çš„åœ°æ–¹è¢«æ¶ˆé™¤äº†ï¼Œè¿™ä¼šå¯¼è‡´è°ƒè¯•æ›´åŠ å›°éš¾</code></pre></div>
<p>ğŸš©<code class="language-text">çŸ­è·¯æ•ˆåº”</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœ ?. å·¦è¾¹éƒ¨åˆ†ä¸å­˜åœ¨ï¼Œå°±ä¼šç«‹å³åœæ­¢è¿ç®—ï¼ˆâ€œçŸ­è·¯æ•ˆåº”â€ï¼‰</code></pre></div>
<p>ğŸš© <code class="language-text">å…¶å®ƒå˜ä½“ï¼š?.()ï¼Œ?.[]</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¯é€‰é“¾ ?. ä¸æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œè€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ç»“æ„

- å®ƒè¿˜å¯ä»¥ä¸å‡½æ•°å’Œæ–¹æ‹¬å·ä¸€èµ·ä½¿ç”¨</code></pre></div>
<h2>Symbol</h2>
<p>ğŸš©Symbol å€¼è¡¨ç¤ºå”¯ä¸€çš„æ ‡è¯†ç¬¦</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// id1 id2 æ˜¯ symbol çš„ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡, æè¿°éƒ½ä¸º"id"</span>
<span class="token keyword">let</span> id1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> id2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æè¿°ç›¸åŒçš„ Symbol â€”â€” å®ƒä»¬ä¸ç›¸ç­‰</span>
<span class="token function">alert</span><span class="token punctuation">(</span>id1 <span class="token operator">==</span> id2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token function">alert</span><span class="token punctuation">(</span>id1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»å‹é”™è¯¯ï¼šæ— æ³•å°† Symbol å€¼è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</span>

<span class="token function">alert</span><span class="token punctuation">(</span>id1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€šè¿‡ toString æ˜¾ç¤ºè½¬åŒ–ï¼Œç°åœ¨å®ƒæœ‰æ•ˆäº†</span>

<span class="token function">alert</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æˆ–è€…è·å– symbol.description å±æ€§ï¼Œåªæ˜¾ç¤ºæè¿°ï¼ˆdescriptionï¼‰</span></code></pre></div>
<p>ğŸš©<code class="language-text">â€œéšè—â€å±æ€§</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ''Symbol å…è®¸åˆ›å»ºå¯¹è±¡çš„â€œéšè—â€å±æ€§

- ä»£ç çš„ä»»ä½•å…¶ä»–éƒ¨åˆ†éƒ½ä¸èƒ½æ„å¤–è®¿é—®æˆ–é‡å†™è¿™äº›å±æ€§''</code></pre></div>
<p>ä¾‹å¦‚ï¼ŒğŸ’¡â€å¦‚æœä½¿ç”¨çš„æ˜¯å±äºç¬¬ä¸‰æ–¹ä»£ç çš„ user å¯¹è±¡ï¼Œæˆ‘ä»¬æƒ³è¦ç»™å®ƒä»¬æ·»åŠ ä¸€äº›æ ‡è¯†ç¬¦â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å±äºå¦ä¸€ä¸ªä»£ç </span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨ Symbol("id") ä½œä¸ºé”®</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

user<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨ Symbol ä½œä¸ºé”®æ¥è®¿é—®æ•°æ®</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸ“Œ<code class="language-text">ä½¿ç”¨ Symbol("id") ä½œä¸ºé”®ï¼Œæ¯”èµ·ç”¨å­—ç¬¦ä¸² "id" æ¥æœ‰ä»€ä¹ˆå¥½å¤„å‘¢</code>ï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å› ä¸º user å¯¹è±¡å±äºå…¶ä»–çš„ä»£ç ï¼Œé‚£äº›ä»£ç ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸åº”è¯¥åœ¨å®ƒä¸Šé¢ç›´æ¥æ·»åŠ ä»»ä½•å­—æ®µï¼Œè¿™æ ·å¾ˆä¸å®‰å…¨

- ä½†æ˜¯æ·»åŠ çš„ Symbol å±æ€§ä¸ä¼šè¢«æ„å¤–è®¿é—®åˆ°ï¼Œ''ç¬¬ä¸‰æ–¹ä»£ç æ ¹æœ¬ä¸ä¼šçœ‹åˆ°å®ƒ''ï¼Œæ‰€ä»¥ä½¿ç”¨ Symbol åŸºæœ¬ä¸Šä¸ä¼šæœ‰é—®é¢˜

- å¦å¤–ï¼Œå‡è®¾å¦ä¸€ä¸ªè„šæœ¬å¸Œæœ›åœ¨ user ä¸­æœ‰è‡ªå·±çš„æ ‡è¯†ç¬¦ï¼Œä»¥å®ç°è‡ªå·±çš„ç›®çš„

- è¿™å¯èƒ½æ˜¯å¦ä¸€ä¸ª JavaScript åº“ï¼Œå› æ­¤è„šæœ¬ä¹‹é—´å®Œå…¨ä¸äº†è§£å½¼æ­¤

- ç„¶åè¯¥è„šæœ¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„ Symbol("id")</code></pre></div>
<p>åƒè¿™æ ·ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

user<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Their id value"</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æˆ‘ä»¬çš„æ ‡è¯†ç¬¦å’Œå®ƒä»¬çš„æ ‡è¯†ç¬¦ä¹‹é—´ä¸ä¼šæœ‰å†²çª

- å› ä¸º Symbol æ€»æ˜¯ä¸åŒçš„ï¼Œå³ä½¿å®ƒä»¬æœ‰ç›¸åŒçš„åå­—

- â€¦â€¦ä½†å¦‚æœæˆ‘ä»¬å¤„äºåŒæ ·çš„ç›®çš„ï¼Œä½¿ç”¨å­—ç¬¦ä¸² "id" è€Œä¸æ˜¯ç”¨ symbolï¼Œé‚£ä¹ˆ å°±ä¼š ''å‡ºç°å†²çª''</code></pre></div>
<p>ä¾‹å¦‚</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æˆ‘ä»¬çš„è„šæœ¬ä½¿ç”¨äº† "id" å±æ€§ã€‚</span>
user<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"Our id value"</span><span class="token punctuation">;</span>

<span class="token comment">// â€¦â€¦å¦ä¸€ä¸ªè„šæœ¬ä¹Ÿæƒ³å°† "id" ç”¨äºå®ƒçš„ç›®çš„â€¦â€¦</span>
user<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"Their id value"</span><span class="token punctuation">;</span>

<span class="token comment">// ç °ï¼æ— æ„ä¸­è¢«å¦ä¸€ä¸ªè„šæœ¬é‡å†™äº† idï¼</span></code></pre></div>
<p>ğŸš© <code class="language-text">è·³è¿‡</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''Symbol å±æ€§ä¸å‚ä¸ for..in å¾ªç¯''</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> user<span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name, age (no symbols)</span>

<span class="token comment">// ä½¿ç”¨ Symbol ä»»åŠ¡ç›´æ¥è®¿é—®</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Direct: "</span> <span class="token operator">+</span> user<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ''Object.keys(xxx)ä¹Ÿä¼šå¿½ç•¥'',â€œéšè—ç¬¦å·å±æ€§â€åŸåˆ™çš„ä¸€éƒ¨åˆ†

- ç›¸åï¼Œ''Object.assign ä¼šåŒæ—¶å¤åˆ¶å­—ç¬¦ä¸²å’Œ symbol å±æ€§''ï¼Œ

è¿™é‡Œå¹¶ä¸çŸ›ç›¾ï¼Œå°±æ˜¯è¿™æ ·è®¾è®¡çš„

- è¿™é‡Œçš„æƒ³æ³•æ˜¯å½“å…‹éš†æˆ–è€…åˆå¹¶ä¸€ä¸ª object æ—¶ï¼Œé€šå¸¸å¸Œæœ›'' æ‰€æœ‰ ''å±æ€§è¢«å¤åˆ¶ï¼ˆåŒ…æ‹¬åƒ id è¿™æ ·çš„ Symbolï¼‰</code></pre></div>
<p>ğŸš©<code class="language-text">å…¨å±€ symbol</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`æœ‰æ—¶æƒ³è¦åå­—ç›¸åŒçš„ Symbol å…·æœ‰ç›¸åŒçš„å®ä½“`</code></pre></div>
<p>ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†æƒ³è¦è®¿é—®çš„ Symbol â€œidâ€ æŒ‡çš„æ˜¯å®Œå…¨ç›¸åŒçš„å±æ€§ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª â€å…¨å±€ Symbol æ³¨å†Œè¡¨â€ã€‚</p>
<p>è¦ä»æ³¨å†Œè¡¨ä¸­è¯»å–ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰Symbolï¼Œè¯·ä½¿ç”¨ Symbol.for(key):</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä»å…¨å±€æ³¨å†Œè¡¨ä¸­è¯»å–</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœè¯¥ Symbol ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ</span>

<span class="token comment">// å†æ¬¡è¯»å–ï¼ˆå¯èƒ½æ˜¯åœ¨ä»£ç ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼‰</span>
<span class="token keyword">let</span> idAgain <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç›¸åŒçš„ Symbol</span>
<span class="token function">alert</span><span class="token punctuation">(</span>id <span class="token operator">===</span> idAgain<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<hr>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Symbol ä¸æ˜¯ 100% éšè—çš„

- å†…ç½®æ–¹æ³• Object.getOwnPropertySymbols(obj) å…è®¸è·å–æ‰€æœ‰çš„ Symbol

- è¿˜æœ‰ä¸€ä¸ªåä¸º Reflect.ownKeys(obj) çš„æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„ æ‰€æœ‰ é”®ï¼ŒåŒ…æ‹¬ Symbol</code></pre></div>
<p>æ‰€ä»¥å®ƒä»¬å¹¶ä¸æ˜¯çœŸæ­£çš„éšè—</p>
<h2>ä½¿ç”¨ä¸¤ä¸ªç‚¹æ¥è°ƒç”¨ä¸€ä¸ªæ–¹æ³•</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2n9c</span></code></pre></div>
<p>ğŸš© å¦‚æœæƒ³ç›´æ¥åœ¨ä¸€ä¸ªæ•°å­—ä¸Šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ toStringï¼Œé‚£ä¹ˆéœ€è¦åœ¨å®ƒåé¢æ”¾ç½®ä¸¤ä¸ªç‚¹ <code class="language-text">..</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœæ”¾ç½®ä¸€ä¸ªç‚¹ï¼š`123456.toString(36)`ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€ä¸ª errorï¼Œå› ä¸º JavaScript è¯­æ³•éšå«äº†ç¬¬ä¸€ä¸ªç‚¹ä¹‹åçš„éƒ¨åˆ†ä¸ºå°æ•°éƒ¨åˆ†

å¦‚æœå†æ”¾ä¸€ä¸ªç‚¹ï¼Œé‚£ä¹ˆ JavaScript å°±çŸ¥é“å°æ•°éƒ¨åˆ†ä¸ºç©ºï¼Œç°åœ¨ä½¿ç”¨è¯¥æ–¹æ³•

ä¹Ÿå¯ä»¥å†™æˆ `(123456).toString(36)`</code></pre></div>
<h2>ä¸ºä»€ä¹ˆ 0.1 + 0.2 ä¸ç­‰äº 0.3?</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">==</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.30000000000000004</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åœ¨åè¿›åˆ¶æ•°å­—ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä¿è¯ä»¥ 10 çš„æ•´æ•°æ¬¡å¹‚ä½œä¸ºé™¤æ•°èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ä»¥ 3 ä½œä¸ºé™¤æ•°åˆ™ä¸èƒ½(1/3 * 3 = 1 1/3 = 0.3333... æ— é™å¾ªç¯)

- ä¹Ÿæ˜¯åŒæ ·çš„åŸå› ï¼Œåœ¨äºŒè¿›åˆ¶æ•°å­—ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä¿è¯ä»¥ 2 çš„æ•´æ•°æ¬¡å¹‚ä½œä¸ºé™¤æ•°æ—¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½† 1/10 å°±å˜æˆäº†ä¸€ä¸ªæ— é™å¾ªç¯çš„äºŒè¿›åˆ¶å°æ•°

- ä½¿ç”¨äºŒè¿›åˆ¶æ•°å­—ç³»ç»Ÿæ— æ³• ç²¾ç¡® å­˜å‚¨ 0.1 æˆ– 0.2ï¼Œå°±åƒæ²¡æœ‰åŠæ³•å°†ä¸‰åˆ†ä¹‹ä¸€å­˜å‚¨ä¸ºåè¿›åˆ¶å°æ•°ä¸€æ ·

- IEEE-754 æ•°å­—æ ¼å¼é€šè¿‡å°†æ•°å­—èˆå…¥åˆ°æœ€æ¥è¿‘çš„å¯èƒ½æ•°å­—æ¥è§£å†³æ­¤é—®é¢˜,è¿™äº›èˆå…¥è§„åˆ™é€šå¸¸ä¸å…è®¸çœ‹åˆ°çš„â€œæå°çš„ç²¾åº¦æŸå¤±â€ï¼Œä½†æ˜¯å®ƒç¡®å®å­˜åœ¨ã€‚</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token operator">-</span> ä¸ä»…ä»…æ˜¯ JavaScript
è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¹Ÿå­˜åœ¨åŒæ ·çš„é—®é¢˜

<span class="token operator">-</span> <span class="token constant">PHP</span>ï¼ŒJavaï¼Œ<span class="token constant">C</span>ï¼ŒPerlï¼ŒRuby ç»™å‡ºçš„ä¹Ÿæ˜¯å®Œå…¨ç›¸åŒçš„ç»“æœï¼Œå› ä¸ºå®ƒä»¬åŸºäºçš„æ˜¯ç›¸åŒçš„æ•°å­—æ ¼å¼</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æœ‰æ—¶å€™æˆ‘ä»¬å¯ä»¥å°è¯•å®Œå…¨é¿å…å°æ•°

- ä¾‹å¦‚ï¼Œæ­£åœ¨åˆ›å»ºä¸€ä¸ªç”µå­è´­ç‰©ç½‘ç«™ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è§’è€Œä¸æ˜¯å…ƒæ¥å­˜å‚¨ä»·æ ¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¦æ‰“ 30% çš„æŠ˜æ‰£å‘¢ï¼Ÿ

- ''å®é™…ä¸Šï¼Œå®Œå…¨é¿å…å°æ•°å¤„ç†å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚åªéœ€è¦åœ¨å¿…è¦æ—¶å‰ªæ‰å…¶â€œå°¾å·´â€æ¥å¯¹å…¶è¿›è¡Œèˆå…¥å³å¯''</code></pre></div>
<h2>ä¸¤ä¸ªé›¶</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ•°å­—å†…éƒ¨è¡¨ç¤ºçš„å¦ä¸€ä¸ªæœ‰è¶£ç»“æœæ˜¯å­˜åœ¨ä¸¤ä¸ªé›¶ï¼š

- 0

- -0

è¿™æ˜¯å› ä¸ºåœ¨å­˜å‚¨æ—¶ï¼Œä½¿ç”¨ä¸€ä½æ¥å­˜å‚¨ç¬¦å·ï¼Œå› æ­¤å¯¹äºåŒ…æ‹¬é›¶åœ¨å†…çš„ä»»ä½•æ•°å­—ï¼Œå¯ä»¥è®¾ç½®è¿™ä¸€ä½æˆ–è€…ä¸è®¾ç½®

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§åŒºåˆ«å¹¶ä¸æ˜æ˜¾ï¼Œå› ä¸ºè¿ç®—ç¬¦å°†å®ƒä»¬è§†ä¸ºç›¸åŒçš„å€¼</code></pre></div>
<h2>isFinite å’Œ isNaN</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸¤ä¸ªç‰¹æ®Šçš„æ•°å€¼

- Infinityï¼ˆå’Œ -Infinityï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å€¼ï¼Œæ¯”ä»»ä½•æ•°å€¼éƒ½å¤§ï¼ˆå°ï¼‰

- NaN ä»£è¡¨ä¸€ä¸ª error</code></pre></div>
<p>ğŸš© <code class="language-text">isNaN</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">isNaN(value) å°†å…¶å‚æ•°è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åæµ‹è¯•å®ƒæ˜¯å¦ä¸º NaN</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä½†æ˜¯éœ€è¦è¿™ä¸ªå‡½æ•°å—ï¼Ÿä¸èƒ½åªä½¿ç”¨ `=== NaN` æ¯”è¾ƒå—ï¼Ÿ

- ä¸å¥½æ„æ€ï¼Œè¿™ä¸è¡Œ

- `å€¼ â€œNaNâ€ æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå®ƒä¸ç­‰äºä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«`</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre></div>
<p>ğŸš© <code class="language-text">isFinite</code>:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">isFinite(value) å°†å…¶å‚æ•°è½¬æ¢ä¸ºæ•°å­—ï¼Œå¦‚æœæ˜¯å¸¸è§„æ•°å­—ï¼Œåˆ™è¿”å› trueï¼Œè€Œä¸æ˜¯ NaN/Infinity/-Infinity</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span><span class="token string">"15"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span><span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// falseï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼šNaN</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// falseï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼šInfinity</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æœ‰æ—¶ isFinite è¢«ç”¨äºéªŒè¯å­—ç¬¦ä¸²å€¼æ˜¯å¦ä¸ºå¸¸è§„æ•°å­—</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token operator">+</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Enter a number"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç»“æœä¼šæ˜¯ trueï¼Œé™¤éä½ è¾“å…¥çš„æ˜¯ Infinityã€-Infinity æˆ–ä¸æ˜¯æ•°å­—</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Object.is</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…å»ºæ–¹æ³• Object.isï¼Œå®ƒç±»ä¼¼äº === ä¸€æ ·å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼Œä½†å®ƒå¯¹äº`ä¸¤ç§è¾¹ç¼˜æƒ…å†µ`æ›´å¯é ï¼š

* å®ƒé€‚ç”¨äº `NaN`ï¼š`Object.isï¼ˆNaNï¼ŒNaNï¼‰=== true`ï¼Œè¿™æ˜¯ä»¶å¥½äº‹ã€‚

* å€¼ `0` å’Œ `-0` æ˜¯ä¸åŒçš„ï¼š`Object.isï¼ˆ0ï¼Œ-0ï¼‰=== false`ï¼Œä»æŠ€æœ¯ä¸Šè®²è¿™æ˜¯å¯¹çš„ï¼Œå› ä¸ºåœ¨å†…éƒ¨ï¼Œæ•°å­—çš„ç¬¦å·ä½å¯èƒ½ä¼šä¸åŒï¼Œå³ä½¿å…¶ä»–æ‰€æœ‰ä½å‡ä¸ºé›¶ã€‚

- ''åœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼ŒObject.is(aï¼Œb) ä¸ a === b ç›¸åŒã€‚''</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è¿™ç§æ¯”è¾ƒæ–¹å¼ç»å¸¸è¢«ç”¨åœ¨ JavaScript è§„èŒƒä¸­

- å½“å†…éƒ¨ç®—æ³•éœ€è¦æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦å®Œå…¨ç›¸åŒæ—¶ï¼Œå®ƒä½¿ç”¨ Object.isï¼ˆå†…éƒ¨ç§°ä¸º SameValueï¼‰

- https://tc39.es/ecma262/#sec-samevalue</code></pre></div>
<h2>åœ¨æ‰€æœ‰æ•°å­—å‡½æ•°ä¸­ï¼Œç©ºå­—ç¬¦ä¸²æˆ–ä»…æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²å‡è¢«è§†ä¸º 0</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">isFinite</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isFinite</span><span class="token punctuation">(</span><span class="token string">"    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">"    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0</span>

<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">//0</span>
<span class="token operator">+</span><span class="token string">"    "</span><span class="token punctuation">;</span> <span class="token comment">//0</span></code></pre></div>
<h2>éšæœºæ•°</h2>
<p>ğŸš© ä» min åˆ° max çš„éšæœºæ•°</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å°†åŒºé—´ 0â€¦1 ä¸­çš„æ‰€æœ‰å€¼â€œæ˜ å°„â€ä¸ºèŒƒå›´åœ¨ min åˆ° max ä¸­çš„å€¼</span>
<span class="token comment">// 1.å°† 0â€¦1 çš„éšæœºæ•°ä¹˜ä»¥ max-minï¼Œåˆ™éšæœºæ•°çš„èŒƒå›´å°†ä» 0â€¦1 å¢åŠ åˆ° 0..max-min</span>
<span class="token comment">// 2.å°†éšæœºæ•°ä¸ min ç›¸åŠ ï¼Œåˆ™éšæœºæ•°çš„èŒƒå›´å°†ä¸º min åˆ° max</span>

<span class="token keyword">function</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> min <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© ä» min åˆ° max çš„éšæœºæ•´æ•°</p>
<p>ğŸ‘‰â€é”™è¯¯çš„æ–¹æ¡ˆâ€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> rand <span class="token operator">=</span> min <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>rand<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è·å¾—è¾¹ç¼˜å€¼ min å’Œ max çš„æ¦‚ç‡æ¯”å…¶ä»–å€¼â€ä½ä¸¤å€â€;ğŸ’¡ å› ä¸º Math.round() ä»èŒƒå›´ 1..3 ä¸­è·å¾—éšæœºæ•°ï¼Œå¹¶æŒ‰å¦‚ä¸‹æ‰€ç¤ºè¿›è¡Œå››èˆäº”å…¥ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">values from <span class="token number">1</span>    <span class="token operator">...</span> to <span class="token number">1.4999999999</span>  become <span class="token number">1</span>
values from <span class="token number">1.5</span>  <span class="token operator">...</span> to <span class="token number">2.4999999999</span>  become <span class="token number">2</span>
values from <span class="token number">2.5</span>  <span class="token operator">...</span> to <span class="token number">2.9999999999</span>  become <span class="token number">3</span></code></pre></div>
<p>ğŸ‘‰â€æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆâ€</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ–¹æ³•ä¸€ï¼šè°ƒæ•´å–å€¼èŒƒå›´çš„è¾¹ç•Œ</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//ä¸ºäº†ç¡®ä¿ç›¸åŒçš„å–å€¼èŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä» 0.5 åˆ° 3.5 çš„å€¼ï¼Œä»è€Œå°†æ‰€éœ€çš„æ¦‚ç‡æ·»åŠ åˆ°å–å€¼èŒƒå›´çš„è¾¹ç•Œ</span>

<span class="token keyword">function</span> <span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç°åœ¨èŒƒå›´æ˜¯ä»  (min-0.5) åˆ° (max+0.5)</span>
  <span class="token keyword">let</span> rand <span class="token operator">=</span> min <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>rand<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ–¹æ³•äºŒï¼šä½¿ç”¨ `Math.floor`</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// here rand is from min to (max+1)</span>
  <span class="token keyword">let</span> rand <span class="token operator">=</span> min <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>rand<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">randomInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é—´éš”éƒ½ä»¥è¿™ç§æ–¹å¼æ˜ å°„</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">values from <span class="token number">1</span>  <span class="token operator">...</span> to <span class="token number">1.9999999999</span>  become <span class="token number">1</span>
values from <span class="token number">2</span>  <span class="token operator">...</span> to <span class="token number">2.9999999999</span>  become <span class="token number">2</span>
values from <span class="token number">3</span>  <span class="token operator">...</span> to <span class="token number">3.9999999999</span>  become <span class="token number">3</span></code></pre></div>
<h2>Unicode è§„èŒƒåŒ–å½¢å¼</h2>
<p><a href="http://www.unicode.org/reports/tr15/">http://www.unicode.org/reports/tr15/</a></p>
<p><a href="http://www.unicode.org/">http://www.unicode.org/</a></p>
<h2>ä»£ç†å¯¹</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ‰€æœ‰å¸¸ç”¨çš„å­—ç¬¦éƒ½æ˜¯ä¸€ä¸ª 2 å­—èŠ‚çš„ä»£ç 

å¤§å¤šæ•°æ¬§æ´²è¯­è¨€ï¼Œæ•°å­—ç”šè‡³å¤§å¤šæ•°è±¡å½¢æ–‡å­—ä¸­çš„å­—æ¯éƒ½æœ‰ 2 å­—èŠ‚çš„è¡¨ç¤ºå½¢å¼

ä½† 2 å­—èŠ‚åªå…è®¸ 65536 ä¸ªç»„åˆï¼Œè¿™å¯¹äºè¡¨ç¤ºæ¯ä¸ªå¯èƒ½çš„ç¬¦å·æ˜¯ä¸å¤Ÿçš„

æ‰€ä»¥ç¨€æœ‰çš„ç¬¦å·è¢«ç§°ä¸ºâ€œ''ä»£ç†å¯¹''â€çš„ä¸€å¯¹ 2 å­—èŠ‚çš„ç¬¦å·ç¼–ç </code></pre></div>
<p>è¿™äº›ç¬¦å·çš„â€é•¿åº¦æ˜¯ 2â€ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ğ’³"</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2ï¼Œå¤§å†™æ•°å­¦ç¬¦å· X</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ğŸ˜‚"</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2ï¼Œç¬‘å“­è¡¨æƒ…</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ğ©·¶"</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2ï¼Œç½•è§çš„ä¸­å›½è±¡å½¢æ–‡å­—</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`String.fromCharCode` å’Œ `str.charCodeAt`

ä¸

`String.fromCodePoint` å’Œ `str.codePointAt`ï¼Œå·®ä¸å¤š


ä½†æ˜¯ä¸é€‚ç”¨äº''ä»£ç†å¯¹''</code></pre></div>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String</a></p>
<h2>JavaScript-Array</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''JavaScript ä¸­çš„æ•°ç»„

- æ—¢å¯ä»¥ç”¨ä½œé˜Ÿåˆ—ï¼Œ

- ä¹Ÿå¯ä»¥ç”¨ä½œæ ˆ''

''å…è®¸ä»é¦–ç«¯/æœ«ç«¯æ¥æ·»åŠ /åˆ é™¤å…ƒç´ ''

- è¿™åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå…è®¸è¿™æ ·çš„æ“ä½œçš„æ•°æ®ç»“æ„è¢«ç§°ä¸º åŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰

- https://en.wikipedia.org/wiki/Double-ended_queue</code></pre></div>
<h2>JavaScript-æ•°ç»„è¯¯ç”¨çš„å‡ ç§æ–¹å¼</h2>
<p>ğŸš© æ•°ç»„è¯¯ç”¨çš„å‡ ç§æ–¹å¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 1. æ·»åŠ ä¸€ä¸ªéæ•°å­—çš„å±æ€§ï¼Œæ¯”å¦‚ :</span>
arr<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token number">5</span>ã€‚


<span class="token comment">// 2. åˆ¶é€ ç©ºæ´ï¼Œæ¯”å¦‚ï¼šæ·»åŠ  arr[0]ï¼Œç„¶åæ·»åŠ  arr[1000] (å®ƒä»¬ä¸­é—´ä»€ä¹ˆéƒ½æ²¡æœ‰)ã€‚</span>

arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'first'</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'last'</span><span class="token punctuation">;</span>


<span class="token comment">// 3. ä»¥å€’åºå¡«å……æ•°ç»„ï¼Œæ¯”å¦‚ arr[1000]ï¼Œarr[999] ç­‰ç­‰ã€‚</span>

arr<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">999</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">999</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">JavaScriptä¸­æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šçš„ã€å¯¹è±¡ã€‘

- è¯·å°†æ•°ç»„è§†ä¸ºä½œç”¨äº ''æœ‰åºæ•°æ®'' çš„ç‰¹æ®Šç»“æ„

- ''æ•°ç»„åœ¨ JavaScript å¼•æ“å†…éƒ¨æ˜¯ç»è¿‡ç‰¹æ®Šè°ƒæ•´çš„ï¼Œä½¿å¾—æ›´å¥½åœ°ä½œç”¨äºè¿ç»­çš„æœ‰åºæ•°æ®ï¼Œæ‰€ä»¥è¯·ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨æ•°ç»„''

- å¦‚æœéœ€è¦ä»»æ„é”®å€¼ï¼Œé‚£å¾ˆæœ‰å¯èƒ½å®é™…ä¸Šéœ€è¦çš„æ˜¯å¸¸è§„å¯¹è±¡ {}</code></pre></div>
<h2>JavaScript - å…³äº Array çš„ â€œlengthâ€</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œå½“ä¿®æ”¹æ•°ç»„çš„æ—¶å€™ï¼Œlength å±æ€§ä¼šè‡ªåŠ¨æ›´æ–°</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fruits<span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Apple"</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>fruits<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 124</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œæ•°ç»„çš„length å±æ€§æ˜¯å¯å†™çš„</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å¦‚æœæ‰‹åŠ¨å¢åŠ å®ƒï¼Œåˆ™ä¸ä¼šå‘ç”Ÿä»»ä½•æœ‰è¶£çš„äº‹å„¿ã€‚ä½†æ˜¯å¦‚æœå‡å°‘å®ƒï¼Œæ•°ç»„å°±ä¼šè¢«æˆªæ–­ã€‚è¯¥è¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œä¸‹é¢æ˜¯ä¾‹å­ï¼š</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// æˆªæ–­åˆ°åªå‰© 2 ä¸ªå…ƒç´ </span>
<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>

arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// åˆæŠŠ length åŠ å›æ¥</span>
<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefinedï¼šè¢«æˆªæ–­çš„é‚£äº›æ•°å€¼å¹¶æ²¡æœ‰å›æ¥</span></code></pre></div>
<p>ğŸ“Œ æ‰€ä»¥ï¼Œâ€æ¸…ç©ºæ•°ç»„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ï¼š<code class="language-text">arr.length = 0</code>â€</p>
<h2>thisArg</h2>
<p>ğŸš©<code class="language-text">users.filter(user => army.canJoin(user))</code> æ›¿æ¢ä¸º<code class="language-text">users.filter(army.canJoin, army)</code>
çš„åŒºåˆ«ï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ç”¨ users.filter(user => army.canJoin(user)) æ›¿æ¢å¯¹ users.filter(army.canJoin, army) çš„è°ƒç”¨

- å‰è€…çš„ä½¿ç”¨é¢‘ç‡æ›´é«˜

- å› ä¸ºå¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼Œå®ƒæ›´å®¹æ˜“ç†è§£</code></pre></div>
<h2>æ˜¾å¼è°ƒç”¨è¿­ä»£å™¨</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>

<span class="token comment">// å’Œ for..of åšç›¸åŒçš„äº‹</span>
<span class="token comment">// for (let char of str) alert(char);</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> str<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¾“å‡ºå­—ç¬¦</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Symbol.iterator</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>å¸Œæœ› for..of è¿™æ ·è¿è¡Œï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token operator">...</span> num<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span></code></pre></div>
<p>æ³¨é‡Šçš„ range çš„å®Œæ•´å®ç°</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 1. for..of è°ƒç”¨é¦–å…ˆä¼šè°ƒç”¨è¿™ä¸ªï¼š</span>
range<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// â€¦â€¦å®ƒè¿”å›è¿­ä»£å™¨å¯¹è±¡ï¼ˆiterator objectï¼‰ï¼š</span>
  <span class="token comment">// 2. æ¥ä¸‹æ¥ï¼Œfor..of ä»…ä¸æ­¤è¿­ä»£å™¨ä¸€èµ·å·¥ä½œï¼Œè¦æ±‚å®ƒæä¾›ä¸‹ä¸€ä¸ªå€¼</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
    last<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>

    <span class="token comment">// 3. next() åœ¨ for..of çš„æ¯ä¸€è½®å¾ªç¯è¿­ä»£ä¸­è¢«è°ƒç”¨</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 4. å®ƒå°†ä¼šè¿”å› {done:.., value :...} æ ¼å¼çš„å¯¹è±¡</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç°åœ¨å®ƒå¯ä»¥è¿è¡Œäº†ï¼</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, ç„¶åæ˜¯ 2, 3, 4, 5</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš©â€æ³¨æ„å¯è¿­ä»£å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½ï¼š<code class="language-text">å…³æ³¨ç‚¹åˆ†ç¦»</code>â€</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- range è‡ªèº«æ²¡æœ‰ next() æ–¹æ³•

- ç›¸åï¼Œæ˜¯é€šè¿‡è°ƒç”¨ range[Symbol.iterator]() åˆ›å»ºäº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ‰€è°“çš„â€œè¿­ä»£å™¨â€å¯¹è±¡ï¼Œå¹¶ä¸”å®ƒçš„ next ä¼šä¸ºè¿­ä»£ç”Ÿæˆå€¼ã€‚</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''è¿­ä»£å™¨å¯¹è±¡å’Œä¸å…¶è¿›è¡Œè¿­ä»£çš„å¯¹è±¡æ˜¯åˆ†å¼€çš„''</code></pre></div>
<p>ğŸš© å¯è¿­ä»£å¯¹è±¡å¿…é¡»å®ç° <code class="language-text">Symbol.iterator</code> æ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* `obj[Symbol.iterator]()` çš„ç»“æœè¢«ç§°ä¸º `è¿­ä»£å™¨ï¼ˆiteratorï¼‰`ã€‚ç”±å®ƒå¤„ç†è¿›ä¸€æ­¥çš„è¿­ä»£è¿‡ç¨‹ã€‚

*ä¸€ä¸ªè¿­ä»£å™¨å¿…é¡»æœ‰ `next()` æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª `{done: Boolean, value: any}` å¯¹è±¡ï¼Œè¿™é‡Œ `done:true` è¡¨æ˜è¿­ä»£ç»“æŸï¼Œå¦åˆ™ value å°±æ˜¯ä¸‹ä¸€ä¸ªå€¼</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`Symbol.iterator `æ–¹æ³•ä¼šè¢« `for..of `è‡ªåŠ¨è°ƒç”¨

å†…ç½®çš„å¯è¿­ä»£å¯¹è±¡ä¾‹å¦‚å­—ç¬¦ä¸²å’Œæ•°ç»„ï¼Œéƒ½å®ç°äº† `Symbol.iterator`</code></pre></div>
<h2>å¯è¿­ä»£ï¼ˆiterableï¼‰å’Œç±»æ•°ç»„ï¼ˆarray-likeï¼‰</h2>
<p>ğŸš© å¯è¿­ä»£ï¼ˆiterableï¼‰å’Œç±»æ•°ç»„ï¼ˆarray-likeï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Iterable æ˜¯å®ç°äº† Symbol.iterator æ–¹æ³•çš„å¯¹è±¡</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Array-like æ˜¯æœ‰ç´¢å¼•å’Œ length å±æ€§çš„å¯¹è±¡ï¼ˆæ‰€ä»¥å®ƒä»¬çœ‹èµ·æ¥å¾ˆåƒæ•°ç»„ï¼‰</code></pre></div>
<p><code class="language-text">ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä¹Ÿè®¸ä¸æ˜¯ç±»æ•°ç»„å¯¹è±¡ã€‚åä¹‹äº¦ç„¶ï¼Œç±»æ•°ç»„å¯¹è±¡å¯èƒ½ä¸å¯è¿­ä»£</code></p>
<p>ğŸš© å¦‚æœæœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼Œå¹¶æƒ³åƒæ•°ç»„é‚£æ ·æ“ä½œå®ƒ?</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æœ‰ä¸€ä¸ªå…¨å±€æ–¹æ³• `Array.from` å¯ä»¥æ¥å—ä¸€ä¸ª`å¯è¿­ä»£æˆ–ç±»æ•°ç»„çš„å€¼`ï¼Œå¹¶ä»ä¸­è·å–ä¸€ä¸ªâ€œçœŸæ­£çš„â€æ•°ç»„

ç„¶åå°±å¯ä»¥å¯¹å…¶è°ƒç”¨æ•°ç»„æ–¹æ³•äº†

`Array.from(obj[, mapFn, thisArg])` å°†`å¯è¿­ä»£å¯¹è±¡`æˆ–`ç±»æ•°ç»„å¯¹è±¡` obj è½¬åŒ–ä¸º`çœŸæ­£çš„æ•°ç»„ Array`</code></pre></div>
<h2>Map å¯ä»¥ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å­˜å‚¨æ¯ä¸ªç”¨æˆ·çš„æ¥è®¿æ¬¡æ•°</span>
<span class="token keyword">let</span> visitsCountMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// john æ˜¯ Map ä¸­çš„é”®</span>
visitsCountMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>visitsCountMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ''ä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®æ˜¯ Map æœ€å€¼å¾—æ³¨æ„å’Œé‡è¦çš„åŠŸèƒ½ä¹‹ä¸€''

- å¯¹äºå­—ç¬¦ä¸²é”®ï¼ŒObjectï¼ˆæ™®é€šå¯¹è±¡ï¼‰ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä½†å¯¹äºå¯¹è±¡é”®åˆ™ä¸è¡Œ</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> visitsCountObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// å°è¯•ä½¿ç”¨å¯¹è±¡</span>

visitsCountObj<span class="token punctuation">[</span>john<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// å°è¯•å°† john å¯¹è±¡ä½œä¸ºé”®</span>

<span class="token comment">// æ˜¯å†™æˆäº†è¿™æ ·!</span>
<span class="token function">alert</span><span class="token punctuation">(</span>visitsCountObj<span class="token punctuation">[</span><span class="token string">"[object Object]"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>

<span class="token comment">// å› ä¸º `visitsCountObj` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¼šå°†æ‰€æœ‰çš„é”®å¦‚ john è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¾—åˆ°å­—ç¬¦ä¸²é”® `"[object Object]"`</span></code></pre></div>
<h2>Map æ˜¯æ€ä¹ˆæ¯”è¾ƒé”®çš„ï¼Ÿ</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* Map ä½¿ç”¨ SameValueZero ç®—æ³•æ¥æ¯”è¾ƒé”®æ˜¯å¦ç›¸ç­‰

* å®ƒå’Œä¸¥æ ¼ç­‰äº === å·®ä¸å¤šï¼Œä½†åŒºåˆ«æ˜¯

- NaN è¢«çœ‹æˆæ˜¯ç­‰äº NaNæ‰€ä»¥ NaN ä¹Ÿå¯ä»¥è¢«ç”¨ä½œé”®

- 0 ä¸ç­‰äº -0

è¿™ä¸ªç®—æ³•ä¸èƒ½è¢«æ”¹å˜æˆ–è€…è‡ªå®šä¹‰</code></pre></div>
<p><a href="https://tc39.github.io/ecma262/#sec-samevaluezero">https://tc39.github.io/ecma262/#sec-samevaluezero</a></p>
<h2>Map é“¾å¼è°ƒç”¨</h2>
<p>æ¯ä¸€æ¬¡ map.set è°ƒç”¨éƒ½ä¼šè¿”å› map æœ¬èº«ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œâ€œé“¾å¼â€è°ƒç”¨ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"str1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"num1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">"bool1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Map è¿­ä»£</h2>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œéå†æ‰€æœ‰çš„é”®</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">map<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> â€”â€” éå†å¹¶è¿”å›æ‰€æœ‰çš„é”®ï¼ˆreturns an iterable <span class="token keyword">for</span> keysï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œéå†æ‰€æœ‰çš„å€¼</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">map.values() â€”â€” éå†å¹¶è¿”å›æ‰€æœ‰çš„å€¼ï¼ˆreturns an iterable for valuesï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸‰ï¼Œéå†æ‰€æœ‰çš„å®ä½“</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> â€”â€” éå†å¹¶è¿”å›æ‰€æœ‰çš„å®ä½“ï¼ˆreturns an iterable <span class="token keyword">for</span> entriesï¼‰

<span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span>ï¼Œ<span class="token keyword">for</span><span class="token punctuation">.</span><span class="token punctuation">.</span>of åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ª</code></pre></div>
<h2>Map ä½¿ç”¨æ’å…¥é¡ºåº</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* è¿­ä»£çš„é¡ºåºä¸æ’å…¥å€¼çš„é¡ºåºç›¸åŒ

* ä¸æ™®é€šçš„ Object ä¸åŒï¼ŒMap ä¿ç•™äº†æ­¤é¡ºåº'</code></pre></div>
<h2>Map æœ‰å†…ç½®çš„ forEach æ–¹æ³•</h2>
<p>ä¸ Array ç±»ä¼¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> recipeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">"cucumber"</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">"tomatoes"</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">"onion"</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¹æ¯ä¸ªé”®å€¼å¯¹ (key, value) è¿è¡Œ forEach å‡½æ•°</span>
recipeMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key<span class="token punctuation">,</span> map</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cucumber: 500 etc</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Object.entriesï¼šä»å¯¹è±¡åˆ›å»º Map</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœæƒ³ä»ä¸€ä¸ªå·²æœ‰çš„æ™®é€šå¯¹è±¡ï¼ˆplain objectï¼‰æ¥åˆ›å»ºä¸€ä¸ª Map

é‚£ä¹ˆå¯ä»¥ä½¿ç”¨å†…å»ºæ–¹æ³• `Object.entries(obj)`

''è¯¥æ–¹æ³•è¿”å›å¯¹è±¡çš„é”®/å€¼å¯¹æ•°ç»„ï¼Œè¯¥æ•°ç»„æ ¼å¼å®Œå…¨æŒ‰ç…§ Map æ‰€éœ€çš„æ ¼å¼''</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* `Object.entries` è¿”å›`é”®/å€¼å¯¹æ•°ç»„ï¼š[ ["name","John"], ["age", 30] ]`

* è¿™å°±æ˜¯ Map æ‰€éœ€è¦çš„æ ¼å¼</code></pre></div>
<h2>Object.fromEntriesï¼šä» Map åˆ›å»ºå¯¹è±¡</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`Object.fromEntries` æ–¹æ³•çš„ä½œç”¨å’Œ`Object.entries(obj)`çš„ä½¿ç”¨æ˜¯ç›¸åçš„</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ç»™å®šä¸€ä¸ªå…·æœ‰ [key, value] é”®å€¼å¯¹çš„æ•°ç»„ï¼Œå®ƒä¼šæ ¹æ®ç»™å®šæ•°ç»„åˆ›å»ºä¸€ä¸ªå¯¹è±¡</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> prices <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">"meat"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç°åœ¨ prices = { banana: 1, orange: 2, meat: 4 }</span>

<span class="token function">alert</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>orange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></code></pre></div>
<h2>Set è¿­ä»£ï¼ˆiterationï¼‰</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¯ä»¥ä½¿ç”¨

- `for..of`

- æˆ– `forEach`

æ¥éå† `Set`</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œä½¿ç”¨  `for..of`</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"oranges"</span><span class="token punctuation">,</span> <span class="token string">"apples"</span><span class="token punctuation">,</span> <span class="token string">"bananas"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œä½¿ç”¨ `forEach` æ¥éå†</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"oranges"</span><span class="token punctuation">,</span> <span class="token string">"apples"</span><span class="token punctuation">,</span> <span class="token string">"bananas"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// äºæ•°ç»„ forEach ç±»ä¼¼ ï¼Œä¸  Map forEach ç›¸åŒï¼š</span>
set<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> valueAgain<span class="token punctuation">,</span> <span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">forEach çš„å›è°ƒå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š

- ä¸€ä¸ª value

- ç„¶åæ˜¯ åŒä¸€ä¸ªå€¼ valueAgain

- æœ€åæ˜¯ç›®æ ‡å¯¹è±¡

æ²¡é”™ï¼ŒåŒä¸€ä¸ªå€¼åœ¨å‚æ•°é‡Œå‡ºç°äº†ä¸¤æ¬¡

* ğŸ‘forEach çš„å›è°ƒå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ºäº†ä¸ Map å…¼å®¹ - åº•å±‚å®ç°æ˜¯ä¸€è‡´çš„</code></pre></div>
<p>ğŸš©Map ä¸­ç”¨äºè¿­ä»£çš„æ–¹æ³•åœ¨ Set ä¸­ä¹ŸåŒæ ·æ”¯æŒï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œ`set.keys()`</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">set.keys() â€”â€” éå†å¹¶è¿”å›æ‰€æœ‰çš„å€¼ï¼ˆreturns an iterable object for valuesï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œ`set.values()`</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">set.values() â€”â€” ä¸ set.keys() ä½œç”¨ç›¸åŒï¼Œè¿™æ˜¯ä¸ºäº†å…¼å®¹ Map</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸‰ï¼Œ`set.entries()`</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">set.entries() â€”â€” éå†å¹¶è¿”å›æ‰€æœ‰çš„å®ä½“ï¼ˆreturns an iterable object for entriesï¼‰[value, value]ï¼Œå®ƒçš„å­˜åœ¨ä¹Ÿæ˜¯ä¸ºäº†å…¼å®¹ Map</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`''Set å’Œ Map æ˜¯å…¼å®¹çš„''`</code></pre></div>
<h2>WeakMap å’Œ Map çš„åŒºåˆ«</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼ŒWeakMap çš„é”®å¿…é¡»æ˜¯å¯¹è±¡ï¼Œä¸èƒ½æ˜¯åŸå§‹å€¼</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> weakMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">"ok"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­£å¸¸å·¥ä½œï¼ˆä»¥å¯¹è±¡ä½œä¸ºé”®ï¼‰</span>

<span class="token comment">// ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºé”®</span>
weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">"Whoops"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Errorï¼Œå› ä¸º "test" ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œå¦‚æœåœ¨ WeakMap ä¸­ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ä½œä¸ºé”®ï¼Œå¹¶ä¸”æ²¡æœ‰å…¶ä»–å¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ â€”â€” è¯¥å¯¹è±¡å°†ä¼šè¢«ä»å†…å­˜ï¼ˆå’ŒMapï¼‰ä¸­''è‡ªåŠ¨æ¸…é™¤''</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> weakMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> <span class="token string">"..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è¦†ç›–å¼•ç”¨</span>

<span class="token comment">// john è¢«ä»å†…å­˜ä¸­åˆ é™¤äº†ï¼</span></code></pre></div>
<p>ğŸš©JavaScript å¼•æ“åœ¨å€¼å¯è®¿é—®ï¼ˆå¹¶å¯èƒ½è¢«ä½¿ç”¨ï¼‰æ—¶å°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è¯¥å¯¹è±¡èƒ½è¢«è®¿é—®ï¼Œjohn æ˜¯å®ƒçš„å¼•ç”¨</span>

<span class="token comment">// è¦†ç›–å¼•ç”¨</span>
john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// è¯¥å¯¹è±¡å°†ä¼šè¢«ä»å†…å­˜ä¸­æ¸…é™¤</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é€šå¸¸ï¼Œå½“å¯¹è±¡ã€æ•°ç»„è¿™ç±»æ•°æ®ç»“æ„åœ¨å†…å­˜ä¸­æ—¶ï¼Œå®ƒä»¬çš„å­å…ƒç´ ï¼Œå¦‚å¯¹è±¡çš„å±æ€§ã€æ•°ç»„çš„å…ƒç´ éƒ½æ˜¯å¯ä»¥è®¿é—®çš„</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¾‹å¦‚ï¼Œå¦‚æœæŠŠä¸€ä¸ªå¯¹è±¡æ”¾å…¥åˆ°æ•°ç»„ä¸­ï¼Œé‚£ä¹ˆåªè¦è¿™ä¸ªæ•°ç»„å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¹Ÿå°±å­˜åœ¨ï¼Œå³ä½¿æ²¡æœ‰å…¶ä»–å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨</code></pre></div>
<p>å°±åƒè¿™æ ·:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span>john<span class="token punctuation">]</span><span class="token punctuation">;</span>

john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è¦†ç›–å¼•ç”¨</span>

<span class="token comment">// å‰é¢ç”± john æ‰€å¼•ç”¨çš„é‚£ä¸ªå¯¹è±¡è¢«å­˜å‚¨åœ¨äº† array ä¸­</span>

<span class="token comment">// æ‰€ä»¥å®ƒä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ğŸ’¡ç±»ä¼¼çš„ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºå¸¸è§„ Map çš„é”®ï¼Œé‚£ä¹ˆå½“ Map å­˜åœ¨æ—¶ï¼Œè¯¥å¯¹è±¡ä¹Ÿå°†å­˜åœ¨ï¼›å®ƒä¼šå ç”¨å†…å­˜ï¼Œå¹¶ä¸”åº”è¯¥ä¸ä¼šè¢«ï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ï¼‰å›æ”¶</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> <span class="token string">"..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// è¦†ç›–å¼•ç”¨</span>

<span class="token comment">// john è¢«å­˜å‚¨åœ¨äº† map ä¸­ï¼Œ</span>
<span class="token comment">// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ map.keys() æ¥è·å–å®ƒ</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ğŸ‘WeakMap åœ¨è¿™æ–¹é¢æœ‰ç€æ ¹æœ¬ä¸Šçš„ä¸åŒï¼›å®ƒä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶æœºåˆ¶å¯¹ä½œä¸ºé”®çš„å¯¹è±¡ï¼ˆkey objectï¼‰çš„å›æ”¶</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸‰ï¼ŒWeakMap ä¸æ”¯æŒ''è¿­ä»£''ä»¥åŠ `keys()`ï¼Œ`values()` å’Œ `entries()` æ–¹æ³•;æ‰€ä»¥æ²¡æœ‰åŠæ³•è·å– WeakMap çš„æ‰€æœ‰é”®æˆ–å€¼</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">WeakMap åªæœ‰ä»¥ä¸‹çš„æ–¹æ³•ï¼š

<span class="token operator">-</span> weakMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

<span class="token operator">-</span> weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

<span class="token operator">-</span> weakMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

<span class="token operator">-</span> weakMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä»æŠ€æœ¯ä¸Šè®²ï¼ŒWeakMap çš„å½“å‰å…ƒç´ çš„æ•°é‡æ˜¯[æœªçŸ¥çš„]

- JavaScript å¼•æ“å¯èƒ½æ¸…ç†äº†å…¶ä¸­çš„åƒåœ¾

- å¯èƒ½æ²¡æ¸…ç†

- ä¹Ÿå¯èƒ½æ¸…ç†äº†ä¸€éƒ¨åˆ†

å› æ­¤ï¼Œæš‚ä¸æ”¯æŒè®¿é—® WeakMap çš„æ‰€æœ‰é”®/å€¼çš„æ–¹æ³•</code></pre></div>
<h2>WeakMap ä½¿ç”¨åœºæ™¯ï¼šé¢å¤–çš„æ•°æ®</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å‡å¦‚æ­£åœ¨å¤„ç†ä¸€ä¸ªâ€œå±äºâ€å¦ä¸€ä¸ªä»£ç çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œå¹¶æƒ³å­˜å‚¨ä¸€äº›ä¸ä¹‹ç›¸å…³çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®å°±åº”è¯¥ä¸è¿™ä¸ªå¯¹è±¡ã€å…±å­˜äº¡ã€‘

â€”â€” è¿™æ—¶å€™ WeakMap æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„åˆ©å™¨ğŸ‘


- å°†è¿™äº›æ•°æ®æ”¾åˆ° WeakMap ä¸­ï¼Œå¹¶ä½¿ç”¨è¯¥å¯¹è±¡ä½œä¸ºè¿™äº›æ•°æ®çš„é”®ï¼Œé‚£ä¹ˆå½“è¯¥å¯¹è±¡è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶åï¼Œè¿™äº›æ•°æ®ä¹Ÿä¼šè¢«è‡ªåŠ¨æ¸…é™¤</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">weakMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>john<span class="token punctuation">,</span> <span class="token string">"secret documents"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚æœ john æ¶ˆå¤±ï¼Œsecret documents å°†ä¼šè¢«è‡ªåŠ¨æ¸…é™¤</span></code></pre></div>
<p>ğŸš© ä¾‹å¦‚ï¼Œæœ‰ç”¨äºå¤„ç†ç”¨æˆ·è®¿é—®è®¡æ•°çš„ä»£ç </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ”¶é›†åˆ°çš„ä¿¡æ¯è¢«å­˜å‚¨åœ¨ map ä¸­ï¼š

- ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ä½œä¸ºé”®ï¼Œå…¶è®¿é—®æ¬¡æ•°ä¸ºå€¼

- å½“ä¸€ä¸ªç”¨æˆ·ç¦»å¼€æ—¶ï¼ˆè¯¥ç”¨æˆ·å¯¹è±¡å°†è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼‰ï¼Œè¿™æ—¶æˆ‘ä»¬å°±ä¸å†éœ€è¦ä»–çš„è®¿é—®æ¬¡æ•°äº†</code></pre></div>
<p>ä½¿ç”¨ Map çš„è®¡æ•°å‡½æ•°çš„ä¾‹å­:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ“ visitsCount.js</span>
<span class="token keyword">let</span> visitsCountMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// map: user => visits count</span>

<span class="token comment">// é€’å¢ç”¨æˆ·æ¥è®¿æ¬¡æ•°</span>
<span class="token keyword">function</span> <span class="token function">countUser</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> visitsCountMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  visitsCountMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** å…¶ä»–éƒ¨åˆ†çš„ä»£ç ï¼Œå¯èƒ½æ˜¯ä½¿ç”¨å®ƒçš„å…¶å®ƒä»£ç  **/</span>

<span class="token comment">// ğŸ“ main.js</span>
<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">countUser</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// count his visits</span>

<span class="token comment">// ä¸ä¹…ä¹‹åï¼Œjohn ç¦»å¼€äº†</span>
john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">/**

ç°åœ¨ john è¿™ä¸ªå¯¹è±¡åº”è¯¥è¢«åƒåœ¾å›æ”¶ï¼Œä½†ä»–ä»åœ¨å†…å­˜ä¸­ï¼Œå› ä¸ºå®ƒæ˜¯ visitsCountMap ä¸­çš„ä¸€ä¸ªé”®

å½“ç§»é™¤ç”¨æˆ·æ—¶ï¼Œéœ€è¦æ¸…ç† visitsCountMapï¼Œå¦åˆ™å®ƒå°†åœ¨å†…å­˜ä¸­æ— é™å¢å¤§ã€‚åœ¨å¤æ‚çš„æ¶æ„ä¸­ï¼Œè¿™ç§æ¸…ç†ä¼šæˆä¸ºä¸€é¡¹ç¹é‡çš„ä»»åŠ¡

**/</span></code></pre></div>
<p>ğŸ“Œ<code class="language-text">å¯ä»¥é€šè¿‡ä½¿ç”¨ WeakMap æ¥é¿å…è¿™æ ·çš„é—®é¢˜</code>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ“ visitsCount.js</span>
<span class="token keyword">let</span> visitsCountMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// weakmap: user => visits count</span>

<span class="token comment">// é€’å¢ç”¨æˆ·æ¥è®¿æ¬¡æ•°</span>
<span class="token keyword">function</span> <span class="token function">countUser</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> visitsCountMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  visitsCountMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 
ç°åœ¨ä¸éœ€è¦å»æ¸…ç† visitsCountMap äº†ã€‚å½“ john å¯¹è±¡å˜æˆä¸å¯è®¿é—®æ—¶ï¼Œå³ä¾¿å®ƒæ˜¯ WeakMap é‡Œçš„ä¸€ä¸ªé”®ï¼Œå®ƒä¹Ÿä¼šè¿åŒå®ƒä½œä¸º WeakMap é‡Œçš„é”®æ‰€å¯¹åº”çš„ä¿¡æ¯ä¸€åŒè¢«ä»å†…å­˜ä¸­åˆ é™¤
**/</span></code></pre></div>
<h2>WeakMap ä½¿ç”¨åœºæ™¯ï¼šç¼“å­˜</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å½“ä¸€ä¸ªå‡½æ•°çš„ç»“æœéœ€è¦è¢«è®°ä½ï¼ˆâ€œç¼“å­˜â€ï¼‰

è¿™æ ·åœ¨åç»­çš„å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„è°ƒç”¨æ—¶ï¼Œå°±å¯ä»¥é‡ç”¨è¿™ä¸ªè¢«ç¼“å­˜çš„ç»“æœ</code></pre></div>
<p>ğŸš© ä½¿ç”¨ Map æ¥å­˜å‚¨ç»“æœ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token operator">/</span> ğŸ“ cache<span class="token punctuation">.</span>js
<span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¡ç®—å¹¶è®°ä½ç»“æœ</span>
<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token comment">/* calculations of the result for */</span> obj<span class="token punctuation">;</span>

    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç°åœ¨æˆ‘ä»¬åœ¨å…¶å®ƒæ–‡ä»¶ä¸­ä½¿ç”¨ process()</span>

<span class="token comment">// ğŸ“ main.js</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token comment">/* å‡è®¾æˆ‘ä»¬æœ‰ä¸ªå¯¹è±¡ */</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—å®Œæˆ</span>

<span class="token comment">// â€¦â€¦ç¨åï¼Œæ¥è‡ªä»£ç çš„å¦å¤–ä¸€ä¸ªåœ°æ–¹â€¦â€¦</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–è‡ªç¼“å­˜çš„è¢«è®°å¿†çš„ç»“æœ</span>

<span class="token comment">// â€¦â€¦ç¨åï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡æ—¶ï¼š</span>
obj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1ï¼ˆå•Šï¼è¯¥å¯¹è±¡ä¾ç„¶åœ¨ cache ä¸­ï¼Œå¹¶å æ®ç€å†…å­˜ï¼ï¼‰</span>


<span class="token comment">/**
å¯¹äºå¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåªéœ€åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è®¡ç®—å‡ºç»“æœï¼Œä¹‹åçš„è°ƒç”¨å¯ä»¥ç›´æ¥ä» cache ä¸­è·å–ã€‚è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼Œå½“ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™éœ€è¦æ¸…ç† cache
**/</span></code></pre></div>
<p>ğŸ“Œ<code class="language-text">ç”¨ WeakMap æ›¿ä»£ Mapï¼Œè¿™ä¸ªé—®é¢˜ä¾¿ä¼šæ¶ˆå¤±ï¼šå½“å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œå¯¹åº”çš„ç¼“å­˜çš„ç»“æœä¹Ÿä¼šè¢«è‡ªåŠ¨åœ°ä»å†…å­˜ä¸­æ¸…é™¤</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ“ cache.js</span>
<span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è®¡ç®—å¹¶è®°ç»“æœ</span>
<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token comment">/* calculate the result for */</span> obj<span class="token punctuation">;</span>

    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ“ main.js</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/* some object */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">process</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// â€¦â€¦ç¨åï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡æ—¶ï¼š</span>
obj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// æ— æ³•è·å– cache.sizeï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ª WeakMapï¼Œ</span>
<span class="token comment">// è¦ä¹ˆæ˜¯ 0ï¼Œæˆ–å³å°†å˜ä¸º 0</span>
<span class="token comment">// å½“ obj è¢«åƒåœ¾å›æ”¶ï¼Œç¼“å­˜çš„æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤</span></code></pre></div>
<h2>WeakSet å’Œ Set çš„åŒºåˆ«</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œåªèƒ½å‘ WeakSet æ·»åŠ å¯¹è±¡ï¼ˆè€Œä¸èƒ½æ˜¯åŸå§‹å€¼ï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œå¯¹è±¡åªæœ‰åœ¨å…¶å®ƒæŸä¸ªï¼ˆäº›ï¼‰åœ°æ–¹èƒ½è¢«è®¿é—®çš„æ—¶å€™ï¼Œæ‰èƒ½ç•™åœ¨ set ä¸­</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸‰ï¼Œè·ŸWeakMapç±»ä¼¼ æ”¯æŒ `add`ï¼Œ`has` å’Œ `delete` æ–¹æ³•ï¼Œä½†ä¸æ”¯æŒ `size` å’Œ `keys()`ï¼Œå¹¶ä¸”ä¸å¯`è¿­ä»£`</code></pre></div>
<h2><em>.keys()ï¼Œ</em>.values()ï¼Œ*entries()</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> `*.keys()ï¼Œ*.values()ï¼Œ*entries()`  å¯¹äº `Array`  `Map` `Set`æ˜¯é€šç”¨çš„ï¼Œå¯¹äºæ™®é€šå¯¹è±¡æœ‰æ‰€ä¸åŒ</code></pre></div>
<p>| | <code class="language-text">Array</code>
<code class="language-text">Map</code>
<code class="language-text">Set</code> | <code class="language-text">Object</code> |
| --- | --- | --- |
| è°ƒç”¨è¯­æ³• | <code class="language-text">arr.keys()</code>
<code class="language-text">map.keys()</code>
<code class="language-text">set.keys()</code> | <code class="language-text">Object.keys(obj)</code>
ï¼Œè€Œä¸æ˜¯ <code class="language-text">obj.keys()</code> |
| è¿”å›å€¼ | å¯è¿­ä»£é¡¹ | â€â€œçœŸæ­£çš„â€æ•°ç»„â€ |</p>
<p>ğŸš© ä¸¤ä¸ªé‡è¦çš„åŒºåˆ«ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ï¼Œå¯¹äºå¯¹è±¡ä½¿ç”¨çš„è°ƒç”¨è¯­æ³•æ˜¯ `Object.keys(obj)`ï¼Œè€Œä¸æ˜¯ `obj.keys()`</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">ä¸»è¦åŸå› æ˜¯<span class="token string">''</span>çµæ´»æ€§<span class="token string">''</span>

<span class="token operator">-</span> <span class="token string">''</span>åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡æ˜¯æ‰€æœ‰å¤æ‚ç»“æ„çš„åŸºç¡€<span class="token string">''</span>

<span class="token operator">-</span> å› æ­¤ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªè‡ªå·±åˆ›å»ºçš„å¯¹è±¡ï¼Œæ¯”å¦‚ dataï¼Œå¹¶å®ç°äº†å®ƒè‡ªå·±çš„ data<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> æ–¹æ³•

<span class="token operator">-</span> åŒæ—¶ï¼Œä¾ç„¶å¯ä»¥å¯¹å®ƒè°ƒç”¨ Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> æ–¹æ³•</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">äºŒï¼Œ`Object.*` æ–¹æ³•è¿”å›çš„æ˜¯''â€œçœŸæ­£çš„â€æ•°ç»„''å¯¹è±¡ï¼Œè€Œä¸åªæ˜¯ä¸€ä¸ªå¯è¿­ä»£é¡¹</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">è¿™ä¸»è¦æ˜¯å†å²åŸå› <span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© ä¼šå¿½ç•¥ <code class="language-text">symbol</code> å±æ€§</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> `*.keys()ï¼Œ*.values()ï¼Œ*entries()`ä¼šå¿½ç•¥ `symbol` å±æ€§</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å°±åƒ `for..in` å¾ªç¯ä¸€æ ·ï¼Œè¿™äº›æ–¹æ³•ä¼šå¿½ç•¥ä½¿ç”¨ `Symbol(...)` ä½œä¸ºé”®çš„å±æ€§</code></pre></div>
<p>ğŸš© ä½†æ˜¯ï¼Œå¦‚æœä¹Ÿæƒ³è¦ Symbol ç±»å‹çš„é”®ï¼Œé‚£ä¹ˆè¿™å„¿æœ‰ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Object.getOwnPropertySymbols

- https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols

- å®ƒä¼šè¿”å›ä¸€ä¸ªåªåŒ…å« Symbol ç±»å‹çš„é”®çš„æ•°ç»„

å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³• Reflect.ownKeys(obj)

- https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys

- å®ƒä¼šè¿”å› æ‰€æœ‰ é”®</code></pre></div>
<h2>æ•°ç»„è§£æ„</h2>
<p>ğŸš© è§£æ„æ•°ç»„çš„å®Œæ•´è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>item1 <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span> item2<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> array</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ•°ç»„æ˜¯ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„''æœ‰åº''é›†åˆï¼Œ`å› æ­¤è§£æ„ç‰¹å¾å’Œæ•°æ®é¡ºåºç›¸å…³`</code></pre></div>
<p>ğŸš© ä¸€ï¼Œâ€œè§£æ„â€å¹¶ä¸æ„å‘³ç€â€œç ´åâ€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> surname<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Ilya Kantor"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿™ç§è¯­æ³•å«åšâ€œè§£æ„èµ‹å€¼â€ï¼Œå› ä¸ºå®ƒé€šè¿‡å°†ç»“æ„ä¸­çš„å„å…ƒç´ å¤åˆ¶åˆ°å˜é‡ä¸­æ¥è¾¾åˆ°â€œè§£æ„â€çš„ç›®çš„ã€‚ä½†æ•°ç»„æœ¬èº«æ˜¯æ²¡æœ‰è¢«ä¿®æ”¹çš„ã€‚</span>

<span class="token comment">// è¿™åªæ˜¯ä¸‹é¢è¿™äº›ä»£ç çš„æ›´ç²¾ç®€çš„å†™æ³•è€Œå·²ï¼š</span>

<span class="token comment">// let [firstName, surname] = arr;</span>
<span class="token keyword">let</span> firstName <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> surname <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© äºŒï¼Œå¿½ç•¥ä½¿ç”¨é€—å·çš„å…ƒç´ </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æ•°ç»„ä¸­ä¸æƒ³è¦çš„å…ƒç´ ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ é¢å¤–çš„é€—å·æ¥æŠŠå®ƒä¸¢å¼ƒ</span>

<span class="token comment">// ä¸éœ€è¦ç¬¬äºŒä¸ªå…ƒç´ </span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> <span class="token punctuation">,</span> title<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">"Julius"</span><span class="token punctuation">,</span>
  <span class="token string">"Caesar"</span><span class="token punctuation">,</span>
  <span class="token string">"Consul"</span><span class="token punctuation">,</span>
  <span class="token string">"of the Roman Republic"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Consul</span></code></pre></div>
<p>ğŸš© ä¸‰ï¼Œç­‰å·å³ä¾§å¯ä»¥æ˜¯ä»»ä½•å¯è¿­ä»£å¯¹è±¡</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span> <span class="token comment">// ["a", "b", "c"]</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© å››ï¼Œèµ‹å€¼ç»™ç­‰å·å·¦ä¾§çš„ä»»ä½•å†…å®¹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å¯ä»¥åœ¨ç­‰å·å·¦ä¾§ä½¿ç”¨ä»»ä½•â€œå¯ä»¥è¢«èµ‹å€¼çš„â€ä¸œè¥¿ã€‚</span>

<span class="token comment">// ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼š</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> user<span class="token punctuation">.</span>surname<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Ilya Kantor"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© äº”ï¼Œä¸ .entries() æ–¹æ³•è¿›è¡Œå¾ªç¯æ“ä½œ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å¾ªç¯éå†é”®â€”å€¼å¯¹</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name:John, then age:30</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å¯¹äº map å¯¹è±¡ä¹Ÿç±»ä¼¼ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token string">"30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name:John, then age:30</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© å…­ï¼Œäº¤æ¢å˜é‡çš„å…¸å‹æŠ€å·§</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> guest <span class="token operator">=</span> <span class="token string">"Jane"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> admin <span class="token operator">=</span> <span class="token string">"Pete"</span><span class="token punctuation">;</span>

<span class="token comment">// äº¤æ¢å€¼ï¼šè®© guest=Pete, admin=Jane</span>
<span class="token punctuation">[</span>guest<span class="token punctuation">,</span> admin<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>admin<span class="token punctuation">,</span> guest<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>guest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>admin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Pete Janeï¼ˆæˆåŠŸäº¤æ¢ï¼ï¼‰</span></code></pre></div>
<p>ğŸš© ä¸ƒï¼Œå‰©ä½™çš„ <code class="language-text">â€¦</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>name1<span class="token punctuation">,</span> name2<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">"Julius"</span><span class="token punctuation">,</span>
  <span class="token string">"Caesar"</span><span class="token punctuation">,</span>
  <span class="token string">"Consul"</span><span class="token punctuation">,</span>
  <span class="token string">"of the Roman Republic"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Julius</span>
<span class="token function">alert</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Caesar</span>

<span class="token comment">// è¯·æ³¨æ„ï¼Œ`rest` çš„ç±»å‹æ˜¯æ•°ç»„</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Consul</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rest<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// of the Roman Republic</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rest<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></code></pre></div>
<p>ğŸš© å…«ï¼Œé»˜è®¤å€¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> surname<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>firstName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token function">alert</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// é»˜è®¤å€¼</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>name <span class="token operator">=</span> <span class="token string">"Guest"</span><span class="token punctuation">,</span> surname <span class="token operator">=</span> <span class="token string">"Anonymous"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Julius"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Juliusï¼ˆæ¥è‡ªæ•°ç»„çš„å€¼ï¼‰</span>
<span class="token function">alert</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Anonymousï¼ˆé»˜è®¤å€¼è¢«ä½¿ç”¨äº†ï¼‰</span></code></pre></div>
<h2>å¯¹è±¡è§£æ„</h2>
<p>ğŸš© è§£æ„å¯¹è±¡çš„å®Œæ•´è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">{</span>prop <span class="token operator">:</span> varName <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">=</span> object</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¯¹è±¡æ˜¯''é€šè¿‡é”®æ¥å­˜å‚¨æ•°æ®é¡¹çš„å•ä¸ªå®ä½“''ï¼Œ`å› æ­¤ç»“æ„ç‰¹å¾å’Œé”®ç›¸å…³`</code></pre></div>
<p>ğŸš© ä¸€ï¼Œç­‰å·å·¦ä¾§åŒ…å«è¢«è§£æ„å¯¹è±¡ç›¸åº”å±æ€§çš„ä¸€ä¸ªâ€œæ¨¡å¼ï¼ˆpatternï¼‰â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œç­‰å·å·¦ä¾§çš„å°±æ˜¯ è¢«è§£æ„å¯¹è±¡ ä¸­çš„å˜é‡ååˆ—è¡¨</span>

<span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> options<span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Menu</span>
<span class="token function">alert</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
<span class="token function">alert</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span></code></pre></div>
<p>ğŸš© äºŒï¼Œå‰©ä½™æ¨¡å¼ï¼ˆpatternï¼‰<code class="language-text">â€¦</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// title = åä¸º title çš„å±æ€§</span>
<span class="token comment">// rest = å­˜æœ‰å‰©ä½™å±æ€§çš„å¯¹è±¡</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span> <span class="token operator">=</span> options<span class="token punctuation">;</span>

<span class="token comment">// ç°åœ¨ title="Menu", rest={height: 200, width: 100}</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rest<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rest<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span></code></pre></div>
<p>ğŸš© ä¸‰ï¼ŒåµŒå¥—è§£æ„</p>
<p>å¯ä»¥åœ¨ç­‰å·å·¦ä¾§ä½¿ç”¨æ›´å¤æ‚çš„æ¨¡å¼ï¼ˆpatternï¼‰æ¥æå–æ›´æ·±å±‚çš„æ•°æ®</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  size<span class="token operator">:</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Cake"</span><span class="token punctuation">,</span> <span class="token string">"Donut"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  extra<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ä¸ºäº†æ¸…æ™°èµ·è§ï¼Œè§£æ„èµ‹å€¼è¯­å¥è¢«å†™æˆå¤šè¡Œçš„å½¢å¼</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>
  size<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠŠ size èµ‹å€¼åˆ°è¿™é‡Œ</span>
    width<span class="token punctuation">,</span>
    height<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  items<span class="token operator">:</span> <span class="token punctuation">[</span>item1<span class="token punctuation">,</span> item2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æŠŠ items èµ‹å€¼åˆ°è¿™é‡Œ</span>
  title <span class="token operator">=</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span> <span class="token comment">// åœ¨å¯¹è±¡ä¸­ä¸å­˜åœ¨ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> options<span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Menu</span>
<span class="token function">alert</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
<span class="token function">alert</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
<span class="token function">alert</span><span class="token punctuation">(</span>item1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cake</span>
<span class="token function">alert</span><span class="token punctuation">(</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Donut</span></code></pre></div>
<p>ğŸš©â€å››ï¼Œæ™ºèƒ½å‡½æ•°å‚æ•°â€</p>
<p>æœ‰æ—¶ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½æœ‰å¾ˆå¤šå‚æ•°ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å®ç°è¿™ç§å‡½æ•°çš„ä¸€ä¸ªå¾ˆä¸å¥½çš„å†™æ³•</span>

<span class="token keyword">function</span> <span class="token function">showMenu</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Untitled"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç¼ºç‚¹ä¸€ï¼šå‚æ•°çš„é¡ºåº</span>

<span class="token comment">// ç¼ºç‚¹äºŒï¼šå¯è¯»æ€§ä¼šå˜å¾—å¾ˆå·®</span></code></pre></div>
<p>ğŸ“Œâ€å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå¯¹è±¡æ¥ä¼ é€’ï¼Œç„¶åå‡½æ•°é©¬ä¸ŠæŠŠè¿™ä¸ªå¯¹è±¡è§£æ„æˆå¤šä¸ªå˜é‡â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä¼ é€’ä¸€ä¸ªå¯¹è±¡ç»™å‡½æ•°</span>
<span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">"My menu"</span><span class="token punctuation">,</span>
  items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Item1"</span><span class="token punctuation">,</span> <span class="token string">"Item2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// â€¦â€¦ç„¶åå‡½æ•°é©¬ä¸ŠæŠŠå¯¹è±¡å±•å¼€æˆå˜é‡</span>
<span class="token keyword">function</span> <span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title <span class="token operator">=</span> <span class="token string">"Untitled"</span><span class="token punctuation">,</span>
  width <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span>
  height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
  items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// title, items â€“ æå–äº optionsï¼Œ</span>
  <span class="token comment">// width, height â€“ ä½¿ç”¨é»˜è®¤å€¼</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// My Menu 200 100</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Item1, Item2</span>
<span class="token punctuation">}</span>

<span class="token function">showMenu</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å¦‚æœæƒ³è®©æ‰€æœ‰çš„å‚æ•°éƒ½ä½¿ç”¨é»˜è®¤å€¼ï¼Œé‚£åº”è¯¥ä¼ é€’ä¸€ä¸ªç©ºå¯¹è±¡ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸é”™ï¼Œæ‰€æœ‰å€¼éƒ½å–é»˜è®¤å€¼</span>

<span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™æ ·ä¼šå¯¼è‡´é”™è¯¯</span></code></pre></div>
<p>ğŸ“Œ<code class="language-text">å¯ä»¥é€šè¿‡æŒ‡å®šç©ºå¯¹è±¡ {} ä¸ºæ•´ä¸ªå‚æ•°å¯¹è±¡çš„é»˜è®¤å€¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title <span class="token operator">=</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">200</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Menu 100 200</span></code></pre></div>
<p>ğŸš©â€äº”ï¼Œä¸ä½¿ç”¨ let æ—¶çš„é™·é˜±â€</p>
<p>ä»¥ä¸‹ä»£ç æ— æ³•æ­£å¸¸è¿è¡Œï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> title<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">;</span>

<span class="token comment">// è¿™ä¸€è¡Œå‘ç”Ÿäº†é”™è¯¯</span>
<span class="token punctuation">{</span>title<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>title<span class="token operator">:</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>â€é—®é¢˜åœ¨äº JavaScript æŠŠä¸»ä»£ç æµï¼ˆå³ä¸åœ¨å…¶ä»–è¡¨è¾¾å¼ä¸­ï¼‰çš„ <code class="language-text">{...}</code> å½“åšä¸€ä¸ªä»£ç å—ã€‚è¿™æ ·çš„ä»£ç å—å¯ä»¥ç”¨äºå¯¹è¯­å¥åˆ†ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šâ€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token comment">// ä¸€ä¸ªä»£ç å—</span>
  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>â€ä¸ºäº†å‘Šè¯‰ JavaScript è¿™ä¸æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå¯ä»¥æŠŠæ•´ä¸ªèµ‹å€¼è¡¨è¾¾å¼ç”¨æ‹¬å· <code class="language-text">(...)</code> åŒ…èµ·æ¥â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> title<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">;</span>

<span class="token comment">// ç°åœ¨å°±å¯ä»¥äº†</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Menu</span></code></pre></div>
<h2>æ—¥æœŸå’Œæ—¶é—´</h2>
<p><a href="https://zh.javascript.info/date">https://zh.javascript.info/date</a></p>
<h2>JSON æ–¹æ³•ï¼ŒtoJSON</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">JSON ï¼ˆJavaScript Object Notationï¼‰ æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼ˆè¡¨ç¤ºå€¼å’Œå¯¹è±¡çš„é€šç”¨æ ¼å¼ï¼‰ï¼Œå…·æœ‰è‡ªå·±çš„ç‹¬ç«‹æ ‡å‡†å’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€çš„åº“</code></pre></div>
<p>[[RFC 4627 æ ‡å‡†ä¸­æœ‰å¯¹å…¶çš„æè¿°|http://tools.ietf.org/html/rfc4627]]</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">JSON æ”¯æŒ

    - Objects { ... }

    - Arrays [ ... ]

    - Primitivesï¼š

        - strings

        - numbers

        - boolean (true/false)

        - null</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* JSON æ˜¯è¯­è¨€æ— å…³çš„çº¯æ•°æ®è§„èŒƒ

* å› æ­¤ä¸€äº›ç‰¹å®šäº JavaScript çš„å¯¹è±¡å±æ€§ä¼šè¢« JSON.stringify è·³è¿‡

    - å‡½æ•°å±æ€§ï¼ˆæ–¹æ³•ï¼‰

    - Symbol ç±»å‹çš„å±æ€§

    - å­˜å‚¨ undefined çš„å±æ€§</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''é‡è¦çš„é™åˆ¶ï¼šä¸å¾—æœ‰å¾ªç¯å¼•ç”¨''</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¢«å¿½ç•¥</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token comment">// è¢«å¿½ç•¥</span>
  something<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// è¢«å¿½ç•¥</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}ï¼ˆç©ºå¯¹è±¡ï¼‰</span></code></pre></div>
<p>ğŸš© å¦‚ä½•è§£å†³ï¼Ÿï¼ˆè‡ªå®šä¹‰è½¬æ¢ï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">JavaScript æä¾›åºåˆ—åŒ–ï¼ˆserializeï¼‰æˆ JSON çš„æ–¹æ³• JSON.stringify å’Œè§£æ JSON çš„æ–¹æ³• JSON.parse

è¿™ä¸¤ç§æ–¹æ³•éƒ½æ”¯æŒç”¨äºæ™ºèƒ½è¯»/å†™çš„è½¬æ¢å‡½æ•°</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">`JSON.stringify(student)` å¾—åˆ°çš„ json å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªè¢«ç§°ä¸º'' JSON ç¼–ç ï¼ˆJSON-encoded'' æˆ–  æˆ– ''å­—ç¬¦ä¸²åŒ–ï¼ˆstringifiedï¼‰'' æˆ– ''ç¼–ç»„åŒ–ï¼ˆmarshalledï¼‰'' çš„å¯¹è±¡''åºåˆ—åŒ–ï¼ˆserializedï¼‰''</code></pre></div>
<p>ğŸš©<code class="language-text">JSON.stringify</code> çš„å®Œæ•´è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span><span class="token punctuation">,</span> replacer<span class="token punctuation">,</span> space<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div>
<p>ğŸš©<code class="language-text">JSON.parse</code>çš„å®Œæ•´è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">let value = JSON.parse(str, [reviver]);</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰ toJSONï¼Œé‚£ä¹ˆå®ƒä¼šè¢« JSON.stringify è°ƒç”¨</code></pre></div>
<h2>Spread è¯­æ³•</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å…¶å® `ä»»ä½•å¯è¿­ä»£å¯¹è±¡éƒ½å¯ä»¥`</code></pre></div>
<p>ğŸš©Spread è¯­æ³•å†…éƒ¨ä½¿ç”¨äº†è¿­ä»£å™¨æ¥æ”¶é›†å…ƒç´ ï¼Œä¸ for..of çš„æ–¹å¼ç›¸åŒ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// H,e,l,l,o</span>

<span class="token comment">// å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œfor..of ä¼šé€ä¸ªè¿”å›è¯¥å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œ...str ä¹ŸåŒç†ä¼šå¾—åˆ° "H","e","l","l","o" è¿™æ ·çš„ç»“æœã€‚éšåï¼Œå­—ç¬¦åˆ—è¡¨è¢«ä¼ é€’ç»™æ•°ç»„åˆå§‹åŒ–å™¨ [...str]</span>

<span class="token comment">// è¿˜å¯ä»¥ä½¿ç”¨ Array.from æ¥å®ç°ï¼Œè¿è¡Œç»“æœä¸ [...str] ç›¸åŒ</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>

<span class="token comment">// Array.from å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„</span>
<span class="token function">alert</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// H,e,l,l,o</span></code></pre></div>
<p>ğŸš© ä¸è¿‡ Array.from(obj) å’Œ [â€¦obj] å­˜åœ¨ä¸€ä¸ªç»†å¾®çš„å·®åˆ«</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Array.from é€‚ç”¨äºç±»æ•°ç»„å¯¹è±¡ä¹Ÿé€‚ç”¨äºå¯è¿­ä»£å¯¹è±¡


- Spread è¯­æ³•åªé€‚ç”¨äºå¯è¿­ä»£å¯¹è±¡</code></pre></div>
<h2>Spread è¯­æ³• Array.from(obj) çš„å·®åˆ«</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Array<span class="token punctuation">.</span>from é€‚ç”¨äºç±»æ•°ç»„å¯¹è±¡ä¹Ÿé€‚ç”¨äºå¯è¿­ä»£å¯¹è±¡


Spread è¯­æ³•åªé€‚ç”¨äºå¯è¿­ä»£å¯¹è±¡</code></pre></div>
<h2>æ”¯æŒä¼ å…¥ä»»æ„æ•°é‡å‚æ•°çš„å†…å»ºå‡½æ•°</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Math.max(arg1, arg2, ..., argN) â€”â€” è¿”å›å…¥å‚ä¸­çš„æœ€å¤§å€¼


- Object.assign(dest, src1, ..., srcN) â€”â€” ä¾æ¬¡å°†å±æ€§ä» src1..N å¤åˆ¶åˆ° dest</code></pre></div>
<h2>closure</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é—­åŒ…æ˜¯æŒ‡ä½¿ç”¨ä¸€ä¸ª''ç‰¹æ®Šçš„å±æ€§'' ''[[Environment]]'' æ¥''è®°å½•å‡½æ•°è‡ªèº«çš„åˆ›å»ºæ—¶çš„ç¯å¢ƒ''çš„''å‡½æ•°''



- ''ç‰¹æ®Šçš„å±æ€§'' ''[[Environment]]''

- ''è®°å½•å‡½æ•°è‡ªèº«çš„åˆ›å»ºæ—¶çš„ç¯å¢ƒ''

- ''å‡½æ•°''</code></pre></div>
<p><a href="https://zh.javascript.info/closure">https://zh.javascript.info/closure</a></p>
<h2>IIFE(immediately-invoked function expressionsï¼ŒIIFEï¼‰</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»º IIFE çš„æ–¹æ³•</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Parentheses around the function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Parentheses around the whole thing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Bitwise NOT operator starts the expression"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Unary plus starts the expression"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Unary plus starts the expression"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>â€œnew Functionâ€</h2>
<p>ğŸš© è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> func <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">[</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span>argN<span class="token punctuation">]</span><span class="token punctuation">,</span> functionBody<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© åœºæ™¯ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä½¿ç”¨ new Function åˆ›å»ºå‡½æ•°çš„åº”ç”¨åœºæ™¯éå¸¸ç‰¹æ®Š


æ¯”å¦‚åœ¨å¤æ‚çš„ Web åº”ç”¨ç¨‹åºä¸­ï¼Œéœ€è¦ä»æœåŠ¡å™¨è·å–ä»£ç æˆ–è€…åŠ¨æ€åœ°ä»æ¨¡æ¿ç¼–è¯‘å‡½æ•°æ—¶æ‰ä¼šä½¿ç”¨</code></pre></div>
<p>ç‰¹æ®Šï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¦‚æœä½¿ç”¨ `new Function` åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„ [[Environment]] å¹¶ä¸æŒ‡å‘å½“å‰çš„è¯æ³•ç¯å¢ƒï¼Œè€Œæ˜¯æŒ‡å‘å…¨å±€ç¯å¢ƒ</code></pre></div>
<p>è¿™ä¸€ç‚¹åŒºåˆ«äº[[closure]]
,å› æ­¤ï¼Œâ€æ­¤ç±»å‡½æ•°æ— æ³•è®¿é—®å¤–éƒ¨ï¼ˆouterï¼‰å˜é‡ï¼Œåªèƒ½è®¿é—®å…¨å±€å˜é‡â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> func <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">"alert(value)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> func<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: value is not defined</span></code></pre></div>
<p>å¸¸è§„è¡Œä¸ºè¿›è¡Œæ¯”è¾ƒï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> func<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "test"ï¼Œä» getFunc çš„è¯æ³•ç¯å¢ƒä¸­è·å–çš„</span></code></pre></div>
<p>ğŸ“Œâ€è¿™ä¸€ç‚¹å®åœ¨å®é™…ä¸­å´éå¸¸å®ç”¨â€ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨å°† JavaScript å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨ å‹ç¼©ç¨‹åºï¼ˆminifierï¼‰ å¯¹å…¶è¿›è¡Œå‹ç¼©(åˆ é™¤å¤šä½™çš„æ³¨é‡Šå’Œç©ºæ ¼ç­‰å‹ç¼©ä»£ç  â€”â€” æ›´é‡è¦çš„æ˜¯ï¼Œå°†å±€éƒ¨å˜é‡å‘½åä¸ºè¾ƒçŸ­çš„å˜é‡)

å¦‚æœä½¿ new Function å¯ä»¥è®¿é—®è‡ªèº«å‡½æ•°ä»¥å¤–çš„å˜é‡ï¼Œå®ƒä¹Ÿå¾ˆæœ‰å¯èƒ½æ— æ³•æ‰¾åˆ°é‡å‘½åçš„ userNameï¼Œè¿™æ˜¯å› ä¸ºæ–°å‡½æ•°çš„åˆ›å»ºå‘ç”Ÿåœ¨ä»£ç å‹ç¼©ä»¥åï¼Œå˜é‡åå·²ç»è¢«æ›¿æ¢äº†</code></pre></div>
<h2>è°ƒåº¦ï¼šsetTimeout å’Œ setInterval</h2>
<p>ğŸš© è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token operator">|</span>code<span class="token punctuation">,</span> <span class="token punctuation">[</span>delay<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>func<span class="token operator">|</span>code<span class="token punctuation">,</span> <span class="token punctuation">[</span>delay<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span></code></pre></div>
<p>ğŸš© åƒåœ¾å›æ”¶å’Œ setInterval/setTimeout å›è°ƒï¼ˆcallbackï¼‰</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å½“ä¸€ä¸ªå‡½æ•°ä¼ å…¥ setInterval/setTimeout æ—¶ï¼Œå°†ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå†…éƒ¨å¼•ç”¨ï¼Œå¹¶ä¿å­˜åœ¨è°ƒåº¦ç¨‹åºä¸­ã€‚è¿™æ ·ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°æ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼Œä¹Ÿèƒ½é˜²æ­¢åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰å°†å…¶å›æ”¶</span>


<span class="token comment">// åœ¨è°ƒåº¦ç¨‹åºè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¹‹å‰ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// ä¸€ä¸ªå‰¯ä½œç”¨ï¼š</span>

<span class="token comment">// å¦‚æœå‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å˜é‡ï¼ˆè¯‘æ³¨ï¼šé—­åŒ…ï¼‰ï¼Œé‚£ä¹ˆåªè¦è¿™ä¸ªå‡½æ•°è¿˜å­˜åœ¨ï¼Œå¤–éƒ¨å˜é‡ä¹Ÿä¼šéšä¹‹å­˜åœ¨ã€‚å®ƒä»¬å¯èƒ½æ¯”å‡½æ•°æœ¬èº«å ç”¨æ›´å¤šçš„å†…å­˜</span>

<span class="token comment">// ğŸ’¡å› æ­¤ï¼Œå½“ä¸å†éœ€è¦è°ƒåº¦å‡½æ•°æ—¶ï¼Œæœ€å¥½é€šè¿‡''å®šæ—¶å™¨æ ‡è¯†ç¬¦ï¼ˆtimer identifierï¼‰'å–æ¶ˆå®ƒï¼Œå³ä½¿è¿™æ˜¯ä¸ªï¼ˆå ç”¨å†…å­˜ï¼‰å¾ˆå°çš„å‡½æ•°ã€‚</span></code></pre></div>
<p>ğŸš© åµŒå¥—çš„ setTimeout</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">åµŒå¥—çš„ setTimeout èƒ½å¤Ÿç²¾ç¡®åœ°è®¾ç½®ä¸¤æ¬¡æ‰§è¡Œä¹‹é—´çš„å»¶æ—¶ï¼Œè€Œ setInterval å´ä¸èƒ½</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// setInterval</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä½¿ç”¨ setInterval æ—¶ï¼Œfunc å‡½æ•°çš„å®é™…è°ƒç”¨é—´éš”è¦æ¯”ä»£ç ä¸­è®¾å®šçš„æ—¶é—´é—´éš”è¦çŸ­ï¼</span>
  <span class="token function">func</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º func çš„æ‰§è¡Œæ‰€èŠ±è´¹çš„æ—¶é—´â€œæ¶ˆè€—â€äº†ä¸€éƒ¨åˆ†é—´éš”æ—¶é—´</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//setTimeout</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">func</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>run<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© é›¶å»¶æ—¶å®é™…ä¸Šä¸ä¸ºé›¶ï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰</p>
<p>ç‰¹æ®Šçš„ç”¨æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">setTimeout(func)</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">setTimeout(func, 0)</code></pre></div>
<p>åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼ŒåµŒå¥—å®šæ—¶å™¨çš„è¿è¡Œé¢‘ç‡æ˜¯å—é™åˆ¶çš„ã€‚æ ¹æ® HTML5 æ ‡å‡† æ‰€è®²ï¼šâ€œâ€ç»è¿‡ 5 é‡åµŒå¥—å®šæ—¶å™¨ä¹‹åï¼Œæ—¶é—´é—´éš”è¢«å¼ºåˆ¶è®¾å®šä¸ºè‡³å°‘ 4 æ¯«ç§’â€â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> times <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  times<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¿å­˜å‰ä¸€ä¸ªè°ƒç”¨çš„å»¶æ—¶</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">&lt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 100 æ¯«ç§’ä¹‹åï¼Œæ˜¾ç¤ºå»¶æ—¶ä¿¡æ¯</span>
  <span class="token keyword">else</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>run<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦åˆ™é‡æ–°è°ƒåº¦</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å†å²é—ç•™ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è¿™ä¸ªé™åˆ¶æ¥è‡ªâ€œè¿œå¤æ—¶ä»£â€ï¼Œå¹¶ä¸”è®¸å¤šè„šæœ¬éƒ½ä¾èµ–äºæ­¤ï¼Œæ‰€ä»¥è¿™ä¸ªæœºåˆ¶ä¹Ÿå°±å­˜åœ¨è‡³ä»Š

å¯¹äºæœåŠ¡ç«¯çš„ JavaScriptï¼Œå°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œå¹¶ä¸”è¿˜æœ‰å…¶ä»–è°ƒåº¦å³æ—¶å¼‚æ­¥ä»»åŠ¡çš„æ–¹å¼ã€‚ä¾‹å¦‚ Node.js çš„ setImmediateã€‚å› æ­¤ï¼Œè¿™ä¸ªæé†’åªæ˜¯é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒçš„</code></pre></div>
<h2>å±æ€§æ ‡å¿—å’Œå±æ€§æè¿°ç¬¦</h2>
<p>ğŸš©<code class="language-text">å±æ€§æ ‡å¿—</code> ï¼šå¯¹è±¡ï¼ˆå­˜å‚¨å±æ€§ï¼ˆ<code class="language-text">properties</code>ï¼‰ï¼Œ é”®å€¼å¯¹ï¼‰è¿˜æœ‰ä¸‰ä¸ªç‰¹æ®Šçš„ç‰¹æ€§ï¼ˆ<code class="language-text">attributes</code>ï¼‰ï¼ˆé™¤äº†<code class="language-text">value</code>ï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- writable â€” å¦‚æœä¸º trueï¼Œåˆ™å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™å®ƒæ˜¯åªå¯è¯»çš„

- enumerable â€” å¦‚æœä¸º trueï¼Œåˆ™ä¼šè¢«åœ¨å¾ªç¯ä¸­åˆ—å‡ºï¼Œå¦åˆ™ä¸ä¼šè¢«åˆ—å‡º

- configurable â€” å¦‚æœä¸º trueï¼Œåˆ™æ­¤ç‰¹æ€§å¯ä»¥è¢«åˆ é™¤ï¼Œè¿™äº›å±æ€§ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¸å¯ä»¥</code></pre></div>
<p>ğŸš© æŸ¥è¯¢<code class="language-text">å±æ€§æè¿°ç¬¦å¯¹è±¡</code>ï¼ˆå±æ€§çš„å®Œæ•´ä¿¡æ¯ï¼‰ï¼Œä½¿ç”¨<code class="language-text">Object.getOwnPropertyDescriptor</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å±æ€§æè¿°ç¬¦å¯¹è±¡ï¼šå®ƒåŒ…å«å€¼å’Œæ‰€æœ‰çš„å±æ€§æ ‡å¿—</code></pre></div>
<p>è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* å±æ€§æè¿°ç¬¦ï¼š
{
  "value": "John",
  "writable": true,
  "enumerable": true,
  "configurable": true
}
*/</span></code></pre></div>
<p>ğŸš© ä¿®æ”¹<code class="language-text">å±æ€§æ ‡å¿—</code>ï¼Œä½¿ç”¨ <code class="language-text">Object.defineProperty</code></p>
<p>è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyName<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
  "value": "John",
  "writable": false,
  "enumerable": false,
  "configurable": false
}
 */</span></code></pre></div>
<p>ä¸å¯é…ç½®æ€§(<code class="language-text">configurable</code>)å¯¹ <code class="language-text">defineProperty</code> æ–½åŠ äº†ä¸€äº›é™åˆ¶:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä¸èƒ½ä¿®æ”¹ configurable æ ‡å¿—

- ä¸èƒ½ä¿®æ”¹ enumerable æ ‡å¿—

- ä¸èƒ½å°† writable: false ä¿®æ”¹ä¸º trueï¼ˆåè¿‡æ¥åˆ™å¯ä»¥ï¼‰

- ä¸èƒ½ä¿®æ”¹è®¿é—®è€…å±æ€§çš„ get/setï¼ˆä½†æ˜¯å¦‚æœæ²¡æœ‰å¯ä»¥åˆ†é…å®ƒä»¬ï¼‰</code></pre></div>
<p>â€â€œconfigurable: falseâ€ çš„ç”¨é€”æ˜¯é˜²æ­¢æ›´æ”¹å’Œåˆ é™¤å±æ€§æ ‡å¿—ï¼Œä½†æ˜¯å…è®¸æ›´æ”¹å¯¹è±¡çš„å€¼â€</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Pete"</span><span class="token punctuation">;</span> <span class="token comment">// æ­£å¸¸å·¥ä½œ</span>
<span class="token keyword">delete</span> user<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// Error</span></code></pre></div>
<p>ğŸš© å¤šä¸ªå±æ€§æ¥å£ <code class="language-text">Object.defineProperties</code>å’Œ<code class="language-text">Object.getOwnPropertyDescriptors</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ä¸€èµ·ä½¿ç”¨å¯ä»¥ç”¨ä½œå…‹éš†å¯¹è±¡çš„æ ‡å¿—å±æ€§</span>

<span class="token keyword">let</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å’Œ<code class="language-text">for..in</code>çš„åŒºåˆ«ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- for..in ä¼šå¿½ç•¥ symbol ç±»å‹çš„å±æ€§

- Object.getOwnPropertyDescriptors è¿”å›åŒ…å« symbol ç±»å‹çš„å±æ€§åœ¨å†…çš„ æ‰€æœ‰ å±æ€§æè¿°ç¬¦</code></pre></div>
<p>ğŸš© å±æ€§æè¿°ç¬¦åœ¨â€å•ä¸ªå±æ€§â€çš„çº§åˆ«ä¸Šå·¥ä½œï¼Œè¿˜æœ‰ä¸€äº›é™åˆ¶è®¿é—® â€æ•´ä¸ªå¯¹è±¡â€çš„æ–¹æ³•</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token operator">-</span> Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token operator">-</span> Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token operator">-</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token operator">...</span></code></pre></div>
<h2>å±æ€§çš„ getter å’Œ setter</h2>
<p>ğŸš© ä¸¤ç§ç§ç±»å‹çš„å¯¹è±¡å±æ€§:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æ•°æ®å±æ€§

- è®¿é—®å™¨å±æ€§ï¼ˆaccessor propertiesï¼‰: æœ¬è´¨ä¸Šæ˜¯ç”¨äºè·å–å’Œè®¾ç½®å€¼çš„å‡½æ•°ï¼Œä½†ä»å¤–éƒ¨ä»£ç æ¥çœ‹å°±åƒå¸¸è§„å±æ€§</code></pre></div>
<p>ğŸš© è®¿é—®å™¨å±æ€§ç”± â€œgetterâ€ å’Œ â€œsetterâ€ æ–¹æ³•è¡¨ç¤ºï¼Œåœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œå®ƒä»¬ç”¨ get å’Œ set è¡¨ç¤º</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä»å¤–è¡¨çœ‹ï¼Œè®¿é—®å™¨å±æ€§çœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ™®é€šå±æ€§

- è¿™å°±æ˜¯è®¿é—®å™¨å±æ€§çš„è®¾è®¡æ€æƒ³ï¼šä¸ä»¥å‡½æ•°çš„æ–¹å¼è°ƒç”¨ï¼Œobj.xxxæ­£å¸¸è¯»å– ï¼ˆgetter åœ¨å¹•åè¿è¡Œï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">propName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“è¯»å– obj.propName æ—¶ï¼Œgetter èµ·ä½œç”¨</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">set</span> <span class="token function">propName</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“æ‰§è¡Œ obj.propName = value æ“ä½œæ—¶ï¼Œsetter èµ·ä½œç”¨</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© è®¿é—®å™¨å±æ€§çš„æè¿°ç¬¦ä¸æ•°æ®å±æ€§çš„ä¸åŒ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">å¯¹äºè®¿é—®å™¨å±æ€§

<span class="token operator">-</span> æ²¡æœ‰ value å’Œ writable

<span class="token operator">-</span> <span class="token keyword">get</span> ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å‡½æ•°ï¼Œåœ¨è¯»å–å±æ€§æ—¶å·¥ä½œ

<span class="token operator">-</span> <span class="token keyword">set</span> å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œåœ¨è®¾ç½®å±æ€§æ—¶å·¥ä½œ

<span class="token operator">-</span> enumerable â€”â€” ä¸æ•°æ®å±æ€§çš„ç›¸åŒ

<span class="token operator">-</span> configurable â€”â€” ä¸æ•°æ®å±æ€§çš„ç›¸åŒ</code></pre></div>
<p>ğŸš© ä¸€ä¸ªå±æ€§è¦ä¹ˆæ˜¯è®¿é—®å™¨ï¼ˆå…·æœ‰ get/set æ–¹æ³•ï¼‰ï¼Œè¦ä¹ˆæ˜¯æ•°æ®å±æ€§ï¼ˆå…·æœ‰ valueï¼‰ï¼Œä½†ä¸èƒ½ä¸¤è€…éƒ½æ˜¯</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åœ¨åŒä¸€ä¸ªæè¿°ç¬¦ä¸­åŒæ—¶æä¾› get å’Œ valueï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯</span>

<span class="token comment">// Error: Invalid property descriptor.</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"prop"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© è®¿é—®å™¨çš„ä¸€å¤§ç”¨é€”</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å…è®¸éšæ—¶é€šè¿‡ä½¿ç”¨ getter å’Œ setter ã€æ›¿æ¢ã€â€œæ­£å¸¸çš„â€æ•°æ®å±æ€§ï¼Œæ¥æ§åˆ¶å’Œè°ƒæ•´è¿™äº›å±æ€§çš„è¡Œä¸º</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å§‹ä½¿ç”¨æ•°æ®å±æ€§ name å’Œ age æ¥å®ç° user å¯¹è±¡</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>

<span class="token comment">// ...</span>

<span class="token comment">// â€¦â€¦ä½†è¿Ÿæ—©ï¼Œæƒ…å†µå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–,å¯èƒ½ä¼šå†³å®šå­˜å‚¨ birthdayï¼Œè€Œä¸æ˜¯ ageï¼Œå› ä¸ºå®ƒæ›´ç²¾ç¡®ï¼Œæ›´æ–¹ä¾¿</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> birthday</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1992</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token comment">// ğŸ’¡ç°åœ¨åº”è¯¥å¦‚ä½•å¤„ç†ä»ä½¿ç”¨ age å±æ€§çš„æ—§ä»£ç å‘¢ï¼Ÿ</span>

<span class="token comment">// å¯ä»¥å°è¯•æ‰¾åˆ°æ‰€æœ‰è¿™äº›åœ°æ–¹å¹¶ä¿®æ”¹å®ƒä»¬ï¼Œä½†è¿™ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´</span>

<span class="token comment">// è€Œä¸”å¦‚æœå…¶ä»–å¾ˆå¤šäººéƒ½åœ¨ä½¿ç”¨è¯¥ä»£ç ï¼Œé‚£ä¹ˆå¯èƒ½å¾ˆéš¾å®Œæˆæ‰€æœ‰ä¿®æ”¹</span>

<span class="token comment">// ...</span>

<span class="token comment">// ä¸º age æ·»åŠ ä¸€ä¸ª getter æ¥è§£å†³è¿™ä¸ªé—®é¢˜</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> birthday</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>

  <span class="token comment">// å¹´é¾„æ˜¯æ ¹æ®å½“å‰æ—¥æœŸå’Œç”Ÿæ—¥è®¡ç®—å¾—å‡ºçš„</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> todayYear <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> todayYear <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>birthday<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1992</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// birthday æ˜¯å¯è®¿é—®çš„</span>
<span class="token function">alert</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â€¦â€¦age ä¹Ÿæ˜¯å¯è®¿é—®çš„</span></code></pre></div>
<h2>åŸå‹ç»§æ‰¿ï¼ˆPrototypal inheritanceï¼‰</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åŸå‹ç»§æ‰¿ æ˜¯JavaScriptè¯­è¨€ç‰¹æ€§ä¹‹ä¸€  èƒ½ å®ç° ã€ä»£ç é‡ç”¨ã€‘</code></pre></div>
<p>ğŸš©<code class="language-text">[[Prototype]]</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* åœ¨ JavaScript ä¸­ï¼Œã€å¯¹è±¡ã€‘æœ‰ä¸€ä¸ªç‰¹æ®Šçš„éšè—å±æ€§ [[Prototype]]ï¼ˆå¦‚è§„èŒƒä¸­æ‰€å‘½åçš„ï¼‰

  -  [[Prototype]]è¦ä¹ˆä¸º null

  -  [[Prototype]]è¦ä¹ˆå°±æ˜¯å¯¹ã€å¦ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‘ï¼ˆè¯¥å¯¹è±¡è¢«ç§°ä¸ºâ€œåŸå‹â€ï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å½“ä» object ä¸­è¯»å–ä¸€ä¸ªç¼ºå¤±çš„å±æ€§æ—¶ï¼ŒJavaScript ä¼šè‡ªåŠ¨ä»åŸå‹ä¸­è·å–è¯¥å±æ€§

- åœ¨ç¼–ç¨‹ä¸­ï¼Œè¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºâ€œåŸå‹ç»§æ‰¿â€</code></pre></div>
<p>ğŸš©<code class="language-text">__proto__</code> Â  å’Œ Â <code class="language-text">[[Prototype]]</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å±æ€§ [[Prototype]] æ˜¯å†…éƒ¨çš„è€Œä¸”æ˜¯éšè—çš„ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šè®¾ç½®å®ƒçš„æ–¹å¼ï¼ˆå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨ç‰¹æ®Šçš„åå­— __proto__ï¼‰


- å¼•ç”¨ä¸èƒ½å½¢æˆé—­ç¯ã€‚å¦‚æœè¯•å›¾åœ¨ä¸€ä¸ªé—­ç¯ä¸­åˆ†é… __proto__ï¼ŒJavaScript ä¼šæŠ›å‡ºé”™è¯¯


- __proto__ ä¸å†…éƒ¨çš„ [[Prototype]] ä¸ä¸€æ ·ï¼š__proto__ æ˜¯ [[Prototype]] çš„ getter/setter

- ç°ä»£ç¼–ç¨‹è¯­è¨€å»ºè®®ä½¿ç”¨å‡½æ•° Object.getPrototypeOf/Object.setPrototypeOf æ¥å–ä»£ __proto__ å» get/set åŸå‹


- æ ¹æ®è§„èŒƒï¼Œ__proto__ å¿…é¡»ä»…å—æµè§ˆå™¨ç¯å¢ƒçš„æ”¯æŒã€‚ä½†å®é™…ä¸Šï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯åœ¨å†…çš„æ‰€æœ‰ç¯å¢ƒéƒ½æ”¯æŒå®ƒ</code></pre></div>
<p>ğŸš©<code class="language-text">for..in</code>å¾ªç¯</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* for..in å¾ªç¯ä¹Ÿä¼šè¿­ä»£ç»§æ‰¿çš„å±æ€§


* å‡ ä¹æ‰€æœ‰å…¶ä»–é”®/å€¼è·å–æ–¹æ³•éƒ½å¿½ç•¥ç»§æ‰¿çš„å±æ€§ã€‚ä¾‹å¦‚ Object.keys å’Œ Object.values ç­‰</code></pre></div>
<h2>F.prototype</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* JavaScriptä¸­å¯ä»¥ä½¿ç”¨è¯¸å¦‚ new F() è¿™æ ·çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡

- å¦‚æœ F.prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ new æ“ä½œç¬¦ä¼šä½¿ç”¨å®ƒä¸ºæ–°å¯¹è±¡è®¾ç½® [[Prototype]]</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ³¨æ„ï¼šè¿™é‡Œçš„ F.prototype æŒ‡çš„æ˜¯ F çš„ä¸€ä¸ªåä¸º "prototype" çš„å¸¸è§„å±æ€§</code></pre></div>
<p>ä¾‹å¦‚ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  eats<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Rabbit</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è®¾ç½® Rabbit.prototype = animal çš„å­—é¢æ„æ€æ˜¯ï¼šâ€œå½“åˆ›å»ºäº†ä¸€ä¸ª new Rabbit æ—¶ï¼ŒæŠŠå®ƒçš„ [[Prototype]] èµ‹å€¼ä¸º animalâ€</span>

<span class="token class-name">Rabbit</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> animal<span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token string">"White Rabbit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  rabbit.__proto__ == animal</span>

<span class="token function">alert</span><span class="token punctuation">(</span>rabbit<span class="token punctuation">.</span>eats<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<p>ğŸš©F.prototype ä»…ç”¨åœ¨ new F æ—¶</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* F.prototype å±æ€§ä»…åœ¨ new F è¢«è°ƒç”¨æ—¶ä½¿ç”¨ï¼Œå®ƒä¸ºæ–°å¯¹è±¡çš„ [[Prototype]] èµ‹å€¼


- å¦‚æœåœ¨åˆ›å»ºä¹‹åï¼ŒF.prototype å±æ€§æœ‰äº†å˜åŒ–ï¼ˆF.prototype = &lt;another object>ï¼‰ï¼Œé‚£ä¹ˆé€šè¿‡ new F åˆ›å»ºçš„æ–°å¯¹è±¡ä¹Ÿå°†éšä¹‹æ‹¥æœ‰æ–°çš„å¯¹è±¡ä½œä¸º [[Prototype]]ï¼Œä½†å·²ç»å­˜åœ¨çš„å¯¹è±¡å°†ä¿æŒæ—§æœ‰çš„å€¼</code></pre></div>
<p>ğŸš© æ¯ä¸ªã€å‡½æ•°ã€‘éƒ½æœ‰ â€œprototypeâ€ å±æ€§ï¼Œå³ä½¿æ²¡æœ‰æä¾›å®ƒ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é»˜è®¤çš„ "prototype" æ˜¯ä¸€ä¸ªåªæœ‰å±æ€§ constructor çš„å¯¹è±¡ï¼Œå±æ€§ constructor æŒ‡å‘å‡½æ•°è‡ªèº«</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Rabbit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// by default:</span>
<span class="token comment">// Rabbit.prototype = { constructor: Rabbit }</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Rabbit</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Rabbit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å¯ä»¥ä½¿ç”¨ constructor å±æ€§æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨ä¸ç°æœ‰å¯¹è±¡ç›¸åŒçš„æ„é€ å™¨

- å½“æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸çŸ¥é“å®ƒä½¿ç”¨äº†å“ªä¸ªæ„é€ å™¨ï¼ˆä¾‹å¦‚å®ƒæ¥è‡ªç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œå¹¶ä¸”éœ€è¦åˆ›å»ºå¦ä¸€ä¸ªç±»ä¼¼çš„å¯¹è±¡æ—¶ï¼Œç”¨è¿™ç§æ–¹æ³•å°±å¾ˆæ–¹ä¾¿</code></pre></div>
<p>ä¾‹å¦‚</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Rabbit</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token string">"White Rabbit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">rabbit<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token string">"Black Rabbit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* F.prototype çš„å€¼è¦ä¹ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¦ä¹ˆå°±æ˜¯ nullï¼šå…¶ä»–å€¼éƒ½ä¸èµ·ä½œç”¨

- "prototype" å±æ€§ä»…åœ¨è®¾ç½®äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆconstructor functionï¼‰ï¼Œå¹¶é€šè¿‡ new è°ƒç”¨æ—¶ï¼Œæ‰å…·æœ‰è¿™ç§ç‰¹æ®Šçš„å½±å“</code></pre></div>
<p>ä¾‹å¦‚</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åœ¨å¸¸è§„å¯¹è±¡ä¸Šï¼Œprototype æ²¡ä»€ä¹ˆç‰¹åˆ«çš„</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  prototype<span class="token operator">:</span> <span class="token string">"Bla-bla"</span><span class="token punctuation">,</span> <span class="token comment">// è¿™é‡Œåªæ˜¯æ™®é€šçš„å±æ€§</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* é»˜è®¤æƒ…å†µä¸‹ï¼Œã€æ‰€æœ‰å‡½æ•°ã€‘éƒ½æœ‰ F.prototype = {constructorï¼šF}

- æ‰€ä»¥å¯ä»¥é€šè¿‡è®¿é—®å®ƒçš„ "constructor" å±æ€§æ¥è·å–ä¸€ä¸ªå¯¹è±¡çš„æ„é€ å™¨</code></pre></div>
<h2>åŸç”Ÿçš„åŸå‹</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* æ‰€æœ‰çš„å†…å»ºå¯¹è±¡éƒ½éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼ˆpatternï¼‰

  - æ–¹æ³•éƒ½å­˜å‚¨åœ¨ prototype ä¸­ï¼ˆArray.prototypeã€Object.prototypeã€Date.prototype ç­‰ï¼‰

  - å¯¹è±¡æœ¬èº«åªå­˜å‚¨æ•°æ®ï¼ˆæ•°ç»„å…ƒç´ ã€å¯¹è±¡å±æ€§ã€æ—¥æœŸï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* åŸå§‹æ•°æ®ç±»å‹ä¹Ÿå°†æ–¹æ³•å­˜å‚¨åœ¨åŒ…è£…å™¨å¯¹è±¡çš„ prototype ä¸­ï¼šNumber.prototypeã€String.prototype å’Œ Boolean.prototype


* åªæœ‰ undefined å’Œ null æ²¡æœ‰åŒ…è£…å™¨å¯¹è±¡</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å†…å»ºåŸå‹å¯ä»¥è¢«ä¿®æ”¹æˆ–è¢«ç”¨æ–°çš„æ–¹æ³•å¡«å……

  - ä½†æ˜¯ä¸å»ºè®®æ›´æ”¹å®ƒä»¬

  - å”¯ä¸€å…è®¸çš„æƒ…å†µå¯èƒ½æ˜¯ï¼Œå½“æ·»åŠ ä¸€ä¸ªè¿˜æ²¡æœ‰è¢« JavaScript å¼•æ“æ”¯æŒï¼Œä½†å·²ç»è¢«åŠ å…¥ JavaScript è§„èŒƒçš„æ–°æ ‡å‡†æ—¶ï¼Œæ‰å¯èƒ½å…è®¸è¿™æ ·åš</code></pre></div>
<h2>åŸå‹ç®€å²</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æœ‰å¤šå°‘ç§å¤„ç† [[Prototype]] çš„æ–¹å¼ï¼Œç­”æ¡ˆæ˜¯æœ‰å¾ˆå¤šï¼

- å¾ˆå¤šç§æ–¹æ³•åšçš„éƒ½æ˜¯åŒä¸€ä»¶äº‹å„¿ï¼</code></pre></div>
<p>ğŸš© ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿè¿™æ˜¯å†å²åŸå› ï¼</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* æ„é€ å‡½æ•°çš„ "prototype" å±æ€§è‡ªå¤ä»¥æ¥å°±èµ·ä½œç”¨


* ä¹‹åï¼Œåœ¨ 2012 å¹´ï¼ŒObject.create å‡ºç°åœ¨æ ‡å‡†ä¸­

  - å®ƒæä¾›äº†ä½¿ç”¨ç»™å®šåŸå‹åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›

  - ä½†æ²¡æœ‰æä¾› get/set å®ƒçš„èƒ½åŠ›

  - å› æ­¤ï¼Œè®¸å¤šæµè§ˆå™¨å‚å•†å®ç°äº†éæ ‡å‡†çš„ __proto__ è®¿é—®å™¨ï¼Œè¯¥è®¿é—®å™¨å…è®¸ç”¨æˆ·éšæ—¶ get/set åŸå‹


* ä¹‹åï¼Œåœ¨ 2015 å¹´ï¼ŒObject.setPrototypeOf å’Œ Object.getPrototypeOf è¢«åŠ å…¥åˆ°æ ‡å‡†ä¸­

  - æ‰§è¡Œä¸ __proto__ ç›¸åŒçš„åŠŸèƒ½

  - ç”±äº __proto__ å®é™…ä¸Šå·²ç»åœ¨æ‰€æœ‰åœ°æ–¹éƒ½å¾—åˆ°äº†å®ç°ï¼Œä½†å®ƒå·²è¿‡æ—¶ï¼Œæ‰€ä»¥è¢«åŠ å…¥åˆ°è¯¥æ ‡å‡†çš„é™„ä»¶ B ä¸­ï¼Œå³ï¼šåœ¨éæµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œå®ƒçš„æ”¯æŒæ˜¯å¯é€‰çš„</code></pre></div>
<p>ğŸš© ä¸ºä»€ä¹ˆå°† <strong>proto</strong> æ›¿æ¢æˆå‡½æ•° getPrototypeOf/setPrototypeOfï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">__proto__ æ˜¯ [[Prototype]] çš„ getter/setterï¼Œå°±åƒå…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œã€å®ƒä½äº Object.prototypeã€‘</code></pre></div>
<p>ğŸš© å¦‚æœé€Ÿåº¦å¾ˆé‡è¦ï¼Œå°±è¯·ä¸è¦ä¿®æ”¹å·²å­˜åœ¨çš„å¯¹è±¡çš„ [[Prototype]]</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä»æŠ€æœ¯ä¸Šæ¥è®²ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™ get/set [[Prototype]]ã€‚ä½†æ˜¯é€šå¸¸åªåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™è®¾ç½®å®ƒä¸€æ¬¡ï¼Œè‡ªé‚£ä¹‹åä¸å†ä¿®æ”¹

- å¹¶ä¸”ï¼ŒJavaScript å¼•æ“å¯¹æ­¤è¿›è¡Œäº†é«˜åº¦ä¼˜åŒ–ã€‚ç”¨ Object.setPrototypeOf æˆ– obj.__proto__= â€œå³æ—¶â€æ›´æ”¹åŸå‹æ˜¯ä¸€ä¸ªéå¸¸ç¼“æ…¢çš„æ“ä½œï¼Œå› ä¸ºå®ƒç ´åäº†å¯¹è±¡å±æ€§è®¿é—®æ“ä½œçš„å†…éƒ¨ä¼˜åŒ–

- å› æ­¤ï¼Œé™¤éä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œæˆ–è€… JavaScript çš„æ‰§è¡Œé€Ÿåº¦å¯¹ä½ æ¥è¯´å®Œå…¨ä¸é‡è¦ï¼Œå¦åˆ™è¯·é¿å…ä½¿ç”¨å®ƒ</code></pre></div>
<p>ğŸš©Object.create(null)</p>
<p>è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">,</span> <span class="token punctuation">[</span>descriptors<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ©ç”¨ç»™å®šçš„ proto ä½œä¸º [[Prototype]]ï¼ˆå¯ä»¥æ˜¯ nullï¼‰å’Œå¯é€‰çš„å±æ€§æè¿°æ¥åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é€šè¿‡ Object.create(null) æ¥åˆ›å»ºæ²¡æœ‰åŸå‹çš„å¯¹è±¡ã€‚è¿™æ ·çš„å¯¹è±¡è¢«ç”¨ä½œ â€œpure dictionariesâ€ / â€œvery plainâ€ å¯¹è±¡</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* å¦‚æœè¦å°†ä¸€ä¸ªç”¨æˆ·ç”Ÿæˆçš„é”®æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå†…å»ºçš„ __proto__ getter/setter æ˜¯ä¸å®‰å…¨çš„

  - å› ä¸ºç”¨æˆ·å¯èƒ½ä¼šè¾“å…¥ "__proto__" ä½œä¸ºé”®ï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ª errorï¼Œè™½ç„¶å¸Œæœ›è¿™ä¸ªé—®é¢˜ä¸ä¼šé€ æˆä»€ä¹ˆå¤§å½±å“ï¼Œä½†é€šå¸¸ä¼šé€ æˆä¸å¯é¢„æ–™çš„åæœ

  - å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ Object.create(null) åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ __proto__ çš„ â€œvery plainâ€ å¯¹è±¡

  - æˆ–è€…å¯¹æ­¤ç±»åœºæ™¯åšæŒä½¿ç”¨ Map å¯¹è±¡</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æ­¤å¤–ï¼ŒObject.create æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥æµ…æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æè¿°ç¬¦</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span>
  Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Class åŸºæœ¬è¯­æ³•</h2>
<p>ğŸš© åŸºæœ¬çš„ç±»è¯­æ³•çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>

  prop <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token comment">// å±æ€§ï¼› class å­—æ®µ prop ä¼šåœ¨åœ¨æ¯ä¸ªç‹¬ç«‹å¯¹è±¡ä¸­è¢«è®¾å¥½ï¼Œè€Œä¸æ˜¯è®¾åœ¨ Myclass.prototype</span>

  <span class="token function-variable function">prop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// å±æ€§ï¼› class å­—æ®µ prop æ›´ä¼˜é›…çš„ç»‘å®šæ–¹æ³•</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ„é€ å™¨</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">method</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// method</span>

  <span class="token keyword">get</span> <span class="token function">something</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// getter æ–¹æ³•</span>
  <span class="token keyword">set</span> <span class="token function">something</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// setter æ–¹æ³•</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// æœ‰è®¡ç®—åç§°ï¼ˆcomputed nameï¼‰çš„æ–¹æ³•ï¼ˆæ­¤å¤„ä¸º symbolï¼‰</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- MyClass æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæä¾›ä½œä¸º constructor çš„é‚£ä¸ªï¼‰

- methodsã€getters å’Œ settors éƒ½è¢«å†™å…¥äº† MyClass.prototype

- prop  æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä»½</code></pre></div>
<p>ğŸš© ä»€ä¹ˆæ˜¯ classï¼Ÿ<code class="language-text">åœ¨ JavaScript ä¸­ï¼Œç±»æ˜¯ä¸€ç§å‡½æ•°</code></p>
<p>å¾ˆå¥½çš„è¯ é‡Šï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// class æ˜¯ä¸€ä¸ªå‡½æ•°</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> User<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function</span>

<span class="token comment">// ...æˆ–è€…ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œæ˜¯ constructor æ–¹æ³•</span>
<span class="token function">alert</span><span class="token punctuation">(</span>User <span class="token operator">===</span> <span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// æ–¹æ³•åœ¨ User.prototype ä¸­ï¼Œä¾‹å¦‚ï¼š</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sayHi<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// alert(this.name);</span>

<span class="token comment">// åœ¨åŸå‹ä¸­å®é™…ä¸Šæœ‰ä¸¤ä¸ªæ–¹æ³•</span>
<span class="token function">alert</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// constructor, sayHi</span></code></pre></div>
<p>ğŸš©class ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–!</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">1. é€šè¿‡ class åˆ›å»ºçš„å‡½æ•°å…·æœ‰ç‰¹æ®Šçš„å†…éƒ¨å±æ€§æ ‡è®° [[IsClassConstructor]]: trueï¼›ç¼–ç¨‹è¯­è¨€ä¼šåœ¨è®¸å¤šåœ°æ–¹æ£€æŸ¥è¯¥å±æ€§</code></pre></div>
<p>ä¾‹å¦‚</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// class å¿…é¡»ä½¿ç”¨ new æ¥è°ƒç”¨</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> User<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function</span>

<span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Class constructor User cannot be invoked without 'new'</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">2.å¤§å¤šæ•° JavaScript å¼•æ“ä¸­çš„ç±»æ„é€ å™¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼éƒ½ä»¥ â€œclassâ€¦â€ å¼€å¤´</code></pre></div>
<p>js ä¸­</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class User { ... }</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">3.ç±»æ–¹æ³•ä¸å¯æšä¸¾; ç±»å®šä¹‰å°† "prototype" ä¸­çš„æ‰€æœ‰æ–¹æ³•çš„ enumerable æ ‡å¿—è®¾ç½®ä¸º false</code></pre></div>
<p>å¦‚æœå¯¹ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ for..in æ–¹æ³•ï¼Œé€šå¸¸ä¸å¸Œæœ› ç”¨ class æ–¹æ³•å‡ºç°</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">4 ç±»æ€»æ˜¯ä½¿ç”¨ use strictã€‚ åœ¨ç±»æ„é€ ä¸­çš„æ‰€æœ‰ä»£ç éƒ½å°†è‡ªåŠ¨è¿›å…¥ä¸¥æ ¼æ¨¡å¼</code></pre></div>
<p>ğŸš© ç±»è¡¨è¾¾å¼</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åƒå‡½æ•°ä¸€æ ·ï¼Œç±»å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªè¡¨è¾¾å¼ä¸­è¢«å®šä¹‰ï¼Œè¢«ä¼ é€’ï¼Œè¢«è¿”å›ï¼Œè¢«èµ‹å€¼ç­‰</code></pre></div>
<p>åŒ¿åç±»è¡¨è¾¾å¼(ç±»ä¼¼åŒ¿åå‡½æ•°ï¼‰ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> User <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>â€œå‘½åç±»è¡¨è¾¾å¼ï¼ˆNamed Class Expressionï¼‰â€ï¼ˆç±»ä¼¼äºå‘½åå‡½æ•°è¡¨è¾¾å¼ï¼ˆNamed Function Expressionsï¼‰ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// â€œå‘½åç±»è¡¨è¾¾å¼ï¼ˆNamed Class Expressionï¼‰â€</span>
<span class="token comment">// (è§„èŒƒä¸­æ²¡æœ‰è¿™æ ·çš„æœ¯è¯­ï¼Œä½†æ˜¯å®ƒå’Œå‘½åå‡½æ•°è¡¨è¾¾å¼ç±»ä¼¼)</span>
<span class="token keyword">let</span> User <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// MyClass è¿™ä¸ªåå­—ä»…åœ¨ç±»å†…éƒ¨å¯è§</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­£å¸¸è¿è¡Œï¼Œæ˜¾ç¤º MyClass ä¸­å®šä¹‰çš„å†…å®¹</span>

<span class="token function">alert</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// errorï¼ŒMyClass åœ¨å¤–éƒ¨ä¸å¯è§ï¼›åå­—ä»…åœ¨ç±»å†…éƒ¨å¯è§</span></code></pre></div>
<h2>ç±»ç»§æ‰¿</h2>
<p>ğŸš© æ‰©å±•ä¸€ä¸ªç±»ï¼š<code class="language-text">class Child extends Parent</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* åœ¨å†…éƒ¨ï¼Œå…³é”®å­— extends ä½¿ç”¨äº†å¾ˆå¥½çš„æ—§çš„åŸå‹æœºåˆ¶è¿›è¡Œå·¥ä½œ

- å®ƒå°† Child.prototype.[[Prototype]] è®¾ç½®ä¸º Parent.prototype</code></pre></div>
<p>åœ¨ extends åå…è®¸ä»»æ„è¡¨è¾¾å¼:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">phrase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>phrase<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello</span>

<span class="token comment">// è¿™å¯¹äºé«˜çº§ç¼–ç¨‹æ¨¡å¼ï¼Œä¾‹å¦‚å½“æ ¹æ®è®¸å¤šæ¡ä»¶ä½¿ç”¨å‡½æ•°ç”Ÿæˆç±»ï¼Œå¹¶ç»§æ‰¿å®ƒä»¬æ—¶æ¥è¯´å¯èƒ½å¾ˆæœ‰ç”¨</span></code></pre></div>
<p>ğŸš© é‡å†™ä¸€ä¸ªæ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æœªåœ¨ class child ä¸­æŒ‡å®šçš„æ–¹æ³•å‡ä» class Parent ä¸­ç›´æ¥è·å–


- æœ‰æ—¶ä¸å¸Œæœ›å®Œå…¨æ›¿æ¢çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨çˆ¶ç±»æ–¹æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œè°ƒæ•´æˆ–æ‰©å±•å…¶åŠŸèƒ½</code></pre></div>
<p>Class ä¸ºæ­¤æä¾›äº† â€œsuperâ€ å…³é”®å­—:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æ‰§è¡Œ super.method(...) æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»æ–¹æ³•

- æ‰§è¡Œ super(...) æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±» constructorï¼ˆåªèƒ½åœ¨å­ç±»çš„ constructor ä¸­ï¼‰</code></pre></div>
<p>è¡¥å……ï¼š</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ç®­å¤´å‡½æ•°æ²¡æœ‰ super å’Œ this</code></pre></div>
<p>ğŸš© é‡å†™ä¸€ä¸ª constructor</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">æ ¹æ® è§„èŒƒï¼Œå¦‚æœä¸€ä¸ªç±»æ‰©å±•äº†å¦ä¸€ä¸ªç±»å¹¶ä¸”æ²¡æœ‰ constructorï¼Œé‚£ä¹ˆå°†ç”Ÿæˆä¸‹é¢è¿™æ ·çš„ constructorï¼š


<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸ºæ²¡æœ‰è‡ªå·±çš„ constructor çš„æ‰©å±•ç±»ç”Ÿæˆçš„</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">''ç»§æ‰¿ç±»çš„ constructor å¿…é¡»è°ƒç”¨ super(...)ï¼Œå¹¶ä¸” (!) ä¸€å®šè¦åœ¨ä½¿ç”¨ this ä¹‹å‰è°ƒç”¨''</code></pre></div>
<p>ğŸ’¡ ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* åœ¨ JavaScript ä¸­ï¼Œç»§æ‰¿ç±»ï¼ˆæ‰€è°“çš„â€œæ´¾ç”Ÿæ„é€ å™¨â€ï¼Œè‹±æ–‡ä¸º â€œderived constructorâ€ï¼‰çš„æ„é€ å‡½æ•°ä¸å…¶ä»–å‡½æ•°ä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„

- æ´¾ç”Ÿæ„é€ å™¨å…·æœ‰ç‰¹æ®Šçš„å†…éƒ¨å±æ€§ [[ConstructorKind]]:"derived"ï¼›è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†…éƒ¨æ ‡ç­¾


è¯¥æ ‡ç­¾ä¼šå½±ã€å“å®ƒçš„ new è¡Œä¸ºã€‘ï¼š

  - å½“é€šè¿‡ new æ‰§è¡Œä¸€ä¸ªå¸¸è§„å‡½æ•°æ—¶ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶å°†è¿™ä¸ªç©ºå¯¹è±¡èµ‹å€¼ç»™ this


  - ä½†æ˜¯,å½“ç»§æ‰¿çš„ constructor æ‰§è¡Œæ—¶ï¼Œå®ƒä¸ä¼šæ‰§è¡Œæ­¤æ“ä½œï¼›å®ƒæœŸæœ›çˆ¶ç±»çš„ constructor æ¥å®Œæˆè¿™é¡¹å·¥ä½œ


* å› æ­¤ï¼Œæ´¾ç”Ÿçš„ constructor å¿…é¡»è°ƒç”¨ super æ‰èƒ½æ‰§è¡Œå…¶çˆ¶ç±»ï¼ˆbaseï¼‰çš„ constructorï¼Œå¦åˆ™ this æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡å°†ä¸ä¼šè¢«åˆ›å»º</code></pre></div>
<p>ğŸ˜¨ é‡å†™ç±»å­—æ®µ: ä¸€ä¸ªæ£˜æ‰‹çš„æ³¨æ„è¦ç‚¹ï¼›å¯ä»¥é‡å†™æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é‡å†™å­—æ®µï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">"animal"</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Rabbit</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">"rabbit"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// animal</span>
<span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// animal</span>

<span class="token comment">// ä¸¤ç§æƒ…å†µä¸‹ï¼šnew Animal() å’Œ new Rabbit()ï¼Œåœ¨ (*) è¡Œçš„ alert éƒ½æ‰“å°äº† animal</span>

<span class="token comment">// æœ‰ç‚¹æ‡µé€¼ï¼Œç”¨æ–¹æ³•æ¥è¿›è¡Œæ¯”è¾ƒï¼š</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è€Œä¸æ˜¯ this.name = 'animal'</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"animal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è€Œä¸æ˜¯ alert(this.name);</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Rabbit</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"rabbit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// animal</span>
<span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rabbit</span>

<span class="token comment">// è¯·æ³¨æ„ï¼šè¿™æ—¶çš„è¾“å‡ºæ˜¯ä¸åŒçš„</span>

<span class="token comment">// è¿™æ‰æ˜¯æœ¬æ¥æ‰€æœŸå¾…çš„ç»“æœã€‚å½“çˆ¶ç±»æ„é€ å™¨åœ¨æ´¾ç”Ÿçš„ç±»ä¸­è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä½¿ç”¨è¢«é‡å†™çš„æ–¹æ³•ï¼›â€¦â€¦ä½†å¯¹äºç±»å­—æ®µå¹¶éå¦‚æ­¤ã€‚æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œçˆ¶ç±»æ„é€ å™¨æ€»æ˜¯ä½¿ç”¨çˆ¶ç±»çš„å­—æ®µ</span></code></pre></div>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„åŒºåˆ«å‘¢ï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åŸå› åœ¨äºç±»å­—æ®µåˆå§‹åŒ–çš„é¡ºåº:

- å¯¹äºåŸºç±»ï¼ˆè¿˜æœªç»§æ‰¿ä»»ä½•ä¸œè¥¿çš„é‚£ç§ï¼‰ï¼Œåœ¨æ„é€ å‡½æ•°è°ƒç”¨å‰åˆå§‹åŒ–

- å¯¹äºæ´¾ç”Ÿç±»ï¼Œåœ¨ super() åç«‹åˆ»åˆå§‹åŒ–</code></pre></div>
<p>â€è¿™ç§å­—æ®µä¸æ–¹æ³•ä¹‹é—´å¾®å¦™çš„åŒºåˆ«åªç‰¹å®šäº JavaScript;è¿™ç§è¡Œä¸ºä»…åœ¨ä¸€ä¸ªè¢«é‡å†™çš„å­—æ®µè¢«çˆ¶ç±»æ„é€ å™¨ä½¿ç”¨æ—¶æ‰ä¼šæ˜¾ç°å‡ºæ¥;å¯ä»¥é€šè¿‡ä½¿ç”¨æ–¹æ³•æˆ–è€… getter/setter æ›¿ä»£ç±»å­—æ®µï¼Œæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜â€</p>
<p>ğŸš© æ·±å…¥åœ°ç ”ç©¶ <code class="language-text">super</code> <code class="language-text">[[HomeObject]]</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å½“ä¸€ä¸ªå¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šå°†å½“å‰å¯¹è±¡ä½œä¸º this

- éšåå¦‚æœè°ƒç”¨ super.method()ï¼Œé‚£ä¹ˆå¼•æ“éœ€è¦ä»å½“å‰å¯¹è±¡çš„åŸå‹ä¸­è·å– method</code></pre></div>
<p>ğŸ˜¨super æ€ä¹ˆåšåˆ°çš„ï¼Ÿçœ‹ä¼¼å®¹æ˜“ï¼Œå…¶å®å¹¶ä¸ç®€å•ï¼</p>
<p>ä½¿ç”¨æ™®é€šå¯¹è±¡æ¼”ç¤ºä¸€ä¸‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"Animal"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> animal<span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">"Rabbit"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™å°±æ˜¯ super.eat() å¯ä»¥å¤§æ¦‚å·¥ä½œçš„æ–¹å¼</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

rabbit<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rabbit eats.</span></code></pre></div>
<p>â€this.<strong>proto</strong>.eat() å°†åœ¨åŸå‹çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ eatï¼Œè€Œéå½“å‰å¯¹è±¡â€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"Animal"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> animal<span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...bounce around rabbit-style and call parent (animal) method</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> longEar <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> rabbit<span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...do something with long ears and call parent (rabbit) method</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (**)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

longEar<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Maximum call stack size exceeded</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åœ¨ (*) å’Œ (**) è¿™ä¸¤è¡Œä¸­ï¼Œthis çš„å€¼éƒ½æ˜¯å½“å‰å¯¹è±¡ï¼ˆlongEarï¼‰ï¼›è¿™æ˜¯è‡³å…³é‡è¦çš„ä¸€ç‚¹ï¼šæ‰€æœ‰çš„å¯¹è±¡æ–¹æ³•éƒ½å°†å½“å‰å¯¹è±¡ä½œä¸º thisï¼Œè€ŒéåŸå‹æˆ–å…¶ä»–ä»€ä¹ˆä¸œè¥¿


- å› æ­¤ï¼Œåœ¨ (*) å’Œ (**) è¿™ä¸¤è¡Œä¸­ï¼Œthis.__proto__ çš„å€¼æ˜¯å®Œå…¨ç›¸åŒçš„ï¼šéƒ½æ˜¯ rabbitã€‚å®ƒä»¬ä¿©éƒ½è°ƒç”¨çš„æ˜¯ rabbit.eatï¼Œå®ƒä»¬åœ¨ä¸åœåœ°å¾ªç¯è°ƒç”¨è‡ªå·±ï¼Œè€Œä¸æ˜¯åœ¨åŸå‹é“¾ä¸Šå‘ä¸Šå¯»æ‰¾æ–¹æ³•</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 1.åœ¨ longEar.eat() ä¸­ï¼Œ(**) è¿™ä¸€è¡Œè°ƒç”¨ rabbit.eat å¹¶ä¸ºå…¶æä¾› this=longEar</span>

<span class="token comment">// åœ¨ longEar.eat() ä¸­æˆ‘ä»¬æœ‰ this = longEar</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (**)</span>
<span class="token comment">// å˜æˆäº†</span>
longEar<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¹Ÿå°±æ˜¯</span>
rabbit<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.ä¹‹ååœ¨ rabbit.eat çš„ (*) è¡Œä¸­ï¼Œå¸Œæœ›å°†å‡½æ•°è°ƒç”¨åœ¨åŸå‹é“¾ä¸Šå‘æ›´é«˜å±‚ä¼ é€’ï¼Œä½†æ˜¯ this=longEarï¼Œæ‰€ä»¥ this.__proto__.eat åˆæ˜¯ rabbit.eatï¼</span>

<span class="token comment">// åœ¨ rabbit.eat() ä¸­æˆ‘ä»¬ä¾ç„¶æœ‰ this = longEar</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
<span class="token comment">// å˜æˆäº†</span>
longEar<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æˆ–ï¼ˆå†ä¸€æ¬¡ï¼‰</span>
rabbit<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3. â€¦â€¦æ‰€ä»¥ rabbit.eat åœ¨ä¸åœåœ°å¾ªç¯è°ƒç”¨è‡ªå·±ï¼Œå› æ­¤å®ƒæ— æ³•è¿›ä¸€æ­¥åœ°æå‡</span></code></pre></div>
<p>ğŸ˜­ è¿™ä¸ªé—®é¢˜æ²¡æ³•ä»…ä»…é€šè¿‡ä½¿ç”¨ this æ¥è§£å†³!!!</p>
<p>ğŸš© ä¸ºäº†æä¾›è§£å†³æ–¹æ³•ï¼ŒJavaScript ä¸ºå‡½æ•°æ·»åŠ äº†ä¸€ä¸ªç‰¹æ®Šçš„å†…éƒ¨å±æ€§ï¼š<code class="language-text">[[HomeObject]]</code></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å½“ä¸€ä¸ªå‡½æ•°è¢«å®šä¹‰ä¸ºç±»æˆ–è€…å¯¹è±¡æ–¹æ³•æ—¶ï¼Œå®ƒçš„ [[HomeObject]] å±æ€§å°±æˆä¸ºäº†è¯¥å¯¹è±¡

- ç„¶å super ä½¿ç”¨å®ƒæ¥è§£æï¼ˆresolveï¼‰çˆ¶åŸå‹åŠå…¶æ–¹æ³•</code></pre></div>
<p>çœ‹å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆå¯¹äºæ™®é€šå¯¹è±¡ï¼‰</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"Animal"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// animal.eat.[[HomeObject]] == animal</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> eats.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> animal<span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">"Rabbit"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// rabbit.eat.[[HomeObject]] == rabbit</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> longEar <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> rabbit<span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">"Long Ear"</span><span class="token punctuation">,</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// longEar.eat.[[HomeObject]] == longEar</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æ­£ç¡®æ‰§è¡Œ</span>
longEar<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Long Ear eats.</span></code></pre></div>
<p>ğŸš© æ–¹æ³•å¹¶ä¸æ˜¯â€œè‡ªç”±â€çš„</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token operator">*</span> å‡½æ•°é€šå¸¸éƒ½æ˜¯â€œè‡ªç”±â€çš„ï¼Œå¹¶æ²¡æœ‰ç»‘å®šåˆ° JavaScript ä¸­çš„å¯¹è±¡ã€‚æ­£å› å¦‚æ­¤ï¼Œå®ƒä»¬å¯ä»¥åœ¨å¯¹è±¡ä¹‹é—´å¤åˆ¶ï¼Œå¹¶ç”¨å¦å¤–ä¸€ä¸ª <span class="token keyword">this</span> è°ƒç”¨å®ƒã€‚

<span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>HomeObject<span class="token punctuation">]</span><span class="token punctuation">]</span> çš„å­˜åœ¨è¿åäº†ä¸Šè¿°åŸåˆ™ï¼Œå› ä¸ºæ–¹æ³•è®°ä½äº†å®ƒä»¬çš„å¯¹è±¡

<span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>HomeObject<span class="token punctuation">]</span><span class="token punctuation">]</span> ä¸èƒ½è¢«æ›´æ”¹ï¼Œæ‰€ä»¥è¿™ä¸ªç»‘å®šæ˜¯æ°¸ä¹…çš„

<span class="token operator">-</span> åœ¨ JavaScript è¯­è¨€ä¸­ <span class="token punctuation">[</span><span class="token punctuation">[</span>HomeObject<span class="token punctuation">]</span><span class="token punctuation">]</span> ä»…è¢«ç”¨äº <span class="token keyword">super</span>ï¼›æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•ä¸ä½¿ç”¨ <span class="token keyword">super</span>ï¼Œé‚£ä¹ˆä»ç„¶å¯ä»¥è§†å®ƒä¸ºè‡ªç”±çš„å¹¶ä¸”å¯åœ¨å¯¹è±¡ä¹‹é—´å¤åˆ¶ï¼›ä½†æ˜¯ç”¨äº† <span class="token keyword">super</span> å†è¿™æ ·åšå¯èƒ½å°±ä¼šå‡ºé”™</code></pre></div>
<p>é”™è¯¯ç¤ºèŒƒ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I'm an animal</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// rabbit ç»§æ‰¿è‡ª animal</span>
<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> animal<span class="token punctuation">,</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> plant <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"I'm a plant"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// tree ç»§æ‰¿è‡ª plant</span>
<span class="token keyword">let</span> tree <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> plant<span class="token punctuation">,</span>
  sayHi<span class="token operator">:</span> rabbit<span class="token punctuation">.</span>sayHi<span class="token punctuation">,</span> <span class="token comment">// (*)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

tree<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I'm an animal (?!?)</span></code></pre></div>
<p>ğŸš© æ–¹æ³•ï¼Œä¸æ˜¯å‡½æ•°å±æ€§</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- [[HomeObject]] æ˜¯ä¸ºç±»å’Œæ™®é€šå¯¹è±¡ä¸­çš„æ–¹æ³•å®šä¹‰çš„ã€‚ä½†æ˜¯å¯¹äºå¯¹è±¡è€Œè¨€ï¼Œæ–¹æ³•å¿…é¡»ç¡®åˆ‡æŒ‡å®šä¸º method()ï¼Œè€Œä¸æ˜¯ "method: function()"


- è¿™ä¸ªå·®åˆ«å¯¹å¼€å‘è€…æ¥è¯´å¯èƒ½ä¸é‡è¦ï¼Œä½†æ˜¯å¯¹ JavaScript æ¥è¯´å´éå¸¸é‡è¦</code></pre></div>
<p>é”™è¯¯ç¤ºèŒƒ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œæ˜¯æ•…æ„è¿™æ ·å†™çš„ï¼Œè€Œä¸æ˜¯ eat() {...</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rabbit <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> animal<span class="token punctuation">,</span>
  <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

rabbit<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é”™è¯¯è°ƒç”¨ superï¼ˆå› ä¸ºè¿™é‡Œæ²¡æœ‰ [[HomeObject]]ï¼‰</span></code></pre></div>
<h2>é™æ€å±æ€§å’Œé™æ€æ–¹æ³•</h2>
<p>ğŸš© é™æ€æ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æŠŠä¸€ä¸ªæ–¹æ³•èµ‹å€¼ç»™ç±»çš„å‡½æ•°æœ¬èº«ï¼Œè€Œä¸æ˜¯èµ‹ç»™å®ƒçš„ "prototype"


è¿™æ ·çš„æ–¹æ³•è¢«ç§°ä¸º é™æ€çš„ï¼ˆstaticï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">staticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> User<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

User<span class="token punctuation">.</span><span class="token function">staticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// å’Œä½œä¸ºå±æ€§èµ‹å€¼çš„ä½œç”¨ç›¸åŒ</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

User<span class="token punctuation">.</span><span class="token function-variable function">staticMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> User<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

User<span class="token punctuation">.</span><span class="token function">staticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é™æ€æ–¹æ³•è¢«ç”¨äºå®ç°å±äºæ•´ä¸ªç±»çš„åŠŸèƒ½;å®ƒä¸å…·ä½“çš„ç±»å®ä¾‹æ— å…³</code></pre></div>
<p>ğŸš© é™æ€å±æ€§</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é™æ€å±æ€§ç±»ä¼¼é™æ€æ–¹æ³•</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> publisher <span class="token operator">=</span> <span class="token string">"Levi Ding"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>Article<span class="token punctuation">.</span>publisher<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Levi Ding</span>

<span class="token comment">// ç­‰åŒäºç›´æ¥ç»™ Article èµ‹å€¼ï¼š</span>

Article<span class="token punctuation">.</span>publisher <span class="token operator">=</span> <span class="token string">"Levi Ding"</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">é™æ€å±æ€§è¢«ç”¨äºæƒ³è¦å­˜å‚¨ç±»çº§åˆ«çš„æ•°æ®æ—¶ï¼Œè€Œä¸æ˜¯ç»‘å®šåˆ°å®ä¾‹</code></pre></div>
<p>ğŸš© ç»§æ‰¿é™æ€å±æ€§å’Œæ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯å¯è¢«ç»§æ‰¿çš„

- ç»§æ‰¿å¯¹å¸¸è§„æ–¹æ³•å’Œé™æ€æ–¹æ³•éƒ½æœ‰æ•ˆ</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> planet <span class="token operator">=</span> <span class="token string">"Earth"</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> speed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> speed<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">speed <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">+=</span> speed<span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> runs with speed </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">animalA<span class="token punctuation">,</span> animalB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> animalA<span class="token punctuation">.</span>speed <span class="token operator">-</span> animalB<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç»§æ‰¿äº Animal</span>
<span class="token keyword">class</span> <span class="token class-name">Rabbit</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> hides!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> rabbits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token string">"White Rabbit"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Rabbit</span><span class="token punctuation">(</span><span class="token string">"Black Rabbit"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

rabbits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>Rabbit<span class="token punctuation">.</span>compare<span class="token punctuation">)</span><span class="token punctuation">;</span>

rabbits<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Black Rabbit runs with speed 5.</span>

<span class="token function">alert</span><span class="token punctuation">(</span>Rabbit<span class="token punctuation">.</span>planet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Earth</span></code></pre></div>
<p>å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿå†æ¬¡ï¼Œä½¿ç”¨åŸå‹ ğŸ˜±ã€‚extends è®© Rabbit çš„ [[Prototype]] æŒ‡å‘äº† Animal</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Rabbit extends Animal åˆ›å»ºäº†ä¸¤ä¸ª [[Prototype]] å¼•ç”¨ï¼š

- 1. Rabbit å‡½æ•°åŸå‹ç»§æ‰¿è‡ª Animal å‡½æ•°

- 2. Rabbit.prototype åŸå‹ç»§æ‰¿è‡ª Animal.prototype</code></pre></div>
<p>æ ¡éªŒ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Rabbit</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// å¯¹äºé™æ€çš„</span>
<span class="token function">alert</span><span class="token punctuation">(</span>Rabbit<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Animal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// å¯¹äºå¸¸è§„æ–¹æ³•</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Rabbit</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<h2>ç§æœ‰çš„å’Œå—ä¿æŠ¤çš„å±æ€§å’Œæ–¹æ³•</h2>
<p>ğŸš© å°±é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰è€Œè¨€ï¼Œå†…éƒ¨æ¥å£ä¸å¤–éƒ¨æ¥å£çš„åˆ’åˆ†è¢«ç§°ä¸º [[å°è£…|https://en.wikipedia.org/wiki/Encapsulation<em>(computer</em>programming)]]</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å°è£…å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹:

1. ä¿æŠ¤ç”¨æˆ·ï¼Œä½¿ä»–ä»¬ä¸ä¼šè¯¯ä¼¤è‡ªå·±

å¦‚æœä¸€ä¸ª class çš„ä½¿ç”¨è€…æƒ³è¦æ”¹å˜é‚£äº›æœ¬ä¸æ‰“ç®—è¢«ä»å¤–éƒ¨æ›´æ”¹çš„ä¸œè¥¿ â€”â€” åæœæ˜¯ä¸å¯é¢„æµ‹çš„


2. å¯æ”¯æŒæ€§

å¦‚æœä¸¥æ ¼ç•Œå®šå†…éƒ¨æ¥å£ï¼Œé‚£ä¹ˆè¿™ä¸ª class çš„å¼€å‘äººå‘˜å¯ä»¥è‡ªç”±åœ°æ›´æ”¹å…¶å†…éƒ¨å±æ€§å’Œæ–¹æ³•ï¼Œç”šè‡³æ— éœ€é€šçŸ¥ç”¨æˆ·

å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå½“æ–°ç‰ˆæœ¬é—®ä¸–æ—¶ï¼Œåº”ç”¨çš„å†…éƒ¨å¯èƒ½è¢«è¿›è¡Œäº†å…¨é¢æ£€ä¿®ï¼Œä½†å¦‚æœå¤–éƒ¨æ¥å£ç›¸åŒï¼Œåˆ™ä»ç„¶å¾ˆå®¹æ˜“å‡çº§


3. éšè—å¤æ‚æ€§

å½“å®æ–½ç»†èŠ‚è¢«éšè—ï¼Œå¹¶æä¾›äº†ç®€å•ä¸”æœ‰æ®å¯æŸ¥çš„å¤–éƒ¨æ¥å£æ—¶ï¼Œæ€»æ˜¯å¾ˆæ–¹ä¾¿çš„</code></pre></div>
<p>ğŸš© ä¸ºäº†éšè—å†…éƒ¨æ¥å£ï¼ŒJavaScript ä½¿ç”¨å—ä¿æŠ¤çš„æˆ–ç§æœ‰çš„å±æ€§</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å—ä¿æŠ¤çš„å­—æ®µä»¥ _ å¼€å¤´ï¼›è¿™æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„çº¦å®šï¼Œä¸æ˜¯åœ¨è¯­è¨€çº§åˆ«å¼ºåˆ¶æ‰§è¡Œçš„ï¼›ç¨‹åºå‘˜åº”è¯¥åªé€šè¿‡å®ƒçš„ç±»å’Œä»å®ƒç»§æ‰¿çš„ç±»ä¸­è®¿é—®ä»¥ _ å¼€å¤´çš„å­—æ®µ


- ç§æœ‰å­—æ®µä»¥ # å¼€å¤´ï¼›JavaScript ç¡®ä¿æˆ‘ä»¬åªèƒ½ä»ç±»çš„å†…éƒ¨è®¿é—®å®ƒä»¬</code></pre></div>
<p>å—ä¿æŠ¤</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">CoffeeMachine</span> <span class="token punctuation">{</span>
  _waterAmount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">set</span> <span class="token function">waterAmount</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Negative water"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_waterAmount <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">waterAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_waterAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">power</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_power <span class="token operator">=</span> power<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºå’–å•¡æœº</span>
<span class="token keyword">let</span> coffeeMachine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CoffeeMachine</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åŠ æ°´</span>
coffeeMachine<span class="token punctuation">.</span>waterAmount <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Error: Negative water</span>

<span class="token comment">// å—ä¿æŠ¤çš„å±æ€§é€šå¸¸ä»¥ä¸‹åˆ’çº¿ _ ä½œä¸ºå‰ç¼€;ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„çº¦å®šï¼Œå³ä¸åº”è¯¥ä»å¤–éƒ¨è®¿é—®æ­¤ç±»å‹çš„å±æ€§å’Œæ–¹æ³•</span>

<span class="token comment">// ä¹Ÿå¯ä½¿ç”¨ get.../set... å‡½æ•°</span>

<span class="token keyword">class</span> <span class="token class-name">CoffeeMachine</span> <span class="token punctuation">{</span>
  _waterAmount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function">setWaterAmount</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Negative water"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_waterAmount <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getWaterAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_waterAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">CoffeeMachine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setWaterAmount</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å‡½æ•°æ›´çµæ´»ï¼ˆå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼‰ï¼› ï¼Œget/set è¯­æ³•æ›´çŸ­</span></code></pre></div>
<p>åªè¯»</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">CoffeeMachine</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">power</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_power <span class="token operator">=</span> power<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">power</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_power<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºå’–å•¡æœº</span>
<span class="token keyword">let</span> coffeeMachine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CoffeeMachine</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Power is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>coffeeMachine<span class="token punctuation">.</span>power<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">W</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠŸç‡æ˜¯ï¼š100W</span>

coffeeMachine<span class="token punctuation">.</span>power <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// Errorï¼ˆæ²¡æœ‰ setterï¼‰</span>

<span class="token comment">// åªèƒ½è¢«åœ¨åˆ›å»ºæ—¶è¿›è¡Œè®¾ç½®ï¼Œä¹‹åä¸å†è¢«ä¿®æ”¹;åªéœ€è¦è®¾ç½® getterï¼Œè€Œä¸è®¾ç½® setter</span></code></pre></div>
<h2>æ‰©å±•å†…å»ºç±»</h2>
<p>ğŸš© å†…å»ºçš„ç±»ï¼Œä¾‹å¦‚ Arrayï¼ŒMap ç­‰ä¹Ÿéƒ½æ˜¯å¯ä»¥æ‰©å±•çš„ï¼ˆextendableï¼‰</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ç»™ PowerArray æ–°å¢äº†ä¸€ä¸ªæ–¹æ³•ï¼ˆå¯ä»¥å¢åŠ æ›´å¤šï¼‰</span>
<span class="token keyword">class</span> <span class="token class-name">PowerArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PowerArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">let</span> filteredArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>filteredArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10, 50</span>
<span class="token function">alert</span><span class="token punctuation">(</span>filteredArr<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// ğŸ’¡æ³¨æ„ä¸€ä¸ªéå¸¸æœ‰è¶£çš„äº‹å„¿ï¼</span>

<span class="token comment">// å†…å»ºçš„æ–¹æ³•ä¾‹å¦‚ filterï¼Œmap ç­‰ â€” è¿”å›çš„æ­£æ˜¯å­ç±» PowerArray çš„æ–°å¯¹è±¡ï¼›å®ƒä»¬å†…éƒ¨ä½¿ç”¨äº†å¯¹è±¡çš„ constructor å±æ€§æ¥å®ç°è¿™ä¸€åŠŸèƒ½</span>

<span class="token comment">// arr.constructor === PowerArray</span></code></pre></div>
<p>ğŸš© å¦‚æœå¸Œæœ›åƒ map æˆ– filter è¿™æ ·çš„å†…å»ºæ–¹æ³•è¿”å›å¸¸è§„æ•°ç»„ï¼Œå¯ä»¥åœ¨ Symbol.species ä¸­è¿”å› Array</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">PowerArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å†…å»ºæ–¹æ³•å°†ä½¿ç”¨è¿™ä¸ªä½œä¸º constructor</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PowerArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// filter ä½¿ç”¨ arr.constructor[Symbol.species] ä½œä¸º constructor åˆ›å»ºæ–°æ•°ç»„</span>
<span class="token keyword">let</span> filteredArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// filteredArr ä¸æ˜¯ PowerArrayï¼Œè€Œæ˜¯ Array</span>
<span class="token function">alert</span><span class="token punctuation">(</span>filteredArr<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: filteredArr.isEmpty is not a function</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å…¶ä»–é›†åˆçš„å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼›ä¾‹å¦‚ Map å’Œ Set çš„å·¥ä½œæ–¹å¼ç±»ä¼¼ã€‚å®ƒä»¬ä¹Ÿä½¿ç”¨ Symbol.speciesï¼›</code></pre></div>
<p>ğŸš© å†…å»ºç±»æ²¡æœ‰é™æ€æ–¹æ³•ç»§æ‰¿</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å†…å»ºå¯¹è±¡æœ‰å®ƒä»¬è‡ªå·±çš„é™æ€æ–¹æ³•ï¼Œä¾‹å¦‚ Object.keysï¼ŒArray.isArray ç­‰

- åŸç”Ÿçš„ç±»äº’ç›¸æ‰©å±•,ä¾‹å¦‚ï¼ŒArray æ‰©å±•è‡ª Object

- é€šå¸¸ï¼Œå½“ä¸€ä¸ªç±»æ‰©å±•å¦ä¸€ä¸ªç±»æ—¶ï¼Œé™æ€æ–¹æ³•å’Œéé™æ€æ–¹æ³•éƒ½ä¼šè¢«ç»§æ‰¿

- ä½†å†…å»ºç±»å´æ˜¯ä¸€ä¸ªä¾‹å¤–,å®ƒä»¬ç›¸äº’é—´ã€ä¸ç»§æ‰¿é™æ€æ–¹æ³•ã€‘</code></pre></div>
<h2>ç±»å‹æ£€æŸ¥æ–¹æ³•</h2>
<p>ğŸš© ç±»å‹æ£€æŸ¥æ–¹æ³•</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- typeof	åŸå§‹æ•°æ®ç±»å‹ï¼›è¿”å›string


- {}.toString	åŸå§‹æ•°æ®ç±»å‹ï¼Œå†…å»ºå¯¹è±¡ï¼ŒåŒ…å« Symbol.toStringTag å±æ€§çš„å¯¹è±¡ï¼›è¿”å›string


- instanceof	å¯¹è±¡ï¼›è¿”å›true/false</code></pre></div>
<p>ğŸš©instanceof æ“ä½œç¬¦</p>
<p>è¯­æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">obj <span class="token keyword">instanceof</span> <span class="token class-name">Class</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é€šå¸¸ï¼Œinstanceof åœ¨æ£€æŸ¥ä¸­ä¼šå°†åŸå‹é“¾è€ƒè™‘åœ¨å†…

- æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨é™æ€æ–¹æ³• Symbol.hasInstance ä¸­è®¾ç½®è‡ªå®šä¹‰é€»è¾‘</code></pre></div>
<p>ğŸš©obj instanceof Class ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 1.å¦‚æœè¿™å„¿æœ‰é™æ€æ–¹æ³• Symbol.hasInstanceï¼Œé‚£å°±ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span>

<span class="token comment">// è®¾ç½® instanceOf æ£€æŸ¥</span>
<span class="token comment">// å¹¶å‡è®¾å…·æœ‰ canEat å±æ€§çš„éƒ½æ˜¯ animal</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>canEat<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> canEat<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Animal</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// trueï¼šAnimal[Symbol.hasInstance](obj) è¢«è°ƒç”¨</span>


<span class="token comment">// 2. å¤§å¤šæ•° class æ²¡æœ‰ Symbol.hasInstanceã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡å‡†çš„é€»è¾‘æ˜¯ï¼šä½¿ç”¨ obj instanceOf Class æ£€æŸ¥ Class.prototype æ˜¯å¦ç­‰äº obj çš„åŸå‹é“¾ä¸­çš„åŸå‹ä¹‹ä¸€</span>

obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>prototype<span class="token operator">?</span>
obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>prototype<span class="token operator">?</span>
obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>prototype<span class="token operator">?</span>
<span class="token operator">...</span>
<span class="token comment">// å¦‚æœä»»æ„ä¸€ä¸ªçš„ç­”æ¡ˆä¸º trueï¼Œåˆ™è¿”å› true</span>
<span class="token comment">// å¦åˆ™ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æ£€æŸ¥åˆ°äº†åŸå‹é“¾çš„å°¾ç«¯ï¼Œåˆ™è¿”å› false</span></code></pre></div>
<p>ğŸš© objA.isPrototypeOf(objB)</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¦‚æœ objA å¤„åœ¨ objB çš„åŸå‹é“¾ä¸­ï¼Œåˆ™è¿”å› true


- å¯ä»¥å°† obj instanceof Class æ£€æŸ¥æ”¹ä¸º Class.prototype.isPrototypeOf(obj)</code></pre></div>
<p>ğŸš© ç¦åˆ©ï¼šä½¿ç”¨ Object.prototype.toString æ–¹æ³•æ¥æ­ç¤ºç±»å‹</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¯ä»¥å°†Object.prototype.toString æ–¹æ³•ä½œä¸º typeof çš„å¢å¼ºç‰ˆæˆ–è€… instanceof çš„æ›¿ä»£æ–¹æ³•æ¥ä½¿ç”¨</code></pre></div>
<p>æŒ‰ç…§ [[è§„èŒƒ |https://tc39.github.io/ecma262/#sec-object.prototype.tostring]]æ‰€è®²ï¼Œå†…å»ºçš„ toString æ–¹æ³•å¯ä»¥è¢«ä»å¯¹è±¡ä¸­æå–å‡ºæ¥ï¼Œå¹¶åœ¨ä»»ä½•å…¶ä»–å€¼çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚å…¶ç»“æœå–å†³äºè¯¥å€¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æ–¹ä¾¿èµ·è§ï¼Œå°† toString æ–¹æ³•å¤åˆ¶åˆ°ä¸€ä¸ªå˜é‡ä¸­</span>
<span class="token keyword">let</span> objectToString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

<span class="token comment">// å®ƒæ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Ÿ</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">objectToString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Array]</span>

<span class="token comment">// ğŸ’¡å…¶ç»“æœå–å†³äºè¯¥å€¼</span>

<span class="token comment">// å¯¹äº number ç±»å‹ï¼Œç»“æœæ˜¯ [object Number]</span>
<span class="token comment">// å¯¹äº boolean ç±»å‹ï¼Œç»“æœæ˜¯ [object Boolean]</span>
<span class="token comment">// å¯¹äº nullï¼š[object Null]</span>
<span class="token comment">// å¯¹äº undefinedï¼š[object Undefined]</span>
<span class="token comment">// å¯¹äºæ•°ç»„ï¼š[object Array]</span>
<span class="token comment">// â€¦â€¦ç­‰ï¼ˆå¯è‡ªå®šä¹‰ï¼‰</span>

<span class="token comment">// ğŸ’¡Symbol.toStringTag</span>

<span class="token comment">// å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„å¯¹è±¡å±æ€§ Symbol.toStringTag è‡ªå®šä¹‰å¯¹è±¡çš„ toString æ–¹æ³•çš„è¡Œä¸º</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object User]</span></code></pre></div>
<h2>Mixin æ¨¡å¼</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">* Mixin â€” æ˜¯ä¸€ä¸ªé€šç”¨çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æœ¯è¯­ï¼šä¸€ä¸ªåŒ…å«å…¶ä»–ç±»çš„æ–¹æ³•çš„ç±»

* ä¸€äº›å…¶å®ƒç¼–ç¨‹è¯­è¨€å…è®¸å¤šé‡ç»§æ‰¿ã€‚JavaScript ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å°†æ–¹æ³•æ‹·è´åˆ°åŸå‹ä¸­æ¥å®ç° mixin</code></pre></div>
<p>ğŸš©EventMixin : å¯ä»¥ä½¿ç”¨ mixin ä½œä¸ºä¸€ç§é€šè¿‡æ·»åŠ å¤šç§è¡Œä¸ºæ¥æ‰©å……ç±»çš„æ–¹æ³• ä¾‹å¦‚ï¼šäº‹ä»¶å¤„ç†</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> eventMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * è®¢é˜…äº‹ä»¶ï¼Œç”¨æ³•ï¼š
   *  menu.on('select', function(item) { ... }
   */</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * å–æ¶ˆè®¢é˜…ï¼Œç”¨æ³•ï¼š
   *  menu.off('select', handler)
   */</span>
  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> handlers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token operator">?.</span><span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handlers<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handlers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>handlers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        handlers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * ç”Ÿæˆå…·æœ‰ç»™å®šåç§°å’Œæ•°æ®çš„äº‹ä»¶
   *  this.trigger('select', data1, data2);
   */</span>
  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token operator">?.</span><span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// è¯¥äº‹ä»¶åç§°æ²¡æœ‰å¯¹åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_eventHandlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>ç”¨æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»ºä¸€ä¸ª class</span>
<span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
  <span class="token function">choose</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ·»åŠ å¸¦æœ‰äº‹ä»¶ç›¸å…³æ–¹æ³•çš„ mixin</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Menu</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> eventMixin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ï¼Œåœ¨è¢«é€‰æ‹©æ—¶è¢«è°ƒç”¨ï¼š</span>
menu<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Value selected: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è§¦å‘äº‹ä»¶ => è¿è¡Œä¸Šè¿°çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰å¹¶æ˜¾ç¤ºï¼š</span>
<span class="token comment">// è¢«é€‰ä¸­çš„å€¼ï¼š123</span>
menu<span class="token punctuation">.</span><span class="token function">choose</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>é”™è¯¯å¤„ç†ï¼Œâ€œtry..catchâ€</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- é€šå¸¸ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè„šæœ¬å°±ä¼šâ€œæ­»äº¡â€ï¼ˆç«‹å³åœæ­¢ï¼‰ï¼Œå¹¶åœ¨æ§åˆ¶å°å°†é”™è¯¯æ‰“å°å‡ºæ¥ã€‚

- ä½†æ˜¯æœ‰ä¸€ç§è¯­æ³•ç»“æ„ try..catchï¼Œå®ƒå¯ä»¥â€œæ•è·ï¼ˆcatchï¼‰â€é”™è¯¯ï¼Œå› æ­¤è„šæœ¬å¯ä»¥æ‰§è¡Œæ›´åˆç†çš„æ“ä½œï¼Œè€Œä¸æ˜¯æ­»æ‰</code></pre></div>
<p>ğŸš© è¯­æ³•</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‰§è¡Œæ­¤å¤„ä»£ç </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè·³è½¬è‡³æ­¤å¤„</span>
  <span class="token comment">// err æ˜¯ä¸€ä¸ª error å¯¹è±¡</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ— è®ºæ€æ ·éƒ½ä¼šåœ¨ try/catch ä¹‹åæ‰§è¡Œ</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¯èƒ½ä¼šæ²¡æœ‰ catch éƒ¨åˆ†æˆ–è€…æ²¡æœ‰ finallyï¼Œæ‰€ä»¥ try..catch æˆ– try..finally éƒ½æ˜¯å¯ç”¨çš„</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Error å¯¹è±¡åŒ…å«ä¸‹åˆ—å±æ€§ï¼š

- message â€” äººç±»å¯è¯»çš„ error ä¿¡æ¯

- name â€” å…·æœ‰ error åç§°çš„å­—ç¬¦ä¸²ï¼ˆError æ„é€ å™¨çš„åç§°ï¼‰

- stackï¼ˆæ²¡æœ‰æ ‡å‡†ï¼Œä½†å¾—åˆ°äº†å¾ˆå¥½çš„æ”¯æŒï¼‰â€” Error å‘ç”Ÿæ—¶çš„è°ƒç”¨æ ˆ</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¦‚æœä¸éœ€è¦ error å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ catch { è€Œä¸æ˜¯ catch(err) { æ¥çœç•¥å®ƒ</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¯ä»¥ä½¿ç”¨ throw æ“ä½œç¬¦æ¥ç”Ÿæˆè‡ªå®šä¹‰çš„ errorã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œthrow çš„å‚æ•°å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œä½†é€šå¸¸æ˜¯ç»§æ‰¿è‡ªå†…å»ºçš„ Error ç±»çš„ error å¯¹è±¡</code></pre></div>
<p>ğŸš©try..catch ä»…å¯¹è¿è¡Œæ—¶çš„ error æœ‰æ•ˆ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åœ¨â€œè®¡åˆ’çš„ï¼ˆscheduledï¼‰â€ä»£ç ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™ try..catch ä¸ä¼šæ•è·åˆ°å¼‚å¸¸ï¼Œä¾‹å¦‚åœ¨ setTimeout ä¸­</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    noSuchVariable<span class="token punctuation">;</span> <span class="token comment">// è„šæœ¬å°†åœ¨è¿™é‡Œåœæ­¢è¿è¡Œï¼Œå‡½æ•°æœ¬èº«è¦ç¨åæ‰æ‰§è¡Œï¼Œè¿™æ—¶å¼•æ“å·²ç»ç¦»å¼€äº† try..catch ç»“æ„</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"won't work"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸ºäº†æ•è·åˆ°è®¡åˆ’çš„ï¼ˆscheduledï¼‰å‡½æ•°ä¸­çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆ try..catch å¿…é¡»åœ¨è¿™ä¸ªå‡½æ•°å†…</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    noSuchVariable<span class="token punctuation">;</span> <span class="token comment">// try..catch å¤„ç† error äº†ï¼</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"error is caught here!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© å˜é‡å’Œ try..catch..finally ä¸­çš„å±€éƒ¨å˜é‡</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¦‚æœä½¿ç”¨ let åœ¨ try å—ä¸­å£°æ˜å˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°†åªåœ¨ try å—ä¸­å¯è§</code></pre></div>
<p>ğŸš©finally å’Œ return</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- finally å­å¥é€‚ç”¨äº try..catch çš„ ä»»ä½• å‡ºå£,åŒ…æ‹¬æ˜¾å¼çš„ return</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"finally"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// finally ä¼šåœ¨æ§åˆ¶è½¬å‘å¤–éƒ¨ä»£ç å‰è¢«æ‰§è¡Œ</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…ˆæ‰§è¡Œ finally ä¸­çš„ alertï¼Œç„¶åæ‰§è¡Œè¿™ä¸ª alert</span></code></pre></div>
<p>ğŸš© å†æ¬¡æŠ›å‡ºï¼ˆrethrowingï¼‰æ˜¯ä¸€ç§é”™è¯¯å¤„ç†çš„é‡è¦æ¨¡å¼ï¼šcatch å—é€šå¸¸æœŸæœ›å¹¶çŸ¥é“å¦‚ä½•å¤„ç†ç‰¹å®šçš„ error ç±»å‹ï¼Œå› æ­¤å®ƒåº”è¯¥å†æ¬¡æŠ›å‡ºå®ƒä¸çŸ¥é“çš„ error</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// catch åº”è¯¥åªå¤„ç†å®ƒçŸ¥é“çš„ errorï¼Œå¹¶â€œæŠ›å‡ºâ€æ‰€æœ‰å…¶ä»– error</span>

<span class="token comment">// â€œå†æ¬¡æŠ›å‡ºï¼ˆrethrowingï¼‰â€æŠ€æœ¯å¯ä»¥è¢«æ›´è¯¦ç»†åœ°è§£é‡Šä¸ºï¼š</span>

<span class="token comment">// 1.Catch æ•è·æ‰€æœ‰ error</span>

<span class="token comment">// 2.åœ¨ catch(err) {...} å—ä¸­ï¼Œå¯¹ error å¯¹è±¡ err è¿›è¡Œåˆ†æ</span>

<span class="token comment">// 3.å¦‚æœä¸çŸ¥é“å¦‚ä½•å¤„ç†å®ƒï¼Œé‚£å°± throw err</span>

<span class="token comment">// ...</span>

<span class="token comment">// åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨â€œå†æ¬¡æŠ›å‡ºâ€ï¼Œä»¥è¾¾åˆ°åœ¨ catch ä¸­åªå¤„ç† SyntaxError çš„ç›®çš„ï¼š</span>

<span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token string">'{ "age": 30 }'</span><span class="token punctuation">;</span> <span class="token comment">// ä¸å®Œæ•´çš„æ•°æ®</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SyntaxError</span><span class="token punctuation">(</span><span class="token string">"Incomplete data: no name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">blabla</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é¢„æ–™ä¹‹å¤–çš„ error</span>

  <span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">SyntaxError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯ä»¥ä½¿ç”¨ instanceof æ“ä½œç¬¦åˆ¤æ–­é”™è¯¯ç±»å‹ï¼›è¿˜å¯ä»¥ä» err.name å±æ€§ä¸­è·å–é”™è¯¯çš„ç±»åï¼Œæ‰€æœ‰åŸç”Ÿçš„é”™è¯¯éƒ½æœ‰è¿™ä¸ªå±æ€§ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯è¯»å– err.constructor.name</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"JSON Error: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> e<span class="token punctuation">;</span> <span class="token comment">// å†æ¬¡æŠ›å‡º (*)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© å…¨å±€ catchï¼šå³ä½¿æˆ‘ä»¬æ²¡æœ‰ try..catchï¼Œå¤§å¤šæ•°æ‰§è¡Œç¯å¢ƒä¹Ÿå…è®¸æˆ‘ä»¬è®¾ç½®â€œå…¨å±€â€é”™è¯¯å¤„ç†ç¨‹åºæ¥æ•è·â€œæ‰å‡ºï¼ˆfall outï¼‰â€çš„ errorã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå°±æ˜¯ window.onerror</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å¦‚æœåœ¨ try..catch ç»“æ„å¤–æœ‰ä¸€ä¸ªè‡´å‘½çš„ errorï¼Œç„¶åè„šæœ¬æ­»äº¡äº†ï¼æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç”¨æ¥åº”å¯¹è¿™ç§æƒ…å†µå—ï¼Ÿå¯èƒ½æƒ³è¦è®°å½•è¿™ä¸ª errorï¼Œå¹¶å‘ç”¨æˆ·æ˜¾ç¤ºæŸäº›å†…å®¹ï¼ˆé€šå¸¸ç”¨æˆ·çœ‹ä¸åˆ°é”™è¯¯ä¿¡æ¯ï¼‰ç­‰</span>

<span class="token comment">// è§„èŒƒä¸­æ²¡æœ‰ç›¸å…³å†…å®¹ï¼Œä½†æ˜¯ä»£ç çš„æ‰§è¡Œç¯å¢ƒä¸€èˆ¬ä¼šæä¾›è¿™ç§æœºåˆ¶ï¼Œå› ä¸ºå®ƒç¡®å®å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼ŒNode.JS æœ‰ process.on("uncaughtException")ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥å°†å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™ç‰¹æ®Šçš„ window.onerror å±æ€§ï¼Œè¯¥å‡½æ•°å°†åœ¨å‘ç”Ÿæœªæ•è·çš„ error æ—¶æ‰§è¡Œ</span>

window<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> url<span class="token punctuation">,</span> line<span class="token punctuation">,</span> col<span class="token punctuation">,</span> error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å…¨å±€é”™è¯¯å¤„ç†ç¨‹åº window.onerror çš„ä½œç”¨é€šå¸¸ä¸æ˜¯æ¢å¤è„šæœ¬çš„æ‰§è¡Œ â€” å¦‚æœå‘ç”Ÿç¼–ç¨‹é”™è¯¯ï¼Œé‚£è¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†é”™è¯¯ä¿¡æ¯å‘é€ç»™å¼€å‘è€…

- å¼‚å¸¸ç›‘æ§ï¼šæœ‰é’ˆå¯¹è¿™ç§æƒ…å†µæä¾›é”™è¯¯æ—¥å¿—çš„ Web æœåŠ¡ï¼Œä¾‹å¦‚ https://errorception.com æˆ– http://www.muscula.com</code></pre></div>
<h2>å›è°ƒ</h2>
<p>ğŸš© å¼‚æ­¥ è¡Œä¸ºï¼ˆactionï¼‰ï¼šç°åœ¨å¼€å§‹æ‰§è¡Œçš„è¡Œä¸ºï¼Œä½†å®ƒä»¬ä¼šåœ¨ç¨åå®Œæˆï¼›ä¾‹å¦‚ï¼ŒsetTimeout å‡½æ•°å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼›ä¾‹å¦‚åŠ è½½è„šæœ¬å’Œæ¨¡å—</p>
<p>å®é™…ä¸­çš„å¼‚æ­¥è¡Œä¸ºçš„ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * ä½¿ç”¨ç»™å®šçš„ src åŠ è½½è„šæœ¬
 * @param src
 **/</span>
<span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åˆ›å»ºä¸€ä¸ª &lt;script> æ ‡ç­¾ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°é¡µé¢</span>
  <span class="token comment">// è¿™å°†ä½¿å¾—å…·æœ‰ç»™å®š src çš„è„šæœ¬å¼€å§‹åŠ è½½ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåè¿è¡Œ</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å¯ä»¥åƒè¿™æ ·ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åœ¨ç»™å®šè·¯å¾„ä¸‹åŠ è½½å¹¶æ‰§è¡Œè„šæœ¬</span>
<span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/my/script.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// loadScript ä¸‹é¢çš„ä»£ç </span>
<span class="token comment">// ä¸ä¼šç­‰åˆ°è„šæœ¬åŠ è½½å®Œæˆæ‰æ‰§è¡Œ</span>
<span class="token comment">// ...</span>

<span class="token comment">// ğŸ’¡è„šæœ¬æ˜¯â€œå¼‚æ­¥â€è°ƒç”¨çš„ï¼Œå› ä¸ºå®ƒä»ç°åœ¨å¼€å§‹åŠ è½½ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªåŠ è½½å‡½æ•°æ‰§è¡Œå®Œæˆåæ‰è¿è¡Œã€‚å¦‚æœåœ¨ loadScript(â€¦) ä¸‹é¢æœ‰ä»»ä½•å…¶ä»–ä»£ç ï¼Œå®ƒä»¬ä¸ä¼šç­‰åˆ°è„šæœ¬åŠ è½½å®Œæˆæ‰æ‰§è¡Œ</span></code></pre></div>
<p>å‡è®¾éœ€è¦åœ¨æ–°è„šæœ¬åŠ è½½åç«‹å³ä½¿ç”¨å®ƒï¼Œè¿™å°†ä¸ä¼šæœ‰æ•ˆï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/my/script.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¸ªè„šæœ¬æœ‰ "function newFunction() {â€¦}"</span>

<span class="token function">newFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼</span></code></pre></div>
<p>ğŸ˜­ åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒloadScript å‡½æ•°å¹¶æ²¡æœ‰æä¾›è·Ÿè¸ªåŠ è½½å®Œæˆçš„æ–¹æ³•ã€‚è„šæœ¬åŠ è½½å¹¶æœ€ç»ˆè¿è¡Œï¼Œä»…æ­¤è€Œå·²ã€‚ä½†æ˜¯å¸Œæœ›äº†è§£è„šæœ¬ä½•æ—¶åŠ è½½å®Œæˆï¼Œä»¥ä½¿ç”¨å…¶ä¸­çš„æ–°å‡½æ•°å’Œå˜é‡</p>
<p>ğŸ’¡ æ·»åŠ ä¸€ä¸ª callback å‡½æ•°ä½œä¸º loadScript çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‡½æ•°åº”åœ¨è„šæœ¬åŠ è½½å®Œæˆæ—¶æ‰§è¡Œï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">loadScript</span><span class="token punctuation">(</span>
  <span class="token string">"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨è„šæœ¬åŠ è½½å®Œæˆåï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œ</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Cool, the script </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>script<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is loaded</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€åŠ è½½çš„è„šæœ¬ä¸­å£°æ˜çš„å‡½æ•°</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>â€<code class="language-text">''è¿™å°±æ˜¯è¢«ç§°ä¸ºâ€œåŸºäºå›è°ƒâ€çš„å¼‚æ­¥ç¼–ç¨‹é£æ ¼''</code>â€:å¼‚æ­¥æ‰§è¡ŒæŸé¡¹åŠŸèƒ½çš„å‡½æ•°åº”è¯¥æä¾›ä¸€ä¸ª callback å‚æ•°ç”¨äºåœ¨ç›¸åº”äº‹ä»¶å®Œæˆæ—¶è°ƒç”¨</p>
<p>ğŸš© å›è°ƒåœ°ç‹±</p>
<p>å¦‚ä½•ä¾æ¬¡åŠ è½½ä¸¤ä¸ªè„šæœ¬ï¼šç¬¬ä¸€ä¸ªï¼Œç„¶åæ˜¯ç¬¬äºŒä¸ªï¼Ÿç¬¬ä¸‰ä¸ªï¼Ÿ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/my/script.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/my/script2.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/my/script3.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...åŠ è½½å®Œæ‰€æœ‰è„šæœ¬åç»§ç»­</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>åŠ å…¥å¤„ç† Errorï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"1.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"2.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"3.js"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...åŠ è½½å®Œæ‰€æœ‰è„šæœ¬åç»§ç»­ (*)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™å°±æ˜¯è‘—åçš„â€œ<code class="language-text">''å›è°ƒåœ°ç‹±''</code>â€æˆ–â€œå„è¿é‡‘å­—å¡”â€</p>
<p>ğŸ’¡ å¯ä»¥é€šè¿‡ä½¿æ¯ä¸ªè¡Œä¸ºéƒ½æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°æ¥å°è¯•å‡è½»è¿™ç§é—®é¢˜</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"1.js"</span><span class="token punctuation">,</span> step1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">step1</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"2.js"</span><span class="token punctuation">,</span> step2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">step2</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"3.js"</span><span class="token punctuation">,</span> step3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">step3</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handleError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...åŠ è½½å®Œæ‰€æœ‰è„šæœ¬åç»§ç»­ (*)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ä¼˜ç¼ºç‚¹</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æ²¡æœ‰æ·±å±‚çš„åµŒå¥—ï¼Œç‹¬ç«‹ä¸ºé¡¶å±‚å‡½æ•°

- å¯è¯»æ€§å·®

- æ²¡æœ‰é‡ç”¨</code></pre></div>
<p>æœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ â€œ<code class="language-text">''promise''</code>â€</p>
<h2>Promise</h2>
<p>ğŸš© è¯­æ³•</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// executor</span>
  <span class="token comment">// å½“ promise è¢«æ„é€ å®Œæˆæ—¶ï¼Œexecutorè‡ªåŠ¨æ‰§è¡Œæ­¤å‡½æ•°</span>
  <span class="token comment">// executor é€šå¸¸æ˜¯å¼‚æ­¥ä»»åŠ¡</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// handler</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token number">1.</span>å½“ <span class="token keyword">new</span> <span class="token class-name">Promise</span> è¢«åˆ›å»ºï¼Œexecutor è¢«è‡ªåŠ¨ä¸”ç«‹å³è°ƒç”¨

<span class="token number">2.</span>ç”± <span class="token keyword">new</span> <span class="token class-name">Promise</span> æ„é€ å™¨è¿”å›çš„ promise å¯¹è±¡å…·æœ‰ä»¥ä¸‹ã€å†…éƒ¨å±æ€§ã€‘

    <span class="token operator">-</span> state â€” æœ€åˆæ˜¯ <span class="token string">"pending"</span>ï¼Œç„¶ååœ¨ resolve è¢«è°ƒç”¨æ—¶å˜ä¸º <span class="token string">"fulfilled"</span>ï¼Œæˆ–è€…åœ¨ reject è¢«è°ƒç”¨æ—¶å˜ä¸º <span class="token string">"rejected"</span>

    <span class="token operator">-</span> result â€” æœ€åˆæ˜¯ <span class="token keyword">undefined</span>ï¼Œç„¶ååœ¨ <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> è¢«è°ƒç”¨æ—¶å˜ä¸º valueï¼Œæˆ–è€…åœ¨ <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> è¢«è°ƒç”¨æ—¶å˜ä¸º error

<span class="token number">3.</span>ä¸æœ€åˆçš„ â€œpendingâ€ promise ç›¸åï¼Œä¸€ä¸ª resolved æˆ– rejected çš„ promise éƒ½ä¼šè¢«ç§°ä¸º â€œsettledâ€

<span class="token number">4.</span>executor åªèƒ½è°ƒç”¨ä¸€ä¸ª resolve æˆ–ä¸€ä¸ª rejectï¼›ä»»ä½•çŠ¶æ€çš„æ›´æ”¹éƒ½æ˜¯æœ€ç»ˆçš„ï¼ˆä¸å¯é€†ï¼‰</code></pre></div>
<p>ğŸš© ç«‹å³ resolve/reject çš„ Promise</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// executor é€šå¸¸æ˜¯å¼‚æ­¥æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå¹¶åœ¨ä¸€æ®µæ—¶é—´åè°ƒç”¨ resolve/rejectï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ï¼›è¿˜å¯ä»¥ç«‹å³è°ƒç”¨ resolve æˆ– reject</span>

<span class="token comment">// ğŸ’¡å½“å¼€å§‹åšä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œä½†éšåçœ‹åˆ°ä¸€åˆ‡éƒ½å·²ç»å®Œæˆå¹¶å·²è¢«ç¼“å­˜æ—¶ï¼Œå¯èƒ½å°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚è¿™æŒºå¥½ğŸ˜€</span>

<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸èŠ±æ—¶é—´å»åšè¿™é¡¹å·¥ä½œ</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç«‹å³ç»™å‡ºç»“æœï¼š123</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© ç¤ºä¾‹ï¼šåŠ è½½è„šæœ¬çš„ loadScript å‡½æ•°</p>
<p>åŸºäºå›è°ƒå‡½æ•°çš„å˜ä½“ç‰ˆæœ¬ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>

  script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Script load error for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç”¨æ³•ï¼š</span>

<span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">'https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js'</span><span class="token punctuation">,</span> <span class="token parameter">script</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨è„šæœ¬åŠ è½½å®Œæˆåï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œ</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>script<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is loaded!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>ï¼›
  <span class="token function">alert</span><span class="token punctuation">(</span> _ <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€åŠ è½½çš„è„šæœ¬ä¸­å£°æ˜çš„å‡½æ•°</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>åŸºäº Promise é‡å†™çš„ç‰ˆæœ¬ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>

    script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Script load error for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç”¨æ³•ï¼š</span>

<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token function">loadScript</span><span class="token punctuation">(</span>
  <span class="token string">"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>script<span class="token punctuation">.</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is loaded!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Another handler..."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Promise é“¾</h2>
<p>ğŸš©Promise é“¾ï¼šå›å¿†å›è°ƒä¸­ï¼Œä½•ä¾æ¬¡åŠ è½½ä¸¤ä¸ªè„šæœ¬ï¼šç¬¬ä¸€ä¸ªï¼Œç„¶åæ˜¯ç¬¬äºŒä¸ªï¼Ÿç¬¬ä¸‰ä¸ªï¼Ÿ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ’¡Promise æä¾›äº†ä¸€äº›æ–¹æ¡ˆæ¥åšåˆ°è¿™ä¸€ç‚¹ï¼šPromise é“¾</span>

<span class="token comment">// like this</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (**)</span>

    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
    <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (***)</span>

    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
    <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
    <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ“Œä¸ºä»€ä¹ˆå¯ä»¥ï¼Ÿå› ä¸ºå¯¹ promise.then çš„è°ƒç”¨ä¼šè¿”å›äº†ä¸€ä¸ª promiseï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¹‹ä¸Šè°ƒç”¨ä¸‹ä¸€ä¸ª .then</span>

<span class="token comment">// å½“å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œå®ƒå°†æˆä¸ºè¯¥ promise çš„ resultï¼Œæ‰€ä»¥å°†ä½¿ç”¨å®ƒè°ƒç”¨ä¸‹ä¸€ä¸ª .then</span>

<span class="token comment">// ğŸ’£''æ–°æ‰‹å¸¸çŠ¯çš„ä¸€ä¸ªç»å…¸é”™è¯¯ï¼šä»æŠ€æœ¯ä¸Šè®²ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å¤šä¸ª .then æ·»åŠ åˆ°ä¸€ä¸ª promise ä¸Šã€‚ä½†è¿™å¹¶ä¸æ˜¯ promise é“¾ï¼ˆchainingï¼‰''</span>

<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
  <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
  <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
  <span class="token keyword">return</span> result <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡è¿™é‡Œæ‰€åšçš„åªæ˜¯ä¸€ä¸ª promise çš„å‡ ä¸ªå¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚å®ƒä»¬ä¸ä¼šç›¸äº’ä¼ é€’ resultï¼›ç›¸åï¼Œå®ƒä»¬ä¹‹é—´å½¼æ­¤ç‹¬ç«‹è¿è¡Œå¤„ç†ä»»åŠ¡</span></code></pre></div>
<p>ğŸš© è¿”å› promise</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- .then(handler) ä¸­æ‰€ä½¿ç”¨çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰å¯ä»¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª promise

- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶ä»–çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰å°†ã€ç­‰å¾…å®ƒ settled åå†è·å¾—å…¶ç»“æœï¼ˆresultï¼‰ã€‘</code></pre></div>
<p>ç¤ºä¾‹ï¼špromise åŒ–çš„ loadScript</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/one.js"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/two.js"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/three.js"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// è„šæœ¬åŠ è½½å®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å„¿ä½¿ç”¨è„šæœ¬ä¸­å£°æ˜çš„å‡½æ•°</span>
    <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">three</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡æ³¨æ„ï¼šè¿™å„¿æ¯ä¸ª loadScript è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ª promiseï¼Œå¹¶ä¸”åœ¨å®ƒ resolve æ—¶ä¸‹ä¸€ä¸ª .then å¼€å§‹è¿è¡Œã€‚ç„¶åï¼Œå®ƒå¯åŠ¨ä¸‹ä¸€ä¸ªè„šæœ¬çš„åŠ è½½ã€‚æ‰€ä»¥ï¼Œè„šæœ¬æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åŠ è½½çš„</span>

<span class="token comment">// ğŸ’¡å¹¶ä¸”ä»£ç ä»ç„¶æ˜¯â€œæ‰å¹³â€çš„ â€” å®ƒå‘ä¸‹å¢é•¿ï¼Œè€Œä¸æ˜¯å‘å³</span>

<span class="token comment">// ...</span>

<span class="token comment">// ä»æŠ€æœ¯ä¸Šè®²ï¼Œå¯ä»¥å‘æ¯ä¸ª loadScript ç›´æ¥æ·»åŠ  .thenï¼Œå°±åƒè¿™æ ·ï¼š</span>

<span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/one.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script1</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/two.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/three.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">script3</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// æ­¤å‡½æ•°å¯ä»¥è®¿é—®å˜é‡ script1ï¼Œscript2 å’Œ script3</span>
      <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">three</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡è¿™æ®µä»£ç åšäº†ç›¸åŒçš„äº‹å„¿ï¼šæŒ‰é¡ºåºåŠ è½½ 3 ä¸ªè„šæœ¬ã€‚ä½†å®ƒæ˜¯â€œå‘å³å¢é•¿â€çš„ã€‚æ‰€ä»¥ä¼šæœ‰å’Œä½¿ç”¨å›è°ƒå‡½æ•°ä¸€æ ·çš„é—®é¢˜</span>

<span class="token comment">// ğŸ‘åˆšå¼€å§‹ä½¿ç”¨ promise çš„äººå¯èƒ½ä¸çŸ¥é“ promise é“¾ï¼Œæ‰€ä»¥ä»–ä»¬å°±è¿™æ ·å†™äº†ã€‚é€šå¸¸ï¼Œé“¾å¼æ˜¯é¦–é€‰</span></code></pre></div>
<p>ğŸš©Thenables</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ç¡®åˆ‡åœ°è¯´ï¼Œå¤„ç†ç¨‹åºï¼ˆhandlerï¼‰è¿”å›çš„ä¸å®Œå…¨æ˜¯ä¸€ä¸ª promiseï¼Œè€Œæ˜¯è¿”å›çš„è¢«ç§°ä¸º â€œthenableâ€ å¯¹è±¡ â€” ä¸€ä¸ªå…·æœ‰æ–¹æ³• .then çš„ä»»æ„å¯¹è±¡

- thenableå¯¹è±¡ä¼šè¢«å½“åšä¸€ä¸ª promise æ¥å¯¹å¾…

- è¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œç¬¬ä¸‰æ–¹åº“å¯ä»¥å®ç°è‡ªå·±çš„â€œpromise å…¼å®¹ï¼ˆpromise-compatibleï¼‰â€å¯¹è±¡ï¼›å®ƒä»¬å¯ä»¥å…·æœ‰æ‰©å±•çš„æ–¹æ³•é›†ï¼Œä½†ä¹Ÿä¸åŸç”Ÿçš„ promise å…¼å®¹ï¼Œå› ä¸ºå®ƒä»¬å®ç°äº† .then æ–¹æ³•


- è¿™ä¸ªç‰¹æ€§å…è®¸å°†è‡ªå®šä¹‰çš„å¯¹è±¡ä¸ promise é“¾é›†æˆåœ¨ä¸€èµ·ï¼Œè€Œä¸å¿…ç»§æ‰¿è‡ª Promise</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Thenable</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function() { native code }</span>
    <span class="token comment">// 1 ç§’åä½¿ç”¨ this.num*2 è¿›è¡Œ resolve</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (**)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Thenable</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1000ms åæ˜¾ç¤º 2</span></code></pre></div>
<p>ğŸš© ä½œä¸ºä¸€ä¸ªå¥½çš„åšæ³•ï¼šå¼‚æ­¥è¡Œä¸ºåº”è¯¥å§‹ç»ˆè¿”å›ä¸€ä¸ª promise</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è¿™æ ·å°±å¯ä»¥ä½¿å¾—ä¹‹åè®¡åˆ’åç»­çš„è¡Œä¸ºæˆä¸ºå¯èƒ½

- å³ä½¿ç°åœ¨ä¸æ‰“ç®—å¯¹é“¾è¿›è¡Œæ‰©å±•ï¼Œä½†ä¹‹åå¯èƒ½ä¼šéœ€è¦</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadJson</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">loadGithubUser</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.github.com/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showAvatar</span><span class="token punctuation">(</span><span class="token parameter">githubUser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> githubUser<span class="token punctuation">.</span>avatar_url<span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"promise-avatar-example"</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      img<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>githubUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨å®ƒä»¬ï¼š</span>
<span class="token function">loadJson</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/user.json"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">loadGithubUser</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>showAvatar<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">githubUser</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Finished showing </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>githubUser<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre></div>
<h2>ä½¿ç”¨ promise è¿›è¡Œé”™è¯¯å¤„ç†</h2>
<p>ğŸš©Promise é“¾åœ¨é”™è¯¯ï¼ˆerrorï¼‰å¤„ç†</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å½“ä¸€ä¸ª promise è¢« reject æ—¶ï¼Œæ§åˆ¶æƒå°†ç§»äº¤è‡³æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰;è¿™åœ¨å®é™…å¼€å‘ä¸­éå¸¸æ–¹ä¾¿

- .catch ä¸å¿…æ˜¯ç«‹å³çš„;å®ƒå¯èƒ½åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª .then ä¹‹åå‡ºç°</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/article/promise-chaining/user.json"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.github.com/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">githubUser</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> githubUser<span class="token punctuation">.</span>avatar_url<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"promise-avatar-example"</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          img<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>githubUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© éšå¼ tryâ€¦catch</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Promise çš„æ‰§è¡Œè€…ï¼ˆexecutorï¼‰å’Œ promise çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰å‘¨å›´æœ‰ä¸€ä¸ªâ€œéšå¼çš„ try..catchâ€

- å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œå®ƒï¼ˆè¯‘æ³¨ï¼šæŒ‡å¼‚å¸¸ï¼‰å°±ä¼šè¢«æ•è·ï¼Œå¹¶è¢«è§†ä¸º rejection è¿›è¡Œå¤„ç†</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// excutor ä¸­</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Whoops!</span>

<span class="token comment">// ç­‰åŒäº</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Whoops!</span>

<span class="token comment">// ...</span>

<span class="token comment">// handler ä¸­</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"ok"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reject è¿™ä¸ª promise</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Whoops!</span></code></pre></div>
<p>ğŸš© å†æ¬¡æŠ›å‡ºï¼ˆRethrowingï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¦‚æœåœ¨ .catch ä¸­ throwï¼Œé‚£ä¹ˆæ§åˆ¶æƒå°±ä¼šè¢«ç§»äº¤åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘çš„ error å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚å¦‚æœå¤„ç†è¯¥ error å¹¶æ­£å¸¸å®Œæˆï¼Œé‚£ä¹ˆå®ƒå°†ç»§ç»­åˆ°æœ€è¿‘çš„æˆåŠŸçš„ .then å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æ‰§è¡Œæµï¼šcatch -> then</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"The error is handled, continue normally"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Next successful handler runs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æ‰§è¡Œæµï¼šcatch -> catch</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (*)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">URIError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¤„ç†å®ƒ</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Can't handle such error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">throw</span> error<span class="token punctuation">;</span> <span class="token comment">// å†æ¬¡æŠ›å‡ºæ­¤ error æˆ–å¦å¤–ä¸€ä¸ª errorï¼Œæ‰§è¡Œå°†è·³è½¬è‡³ä¸‹ä¸€ä¸ª catch</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ä¸åœ¨è¿™é‡Œè¿è¡Œ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// (**)</span>

    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The unknown error has occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸ä¼šè¿”å›ä»»ä½•å†…å®¹ => æ‰§è¡Œæ­£å¸¸è¿›è¡Œ</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš© æœªå¤„ç†çš„ rejection</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">noSuchFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œå‡ºç° errorï¼ˆæ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼‰</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸€ä¸ªæˆ–å¤šä¸ªæˆåŠŸçš„ promise å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°¾ç«¯æ²¡æœ‰ .catchï¼</span>

<span class="token comment">// ...</span>

<span class="token comment">// å½“ä¸€ä¸ª error æ²¡æœ‰è¢«å¤„ç†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span>

<span class="token comment">// ğŸ’¡å¦‚æœå‡ºç° errorï¼Œpromise çš„çŠ¶æ€å°†å˜ä¸º â€œrejectedâ€ï¼Œç„¶åæ‰§è¡Œåº”è¯¥è·³è½¬è‡³æœ€è¿‘çš„ rejection å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚ä½†æ˜¯ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­å¹¶æ²¡æœ‰è¿™æ ·çš„å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚å› æ­¤ error ä¼šâ€œå¡ä½ï¼ˆstuckï¼‰â€ã€‚æ²¡æœ‰ä»£ç æ¥å¤„ç†å®ƒ</span>

<span class="token comment">// åœ¨å®é™…å¼€å‘ä¸­ï¼Œå°±åƒä»£ç ä¸­å¸¸è§„çš„æœªå¤„ç†çš„ error ä¸€æ ·ï¼Œè¿™æ„å‘³ç€æŸäº›ä¸œè¥¿å‡ºäº†é—®é¢˜</span>

<span class="token comment">// å½“å‘ç”Ÿä¸€ä¸ªå¸¸è§„çš„é”™è¯¯ï¼ˆerrorï¼‰å¹¶ä¸”æœªè¢« try..catch æ•è·æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè„šæœ¬æ­»äº†ï¼Œå¹¶åœ¨æ§åˆ¶å°ï¼ˆconsoleï¼‰ä¸­ç•™ä¸‹äº†ä¸€ä¸ªä¿¡æ¯ã€‚å¯¹äºåœ¨ promise ä¸­æœªè¢«å¤„ç†çš„ rejectionï¼Œä¹Ÿä¼šå‘ç”Ÿç±»ä¼¼çš„äº‹å„¿</span></code></pre></div>
<p>JavaScript å¼•æ“ä¼šè·Ÿè¸ªæ­¤ç±» rejectionï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šç”Ÿæˆä¸€ä¸ªå…¨å±€çš„ error</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ unhandledrejection äº‹ä»¶æ¥æ•è·è¿™ç±» error</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"unhandledrejection"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™ä¸ªäº‹ä»¶å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Promise] - ç”Ÿæˆè¯¥å…¨å±€ error çš„ promise</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Whoops! - æœªå¤„ç†çš„ error å¯¹è±¡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ²¡æœ‰ç”¨æ¥å¤„ç† error çš„ catch</span></code></pre></div>
<h2>Promise API</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨ Promise ç±»ä¸­ï¼Œæœ‰ 5 ç§é™æ€æ–¹æ³•

- Promise.all([iterable])

- Promise.allSettled([iterable])

- Promise.race([iterable])

- Promise.resolve()

- Promise.reject()</code></pre></div>
<p>ğŸš©Promise.all</p>
<p>è¯­æ³•</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// æ¥å—ä¸€ä¸ª promise æ•°ç»„(å¯ä»¥æ˜¯ä»»ä½•å¯è¿­ä»£çš„)ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ promise</span>

<span class="token keyword">let</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>iterable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>æ³¨æ„</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¹¶è¡Œæ‰§è¡Œå¤šä¸ª promiseï¼Œå½“æ‰€æœ‰ç»™å®šçš„ promise éƒ½è¢« æˆåŠŸ æ—¶ï¼Œæ–°çš„ promise æ‰ä¼š resolveï¼Œå¹¶ä¸”å…¶ç»“æœæ•°ç»„å°†æˆä¸ºæ–°çš„ promise çš„ç»“æœ

- ç»“æœæ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºä¸å…¶åœ¨æº promise ä¸­çš„é¡ºåºç›¸åŒ(å³ä½¿ç¬¬ä¸€ä¸ª promise èŠ±è´¹äº†æœ€é•¿çš„æ—¶é—´)

- å¦‚æœä»»æ„ä¸€ä¸ª promise è¢« rejectï¼Œç”± Promise.all è¿”å›çš„ promise å°±ä¼šç«‹å³ rejectï¼Œå¹¶ä¸”å¸¦æœ‰çš„å°±æ˜¯è¿™ä¸ª error</code></pre></div>
<p>ğŸš© å¦‚æœå‡ºç° errorï¼Œå…¶ä»– promise å°†è¢«å¿½ç•¥</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¦‚æœå…¶ä¸­ä¸€ä¸ª promise è¢« rejectï¼ŒPromise.all å°±ä¼šç«‹å³è¢« rejectï¼Œå®Œå…¨å¿½ç•¥åˆ—è¡¨ä¸­å…¶ä»–çš„ promiseã€‚å®ƒä»¬çš„ç»“æœä¹Ÿè¢«å¿½ç•¥

- ä¾‹å¦‚ï¼Œå¦‚æœæœ‰å¤šä¸ªåŒæ—¶è¿›è¡Œçš„ fetch è°ƒç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªå¤±è´¥ï¼Œå…¶ä»–çš„ fetch æ“ä½œä»ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ Promise.all å°†ä¸ä¼šå†å…³å¿ƒï¼ˆwatchï¼‰å®ƒä»¬ã€‚å®ƒä»¬å¯èƒ½ä¼š settleï¼Œä½†æ˜¯å®ƒä»¬çš„ç»“æœå°†è¢«å¿½ç•¥

- Promise.all æ²¡æœ‰é‡‡å–ä»»ä½•æªæ–½æ¥å–æ¶ˆå®ƒä»¬ï¼Œå› ä¸º promise ä¸­æ²¡æœ‰â€œå–æ¶ˆâ€çš„æ¦‚å¿µ</code></pre></div>
<p>ğŸš©Promise.all(iterable) å…è®¸åœ¨ iterable ä¸­ä½¿ç”¨ non-promise çš„â€œå¸¸è§„â€å€¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// romise.all(...) æ¥å—å«æœ‰ promise é¡¹çš„å¯è¿­ä»£å¯¹è±¡ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ•°ç»„ï¼‰ä½œä¸ºå‚æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™äº›å¯¹è±¡ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸æ˜¯ promiseï¼Œé‚£ä¹ˆå®ƒå°†è¢«â€œæŒ‰åŸæ ·â€ä¼ é€’ç»™ç»“æœæ•°ç»„</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 2, 3</span></code></pre></div>
<p>ğŸš©Promise.allSettled</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Promise<span class="token punctuation">.</span>allSettled ç­‰å¾…æ‰€æœ‰çš„ promise éƒ½è¢« settleï¼Œæ— è®ºç»“æœå¦‚ä½•ï¼Œç»“æœæ•°ç»„å…·æœ‰<span class="token operator">:</span>

<span class="token operator">-</span> <span class="token punctuation">{</span>status<span class="token operator">:</span><span class="token string">"fulfilled"</span><span class="token punctuation">,</span> value<span class="token operator">:</span>result<span class="token punctuation">}</span> å¯¹äºæˆåŠŸçš„å“åº”

<span class="token operator">-</span> <span class="token punctuation">{</span>status<span class="token operator">:</span><span class="token string">"rejected"</span><span class="token punctuation">,</span> reason<span class="token operator">:</span>error<span class="token punctuation">}</span> å¯¹äº error</code></pre></div>
<p>Polyfill</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Promise<span class="token punctuation">.</span>allSettled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">rejectHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">"rejected"</span><span class="token punctuation">,</span> reason <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">resolveHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">"fulfilled"</span><span class="token punctuation">,</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Promise<span class="token punctuation">.</span><span class="token function-variable function">allSettled</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> convertedPromises <span class="token operator">=</span> promises<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolveHandler<span class="token punctuation">,</span> rejectHandler<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>convertedPromises<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš©Promise.race</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åªç­‰å¾…ç¬¬ä¸€ä¸ª settled çš„ promise å¹¶è·å–å…¶ç»“æœï¼ˆæˆ– errorï¼‰</code></pre></div>
<p>ç¤ºä¾‹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span></code></pre></div>
<p>ğŸš©Promise.resolve/reject</p>
<p>è¯­æ³•</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ç»“æœ value åˆ›å»ºä¸€ä¸ª resolved çš„ promise</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç­‰åŒäº</span>

<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

<span class="token comment">// Promise.reject() ç±»ä¼¼</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å½“ä¸€ä¸ªå‡½æ•°è¢«æœŸæœ›è¿”å›ä¸€ä¸ª promise æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºå…¼å®¹æ€§

- ğŸ’¡è¿™é‡Œçš„å…¼å®¹æ€§æ˜¯æŒ‡ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–äº†å½“å‰æ“ä½œçš„ç»“æœ valueï¼Œä½†æ˜¯æœŸæœ›è¿”å›çš„æ˜¯ä¸€ä¸ª promiseï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ Promise.resolve(value) å°† value â€œå°è£…â€è¿› promiseï¼Œä»¥æ»¡è¶³æœŸæœ›è¿”å›ä¸€ä¸ª promise çš„è¿™ä¸ªéœ€æ±‚</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loadCached</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ’¡å¯ä»¥ä½¿ç”¨ loadCached(url).then(â€¦)ï¼Œå› ä¸ºè¯¥å‡½æ•°ä¿è¯äº†ä¼šè¿”å›ä¸€ä¸ª promiseã€‚å¯ä»¥æ”¾å¿ƒåœ°åœ¨ loadCached åé¢ä½¿ç”¨ .thenã€‚è¿™å°±æ˜¯ (*) è¡Œä¸­ Promise.resolve çš„ç›®çš„</span></code></pre></div>
<h2>Promisification</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- â€œPromisificationâ€ æŒ‡å°†ä¸€ä¸ªæ¥å—å›è°ƒçš„å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªè¿”å› promise çš„å‡½æ•°

- ç”±äºè®¸å¤šå‡½æ•°å’Œåº“éƒ½æ˜¯åŸºäºå›è°ƒçš„ï¼Œæ‰€ä»¥å°†åŸºäºå›è°ƒçš„å‡½æ•°å’Œåº“ promisify æ˜¯æœ‰æ„ä¹‰çš„</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>

  script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Script load error for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç”¨æ³•ï¼š</span>
<span class="token comment">// loadScript('path/script.js', (err, script) => {...})</span>

<span class="token comment">// ...</span>

<span class="token comment">// promisify</span>

<span class="token keyword">let</span> <span class="token function-variable function">loadScriptPromise</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">loadScript</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token function">resolve</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç”¨æ³•ï¼š</span>
<span class="token comment">// loadScriptPromise('path/script.js').then(...)</span></code></pre></div>
<p>æ–°çš„å‡½æ•°æ˜¯å¯¹åŸå§‹çš„ loadScript å‡½æ•°çš„åŒ…è£…,åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½éœ€è¦ promisify å¾ˆå¤šå‡½æ•°</p>
<p>ğŸš©promisify</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">promisify</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¿”å›ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼ˆwrapper-functionï¼‰ (*)</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¯¹ f çš„è‡ªå®šä¹‰çš„å›è°ƒ (**)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è‡ªå®šä¹‰çš„å›è°ƒé™„åŠ åˆ° f å‚æ•°ï¼ˆargumentsï¼‰çš„æœ«å°¾</span>

      <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨åŸå§‹çš„å‡½æ•°</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç”¨æ³•ï¼š</span>
<span class="token keyword">let</span> loadScriptPromise <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>loadScript<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">loadScriptPromise</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš©promisification å‡½æ•°çš„æ¨¡å—ï¼ˆmoduleï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- https://github.com/digitaldesignlabs/es6-promisify

- åœ¨ Node.js ä¸­ï¼Œæœ‰ä¸€ä¸ªå†…å»ºçš„ promisify å‡½æ•° util.promisify</code></pre></div>
<p>ğŸš©Promisification åœºæ™¯</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Promisification ä¸æ˜¯å›è°ƒçš„å®Œå…¨æ›¿ä»£

- è¯·è®°ä½ï¼Œä¸€ä¸ª promise å¯èƒ½åªæœ‰ä¸€ä¸ªç»“æœï¼Œä½†ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¸€ä¸ªå›è°ƒå¯èƒ½è¢«è°ƒç”¨å¾ˆå¤šæ¬¡

- å› æ­¤ï¼Œpromisification ä»…é€‚ç”¨äºè°ƒç”¨ä¸€æ¬¡å›è°ƒçš„å‡½æ•°ã€‚è¿›ä¸€æ­¥çš„è°ƒç”¨å°†è¢«å¿½ç•¥</code></pre></div>
<h2>å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Promise å¤„ç†å§‹ç»ˆæ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤ï¼Œ.then/catch/finally å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰æ€»æ˜¯åœ¨å½“å‰ä»£ç å®Œæˆåæ‰ä¼šè¢«è°ƒç”¨

- æ‰€æœ‰ promise è¡Œä¸ºéƒ½ä¼šé€šè¿‡å†…éƒ¨çš„ â€œpromise jobsâ€ é˜Ÿåˆ—ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œå¾®ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆES8 æœ¯è¯­

- å¦‚æœéœ€è¦ç¡®ä¿ä¸€æ®µä»£ç åœ¨ .then/catch/finally ä¹‹åè¢«æ‰§è¡Œï¼Œå¯ä»¥å°†å®ƒæ·»åŠ åˆ°é“¾å¼è°ƒç”¨çš„ .then ä¸­</code></pre></div>
<h2>async/await</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- async/await æ˜¯ä»¥æ›´èˆ’é€‚çš„æ–¹å¼ä½¿ç”¨ promise çš„ä¸€ç§ç‰¹æ®Šè¯­æ³•ï¼ŒåŒæ—¶å®ƒä¹Ÿéå¸¸æ˜“äºç†è§£å’Œä½¿ç”¨

- async/awaitä¸¤ä¸ªå…³é”®å­—ä¸€èµ·æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„ç”¨æ¥ç¼–å†™å¼‚æ­¥ä»£ç çš„æ¡†æ¶ï¼Œè¿™ç§ä»£ç æ˜“äºé˜…è¯»ä¹Ÿæ˜“äºç¼–å†™

- æœ‰äº† async/await ä¹‹åï¼Œå°±å‡ ä¹ä¸éœ€è¦ä½¿ç”¨ promise.then/catchï¼Œä½†æ˜¯ä¸è¦å¿˜äº†å®ƒä»¬æ˜¯åŸºäº promise çš„ï¼Œå› ä¸ºæœ‰äº›æ—¶å€™ï¼ˆä¾‹å¦‚åœ¨æœ€å¤–å±‚ä½œç”¨åŸŸï¼‰ä¸å¾—ä¸ä½¿ç”¨è¿™äº›æ–¹æ³•</code></pre></div>
<p>ğŸš© async æœ‰ä¸¤ä¸ªä½œç”¨</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token number">1.</span>è®©è¿™ä¸ªå‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ª promiseï¼›å…¶ä»–å€¼å°†è‡ªåŠ¨è¢«åŒ…è£…åœ¨ä¸€ä¸ª resolved çš„ promise ä¸­

<span class="token number">2.</span>å…è®¸åœ¨è¯¥å‡½æ•°å†…ä½¿ç”¨ <span class="token keyword">await</span></code></pre></div>
<p>ğŸš©await</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Promise å‰çš„å…³é”®å­— <span class="token keyword">await</span> ä½¿ JavaScript å¼•æ“ç­‰å¾…è¯¥ promise settleï¼Œç„¶åï¼š

<span class="token operator">-</span> å¦‚æœæœ‰ errorï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ â€” å°±åƒé‚£é‡Œè°ƒç”¨äº† <span class="token keyword">throw</span> error ä¸€æ ·

<span class="token operator">-</span> å¦åˆ™ï¼Œå°±è¿”å›ç»“æœ</code></pre></div>
<p>ç¤ºä¾‹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"done!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> promise<span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…ï¼Œç›´åˆ° promise resolve (*)</span>

  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "done!"</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡(*) é‚£ä¸€è¡Œï¼šawait å®é™…ä¸Šä¼šæš‚åœå‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ° promise çŠ¶æ€å˜ä¸º settledï¼Œç„¶åä»¥ promise çš„ç»“æœç»§ç»­æ‰§è¡Œ</span></code></pre></div>
<p>ğŸš©await ä¸èƒ½åœ¨é¡¶å±‚ä»£ç è¿è¡Œ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ç”¨åœ¨é¡¶å±‚ä»£ç ä¸­ä¼šæŠ¥è¯­æ³•é”™è¯¯</span>
<span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/article/promise-chaining/user.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token comment">// ä½†å¯ä»¥å°†å…¶åŒ…è£¹åœ¨ä¸€ä¸ªåŒ¿å async å‡½æ•°ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/article/promise-chaining/user.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ğŸš©await æ¥å— â€œthenablesâ€</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ’¡åƒ promise.then é‚£æ ·ï¼Œawait å…è®¸ä½¿ç”¨ thenable å¯¹è±¡ï¼ˆé‚£äº›å…·æœ‰å¯è°ƒç”¨çš„ then æ–¹æ³•çš„å¯¹è±¡ï¼‰ã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯ï¼Œç¬¬ä¸‰æ–¹å¯¹è±¡å¯èƒ½ä¸æ˜¯ä¸€ä¸ª promiseï¼Œä½†å´æ˜¯ promise å…¼å®¹çš„ï¼šå¦‚æœè¿™äº›å¯¹è±¡æ”¯æŒ .thenï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å®ƒä»¬ä½¿ç”¨ await</span>

<span class="token keyword">class</span> <span class="token class-name">Thenable</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1000ms åä½¿ç”¨ this.num*2 è¿›è¡Œ resolve</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç­‰å¾… 1 ç§’ï¼Œä¹‹å result å˜ä¸º 2</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Thenable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¦‚æœ await æ¥æ”¶äº†ä¸€ä¸ªé promise çš„ä½†æ˜¯æä¾›äº† .then æ–¹æ³•çš„å¯¹è±¡ï¼Œå®ƒå°±ä¼šè°ƒç”¨è¿™ä¸ª .then æ–¹æ³•ï¼Œå¹¶å°†å†…å»ºçš„å‡½æ•° resolve å’Œ reject ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ˆå°±åƒå®ƒå¯¹å¾…ä¸€ä¸ªå¸¸è§„çš„ Promise executor æ—¶ä¸€æ ·ï¼‰ã€‚ç„¶å await ç­‰å¾…ç›´åˆ°è¿™ä¸¤ä¸ªå‡½æ•°ä¸­çš„æŸä¸ªè¢«è°ƒç”¨ï¼ˆåœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿåœ¨ (*) è¡Œï¼‰ï¼Œç„¶åä½¿ç”¨å¾—åˆ°çš„ç»“æœç»§ç»­æ‰§è¡Œåç»­ä»»åŠ¡</span></code></pre></div>
<p>ğŸš©Error å¤„ç†</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// å¦‚æœä¸€ä¸ª promise æ­£å¸¸ resolveï¼Œawait promise è¿”å›çš„å°±æ˜¯å…¶ç»“æœ</span>

<span class="token comment">// ä½†æ˜¯å¦‚æœ promise è¢« rejectï¼Œå®ƒå°† throw è¿™ä¸ª errorï¼Œå°±åƒåœ¨è¿™ä¸€è¡Œæœ‰ä¸€ä¸ª throw è¯­å¥é‚£æ ·</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç­‰åŒäº</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Whoops!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ‘å› æ­¤ï¼Œå¯ä»¥ç”¨ try..catch æ¥æ•è·ä¸Šé¢æåˆ°çš„é‚£ä¸ª errorï¼Œä¸å¸¸è§„çš„ throw ä½¿ç”¨çš„æ˜¯ä¸€æ ·çš„æ–¹å¼</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://no-such-url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: failed to fetch</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token comment">// ğŸ‘Œå¦‚æœæ²¡æœ‰ try..catchï¼Œé‚£ä¹ˆç”±å¼‚æ­¥å‡½æ•° f() çš„è°ƒç”¨ç”Ÿæˆçš„ promise å°†å˜ä¸º rejectedï¼›å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨åé¢æ·»åŠ  .catch æ¥å¤„ç†è¿™ä¸ª errorï¼š</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://no-such-url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// f() å˜æˆäº†ä¸€ä¸ª rejected çš„ promise</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: failed to fetch // (*)</span></code></pre></div>
<h2>Generator</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å¸¸è§„å‡½æ•°åªä¼šè¿”å›ä¸€ä¸ªå•ä¸€å€¼ï¼ˆæˆ–è€…ä¸è¿”å›ä»»ä½•å€¼ï¼‰

- è€Œ Generator å¯ä»¥æŒ‰éœ€ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿”å›ï¼ˆâ€œyieldâ€ï¼‰å¤šä¸ªå€¼

- å¯ä¸ iterable å®Œç¾é…åˆä½¿ç”¨ï¼Œä»è€Œå¯ä»¥è½»æ¾åœ°åˆ›å»ºæ•°æ®æµ</code></pre></div>
<p>ğŸš©Generator å‡½æ•°</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">generator çš„ä¸»è¦æ–¹æ³•å°±æ˜¯ next()

- å½“è¢«è°ƒç”¨æ—¶ï¼Œæ‰§è¡Œç›´åˆ°æœ€è¿‘çš„ yield &lt;value> è¯­å¥ï¼ˆvalue å¯ä»¥è¢«çœç•¥ï¼Œé»˜è®¤ä¸º undefinedï¼‰

- ç„¶åå‡½æ•°æ‰§è¡Œæš‚åœï¼Œå¹¶å°†äº§å‡ºçš„ï¼ˆyieldedï¼‰å€¼è¿”å›åˆ°å¤–éƒ¨ä»£ç </code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> generator <span class="token operator">=</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> one <span class="token operator">=</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>one<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 1, done: false}</span>

<span class="token keyword">let</span> two <span class="token operator">=</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>two<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 2, done: false}</span>

<span class="token keyword">let</span> three <span class="token operator">=</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>three<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 3, done: true}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">next() çš„ç»“æœå§‹ç»ˆæ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼š

- value: äº§å‡ºçš„ï¼ˆyieldedï¼‰çš„å€¼

- done: å¦‚æœ generator å‡½æ•°å·²æ‰§è¡Œå®Œæˆåˆ™ä¸º trueï¼Œå¦åˆ™ä¸º false</code></pre></div>
<p>ğŸš©Generator æ˜¯å¯è¿­ä»£çš„</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- generator å…·æœ‰ next() æ–¹æ³•ï¼Œ å› æ­¤generator æ˜¯ å¯è¿­ä»£ï¼ˆiterableï¼‰çš„

- å› æ­¤å¯ä»¥ä½¿ç”¨ iterator çš„æ‰€æœ‰ç›¸å…³åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šspread è¯­æ³• ...

ğŸ’¡next() æ˜¯ iterator çš„å¿…è¦æ–¹æ³•ï¼ˆå¯ä»¥ä½¿ç”¨ for..of å¾ªç¯éå†ï¼‰</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> generator <span class="token operator">=</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> generator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1ï¼Œç„¶åæ˜¯ 2</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ğŸš© ä½¿ç”¨ generator è¿›è¡Œè¿­ä»£</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ‘‰égenerator å‡½æ•°å®ç° Symbol.iterator</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token comment">// for..of range åœ¨ä¸€å¼€å§‹å°±è°ƒç”¨ä¸€æ¬¡è¿™ä¸ªæ–¹æ³•</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...å®ƒè¿”å› iterator objectï¼š</span>
    <span class="token comment">// åç»­çš„æ“ä½œä¸­ï¼Œfor..of å°†åªé’ˆå¯¹è¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ next() å‘å®ƒè¯·æ±‚ä¸‹ä¸€ä¸ªå€¼</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
      last<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>

      <span class="token comment">// for..of å¾ªç¯åœ¨æ¯æ¬¡è¿­ä»£æ—¶éƒ½ä¼šè°ƒç”¨ next()</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®ƒåº”è¯¥ä»¥å¯¹è±¡ {done:.., value :...} çš„å½¢å¼è¿”å›å€¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// è¿­ä»£æ•´ä¸ª range å¯¹è±¡ï¼Œè¿”å›ä» `range.from` åˆ° `range.to` èŒƒå›´çš„æ‰€æœ‰æ•°å­—</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>range<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5</span>

<span class="token comment">// ...</span>

<span class="token comment">// ğŸ‘‰generator å‡½æ•°å®ç° Symbol.iterator</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [Symbol.iterator]: function*() çš„ç®€å†™å½¢å¼</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span> value <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span> value<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>range<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5</span></code></pre></div>
<p>ğŸš©Generator ç»„åˆï¼ˆcompositionï¼‰</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- å°†ä¸€ä¸ª generator æµæ’å…¥åˆ°å¦ä¸€ä¸ª generator æµçš„è‡ªç„¶çš„æ–¹å¼</code></pre></div>
<p>ç¤ºä¾‹ï¼šæˆä¸€ä¸ªæ›´å¤æ‚çš„åºåˆ—ï¼šé¦–å…ˆæ˜¯æ•°å­— 0..9ï¼ˆå­—ç¬¦ä»£ç ä¸º 48â€¦57ï¼‰ï¼Œæ¥ä¸‹æ¥æ˜¯å¤§å†™å­—æ¯ A..Zï¼ˆå­—ç¬¦ä»£ç ä¸º 65â€¦90ï¼‰ï¼Œæ¥ä¸‹æ¥æ˜¯å°å†™å­—æ¯ aâ€¦zï¼ˆå­—ç¬¦ä»£ç ä¸º 97â€¦122ï¼‰</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ‘‰generator composition</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatePasswordCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 0..9</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// A..Z</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// a..z</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">122</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">of</span> <span class="token function">generatePasswordCodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str <span class="token operator">+=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0..9A..Za..z</span>

<span class="token comment">// ğŸ‘‰ç­‰åŒäº</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateAlphaNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// yield* generateSequence(48, 57);</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">48</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">57</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>

  <span class="token comment">// yield* generateSequence(65, 90);</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">90</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>

  <span class="token comment">// yield* generateSequence(97, 122);</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">97</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">122</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">of</span> <span class="token function">generateAlphaNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str <span class="token operator">+=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0..9A..Za..z</span></code></pre></div>
<p>ğŸš©â€œyieldâ€ æ˜¯ä¸€æ¡åŒå‘è·¯</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yield ä¸ä»…å¯ä»¥å‘å¤–è¿”å›ç»“æœï¼Œè€Œä¸”è¿˜å¯ä»¥å°†å¤–éƒ¨çš„å€¼ä¼ é€’åˆ° generator å†…</code></pre></div>
<p>ç¤ºä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å‘å¤–éƒ¨ä»£ç ä¼ é€’ä¸€ä¸ªé—®é¢˜å¹¶ç­‰å¾…ç­”æ¡ˆ</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">"2 + 2 = ?"</span><span class="token punctuation">;</span> <span class="token comment">// (*)</span>

  <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> generator <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> question <span class="token operator">=</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// &lt;-- yield è¿”å›çš„ value</span>

generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --> å°†ç»“æœä¼ é€’åˆ° generator ä¸­</span>

<span class="token comment">// 1.ç¬¬ä¸€æ¬¡è°ƒç”¨ generator.next() åº”è¯¥æ˜¯ä¸å¸¦å‚æ•°çš„ï¼ˆå¦‚æœå¸¦å‚æ•°ï¼Œé‚£ä¹ˆè¯¥å‚æ•°ä¼šè¢«å¿½ç•¥ï¼‰ã€‚å®ƒå¼€å§‹æ‰§è¡Œå¹¶è¿”å›ç¬¬ä¸€ä¸ª yield "2 + 2 = ?" çš„ç»“æœã€‚æ­¤æ—¶ï¼Œgenerator æ‰§è¡Œæš‚åœï¼Œè€Œåœç•™åœ¨ (*) è¡Œä¸Š</span>

<span class="token comment">// ç„¶åï¼Œyield çš„ç»“æœè¿›å…¥è°ƒç”¨ä»£ç ä¸­çš„ question å˜é‡</span>

<span class="token comment">// åœ¨ generator.next(4)ï¼Œgenerator æ¢å¤æ‰§è¡Œï¼Œå¹¶è·å¾—äº† 4 ä½œä¸ºç»“æœï¼šlet result = 4</span></code></pre></div>
<h2>å¼‚æ­¥è¿­ä»£ å’Œ å¼‚æ­¥ generator</h2>
<p>ğŸš© å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ‘‰å¯è¿­ä»£çš„ range çš„ä¸€ä¸ªå®ç°</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ for..of å¾ªç¯å¼€å§‹æ—¶è¢«è°ƒç”¨ä¸€æ¬¡</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
      last<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>

      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¯æ¬¡è¿­ä»£æ—¶éƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ¥è·å–ä¸‹ä¸€ä¸ªå€¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1ï¼Œç„¶å 2ï¼Œç„¶å 3ï¼Œç„¶å 4ï¼Œç„¶å 5</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ‘‰å¼‚æ­¥å¯è¿­ä»£çš„ range çš„ä¸€ä¸ªå®ç°</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>asyncIterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (1)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
      last<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>

      <span class="token keyword">async</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// (2)</span>

        <span class="token comment">// æ³¨æ„ï¼šå¯ä»¥åœ¨ async next å†…éƒ¨ä½¿ç”¨ "await"</span>
        <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (3)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (4)</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡</span>

<span class="token comment">// ä½¿ä¸€ä¸ªå¯¹è±¡å¯ä»¥å¼‚æ­¥è¿­ä»£ï¼Œå®ƒå¿…é¡»å…·æœ‰æ–¹æ³• ã€Symbol.asyncIterator ã€‘(1)</span>

<span class="token comment">// è¿™ä¸ªæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¸¦æœ‰ next() æ–¹æ³•çš„å¯¹è±¡ï¼Œnext() æ–¹æ³•ä¼šã€è¿”å›ä¸€ä¸ª promiseã€‘ (2)</span>

<span class="token comment">// è¿™ä¸ª next() æ–¹æ³•å¯ä»¥ä¸æ˜¯ async çš„ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ª promise çš„å¸¸è§„çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½¿ç”¨ async å…³é”®å­—å¯ä»¥å…è®¸åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ awaitï¼Œæ‰€ä»¥ä¼šæ›´åŠ æ–¹ä¾¿</span>

<span class="token comment">// ä½¿ç”¨ã€ for await(let value of range) ã€‘(4) æ¥è¿›è¡Œè¿­ä»£ï¼Œä¹Ÿå°±æ˜¯åœ¨ for åé¢æ·»åŠ  awaitã€‚å®ƒä¼šè°ƒç”¨ä¸€æ¬¡ range[Symbol.asyncIterator]() æ–¹æ³•ä¸€æ¬¡ï¼Œç„¶åè°ƒç”¨å®ƒçš„ next() æ–¹æ³•è·å–å€¼</span></code></pre></div>
<p>ğŸš© å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡ Spread è¯­æ³• â€¦ æ— æ³•å¼‚æ­¥å·¥ä½œ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- è¿™å¾ˆæ­£å¸¸ï¼Œå› ä¸ºå®ƒæœŸæœ›æ‰¾åˆ° Symbol.iteratorï¼Œè€Œä¸æ˜¯ Symbol.asyncIterator

- for..of çš„æƒ…å†µå’Œè¿™ä¸ªä¸€æ ·ï¼šæ²¡æœ‰ await å…³é”®å­—æ—¶ï¼Œåˆ™æœŸæœ›æ‰¾åˆ°çš„æ˜¯ Symbol.iterator</code></pre></div>
<p>ğŸš© å¼‚æ­¥ generator</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ‘‰å¯è¿­ä»£çš„ range çš„ generate çš„ ä¸€ä¸ªå®ç°</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  to<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [Symbol.iterator]: function*() çš„ä¸€ç§ç®€å†™</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span> value <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span> value<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1ï¼Œç„¶å 2ï¼Œç„¶å 3ï¼Œç„¶å 4ï¼Œç„¶å 5</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ‘‰å¯è¿­ä»£çš„ range çš„ generateå¼‚æ­¥ çš„ ä¸€ä¸ªå®ç°</span>

<span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å“‡ï¼Œå¯ä»¥ä½¿ç”¨ await äº†ï¼</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> generator <span class="token operator">=</span> <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> generator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1ï¼Œç„¶å 2ï¼Œç„¶å 3ï¼Œç„¶å 4ï¼Œç„¶å 5ï¼ˆåœ¨æ¯ä¸ª alert ä¹‹é—´æœ‰å»¶è¿Ÿï¼‰</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ’¡</span>

<span class="token comment">// åœ¨ä¸€ä¸ªå¸¸è§„çš„ generator ä¸­ï¼Œä½¿ç”¨ result = generator.next() æ¥è·å¾—å€¼</span>

<span class="token comment">// ä½†åœ¨ä¸€ä¸ªå¼‚æ­¥ generator ä¸­ï¼Œåº”è¯¥æ·»åŠ  await å…³é”®å­—ï¼Œåƒè¿™æ ·ï¼š</span>

result <span class="token operator">=</span> <span class="token keyword">await</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result = {value: ..., done: true/false}</span>

<span class="token comment">// ğŸ’¡ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¼‚æ­¥ generator å¯ä»¥ä¸ for await...of ä¸€èµ·å·¥ä½œ</span></code></pre></div>
<h2>æ¨¡å— (Module)</h2>
<p>ğŸš© èµ·æº</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦å°†å…¶æ‹†æˆå¤šä¸ªæ–‡ä»¶ï¼Œå³æ¨¡å—ï¼ˆmodule)(åŒ…å«ç‰¹å®šç›®çš„çš„ç±»æˆ–è€…å‡½æ•°åº“ï¼‰</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼ŒJavaScript éƒ½æ²¡æœ‰è¯­è¨€çº§ï¼ˆlanguage-levelï¼‰çš„æ¨¡å—è¯­æ³•ï¼Œä½†éšç€è„šæœ¬è¶Šæ¥è¶Šå¤æ‚ï¼Œå› æ­¤ç¤¾åŒºå‘æ˜äº†è®¸å¤šç§æ–¹æ³•æ¥å°†ä»£ç ç»„ç»‡åˆ°æ¨¡å—ä¸­ï¼Œä½¿ç”¨ç‰¹æ®Šçš„åº“æŒ‰éœ€åŠ è½½æ¨¡å—

- AMD

    - https://en.wikipedia.org/wiki/Asynchronous_module_definition

    - æœ€åˆç”± require.js åº“å®ç°

- CommonJS

    - http://wiki.commonjs.org/wiki/Modules/1.1

    -  ä¸º Node.js æœåŠ¡å™¨åˆ›å»ºçš„æ¨¡å—ç³»ç»Ÿ

- UMD

    - https://github.com/umdjs/umd

    - ä¸ AMD å’Œ CommonJS éƒ½å…¼å®¹



- ''`è¯­è¨€çº§çš„æ¨¡å—ç³»ç»Ÿåœ¨ 2015 å¹´çš„æ—¶å€™å‡ºç°åœ¨äº†æ ‡å‡†ï¼ˆES6ï¼‰ä¸­`''</code></pre></div>
<p>ğŸš© æ¨¡å—çš„æ ¸å¿ƒæ¦‚å¿µ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè§ˆå™¨éœ€è¦ä½¿ç”¨ &lt;script type="module"></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ä¸å¸¸è§„è„šæœ¬ç›¸æ¯”ï¼ˆ&lt;script src="xx">ï¼‰ï¼Œæ‹¥æœ‰ type="module" æ ‡è¯†çš„è„šæœ¬æœ‰ä¸€äº›ç‰¹å®šäºæµè§ˆå™¨çš„å·®å¼‚ï¼š

- é»˜è®¤æ˜¯å»¶è¿Ÿè§£æçš„ï¼ˆdeferredï¼‰

- Async å¯ç”¨äºå†…è”è„šæœ¬ï¼ˆå¯¹äºéæ¨¡å—è„šæœ¬ï¼Œasync ç‰¹æ€§ï¼ˆattributeï¼‰ä»…é€‚ç”¨äºå¤–éƒ¨è„šæœ¬ï¼ˆå¼‚æ­¥è„šæœ¬ä¼šåœ¨å‡†å¤‡å¥½åç«‹å³è¿è¡Œï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬æˆ– HTML æ–‡æ¡£ï¼‰ï¼Œå¯¹äºæ¨¡å—è„šæœ¬ï¼Œä¹Ÿé€‚ç”¨äºå†…è”è„šæœ¬ï¼‰

- ä»å¦ä¸€ä¸ªæºï¼ˆåŸŸ/åè®®/ç«¯å£ï¼‰åŠ è½½å¤–éƒ¨è„šæœ¬ï¼Œéœ€è¦ CORS header

- é‡å¤çš„å¤–éƒ¨è„šæœ¬ä¼šè¢«å¿½ç•¥</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ¨¡å—å…·æœ‰è‡ªå·±çš„æœ¬åœ°é¡¶çº§ä½œç”¨åŸŸï¼Œå¹¶å¯ä»¥é€šè¿‡ import/export äº¤æ¢åŠŸèƒ½

- â€œthisâ€ æ˜¯ undefined</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ¨¡å—å§‹ç»ˆä½¿ç”¨ use strict</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æ¨¡å—ä»£ç åªæ‰§è¡Œä¸€æ¬¡ã€‚å¯¼å‡ºä»…åˆ›å»ºä¸€æ¬¡ï¼Œç„¶åä¼šåœ¨å¯¼å…¥ä¹‹é—´å…±äº«</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‡ºäºæ€§èƒ½å’Œå…¶ä»–åŸå› ï¼Œå¼€å‘è€…ç»å¸¸ä½¿ç”¨è¯¸å¦‚ Webpack ä¹‹ç±»çš„æ‰“åŒ…å·¥å…·å°†æ¨¡å—æ‰“åŒ…åˆ°ä¸€èµ·</code></pre></div>
<h2>å¯¼å‡ºå’Œå¯¼å…¥</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- æŠŠ import/export è¯­å¥æ”¾åœ¨è„šæœ¬çš„é¡¶éƒ¨æˆ–åº•éƒ¨ï¼Œéƒ½æ²¡å…³ç³»

- åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯¼å…¥é€šå¸¸ä½äºæ–‡ä»¶çš„å¼€å¤´ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸ºäº†æ›´åŠ æ–¹ä¾¿</code></pre></div>
<p>ğŸš© export å¯¼å‡ºç±»å‹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ’¡åœ¨å£°æ˜ä¸€ä¸ª class/function/â€¦ ä¹‹å‰ï¼š</span>
<span class="token keyword">export</span> <span class="token punctuation">[</span><span class="token keyword">default</span><span class="token punctuation">]</span> <span class="token keyword">class</span><span class="token operator">/</span><span class="token keyword">function</span><span class="token operator">/</span>variable <span class="token operator">...</span>

<span class="token comment">// ğŸ’¡ç‹¬ç«‹çš„å¯¼å‡ºï¼š</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>x <span class="token punctuation">[</span><span class="token keyword">as</span> y<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">.</span>

<span class="token comment">// ğŸ’¡é‡æ–°å¯¼å‡ºï¼š</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>x <span class="token punctuation">[</span><span class="token keyword">as</span> y<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module"</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"module"</span>ï¼ˆä¸ä¼šé‡æ–°å¯¼å‡ºé»˜è®¤çš„å¯¼å‡ºï¼‰ã€‚
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token punctuation">[</span><span class="token keyword">as</span> y<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module"</span>ï¼ˆé‡æ–°å¯¼å‡ºé»˜è®¤çš„å¯¼å‡ºï¼‰</code></pre></div>
<p>ğŸš© import å¯¼å…¥ç±»å‹</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ’¡æ¨¡å—ä¸­å‘½åçš„å¯¼å‡ºï¼š</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>x <span class="token punctuation">[</span><span class="token keyword">as</span> y<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module"</span>

<span class="token comment">// ğŸ’¡é»˜è®¤çš„å¯¼å‡ºï¼š</span>
<span class="token keyword">import</span> x <span class="token keyword">from</span> <span class="token string">"module"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> x<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module"</span>

<span class="token comment">// ğŸ’¡æ‰€æœ‰ï¼š</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> obj <span class="token keyword">from</span> <span class="token string">"module"</span>

<span class="token comment">// ğŸ’¡å¯¼å…¥æ¨¡å—ï¼ˆå®ƒçš„ä»£ç ï¼Œå¹¶è¿è¡Œï¼‰ï¼Œä½†ä¸è¦å°†å…¶èµ‹å€¼ç»™å˜é‡ï¼š</span>
<span class="token keyword">import</span> <span class="token string">"module"</span></code></pre></div>
<h2>åŠ¨æ€å¯¼å…¥</h2>
<p>ğŸš© é™æ€å¯¼å…¥/å¯¼å‡º</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ğŸ’¡æ¨¡å—è·¯å¾„å¿…é¡»æ˜¯åŸå§‹ç±»å‹å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨</span>
<span class="token keyword">import</span> <span class="token operator">...</span> from <span class="token function">getModuleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, only from "string" is allowed</span>

<span class="token comment">// ğŸ’¡æ— æ³•æ ¹æ®æ¡ä»¶</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token operator">...</span><span class="token punctuation">;</span> <span class="token comment">// Error, not allowed!</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ’¡æ— æ³•åœ¨è¿è¡Œæ—¶å¯¼å…¥</span>
<span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token operator">...</span><span class="token punctuation">;</span> <span class="token comment">// Error, we can't put import in any block</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">export / import è¯­æ³•ä¸¥æ ¼ä¸”ç®€å•ï¼šåªæä¾›ç»“æ„ä¸»å¹²

- ä¾¿äºåˆ†æä»£ç ç»“æ„

- å¯ä»¥æ”¶é›†æ¨¡å—

- å¯ä»¥ä½¿ç”¨ç‰¹æ®Šå·¥å…·å°†æ”¶é›†çš„æ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­

- å¯ä»¥åˆ é™¤æœªä½¿ç”¨çš„å¯¼å‡ºï¼ˆâ€œtree-shakenâ€ï¼‰</code></pre></div>
<p>ğŸš©import() è¡¨è¾¾å¼</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// è¿”å›ä¸€ä¸ª promiseï¼Œè¯¥ promise resolve ä¸ºä¸€ä¸ªåŒ…å«å…¶æ‰€æœ‰å¯¼å‡ºçš„æ¨¡å—å¯¹è±¡</span>

<span class="token keyword">let</span> modulePath <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Which module to load?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span><span class="token punctuation">(</span>modulePath<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>module object<span class="token operator">></span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>loading error<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token keyword">if</span> no such module<span class="token operator">></span><span class="token punctuation">)</span>

<span class="token comment">// or</span>

<span class="token keyword">let</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span>modulePath<span class="token punctuation">)</span>

<span class="token keyword">let</span> xx <span class="token operator">=</span> module <span class="token punctuation">.</span>default<span class="token punctuation">;</span><span class="token comment">// å¯ä»¥ä½¿ç”¨æ¨¡å—å¯¹è±¡çš„ default å±æ€§</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">åŠ¨æ€å¯¼å…¥åœ¨å¸¸è§„è„šæœ¬ä¸­å·¥ä½œæ—¶ï¼Œä¸éœ€è¦ script type="module".</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ğŸ˜±å°½ç®¡ import() çœ‹èµ·æ¥åƒä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œä½†å®ƒåªæ˜¯ä¸€ç§ç‰¹æ®Šè¯­æ³•ï¼Œåªæ˜¯æ°å¥½ä½¿ç”¨äº†æ‹¬å·ï¼ˆç±»ä¼¼äº super()ï¼‰

ğŸ˜±å› æ­¤ï¼Œä¸èƒ½å°† import å¤åˆ¶åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œæˆ–è€…å¯¹å…¶ä½¿ç”¨ call/apply

ğŸ˜±å› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°</code></pre></div>
<h2>Evalï¼šæ‰§è¡Œä»£ç å­—ç¬¦ä¸²</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">å†…å»ºå‡½æ•° eval å…è®¸æ‰§è¡Œä¸€ä¸ªä»£ç å­—ç¬¦ä¸²</code></pre></div>
<p>ğŸš©eval çš„ç»“æœæ˜¯æœ€åä¸€æ¡è¯­å¥çš„ç»“æœ</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"let i = 0; ++i"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span></code></pre></div>
<p>ğŸš©eval å†…çš„ä»£ç åœ¨å½“å‰è¯æ³•ç¯å¢ƒï¼ˆlexical environmentï¼‰ä¸­æ‰§è¡Œï¼Œå› æ­¤å®ƒèƒ½è®¿é—®å¤–éƒ¨å˜é‡</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"alert(a)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œeval æœ‰å±äºè‡ªå·±çš„è¯æ³•ç¯å¢ƒï¼Œå¦‚æœä¸å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œeval æ²¡æœ‰å±äºè‡ªå·±çš„è¯æ³•ç¯å¢ƒ</span>

<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"let x = 5; function f() {}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefinedï¼ˆæ²¡æœ‰è¿™ä¸ªå˜é‡ï¼‰</span>
<span class="token comment">// å‡½æ•° f ä¹Ÿä¸å¯ä»å¤–éƒ¨è¿›è¡Œè®¿é—®</span></code></pre></div>
<h2>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å‡½æ•°çš„è½¬æ¢:

- æŒ‡å°†ä¸€ä¸ªå‡½æ•°ä»å¯è°ƒç”¨çš„ f(a, b, c) è½¬æ¢ä¸ºå¯è°ƒç”¨çš„ f(a)(b)(c)

- æŸ¯é‡ŒåŒ–ä¸ä¼šè°ƒç”¨å‡½æ•°,åªæ˜¯å¯¹å‡½æ•°è¿›è¡Œè½¬æ¢</code></pre></div>
<p>ğŸš© åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° curry(f)</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// curry(f) æ‰§è¡ŒæŸ¯é‡ŒåŒ–è½¬æ¢</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç”¨æ³•</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> curriedSum <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">curriedSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token comment">// ğŸ’¡å®ç°éå¸¸ç®€å•ï¼šåªæœ‰ä¸¤ä¸ªåŒ…è£…å™¨ï¼ˆwrapperï¼‰</span></code></pre></div>
<p>ğŸš© æŸ¯é‡ŒåŒ–ï¼Ÿç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">è½»æ¾åœ°ç”Ÿæˆåå‡½æ•°</code></pre></div>
<p>ğŸš© é«˜çº§æŸ¯é‡ŒåŒ–å®ç°</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">curried</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">>=</span> func<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœä¼ å…¥çš„ args é•¿åº¦ä¸åŸå§‹å‡½æ•°æ‰€å®šä¹‰çš„ï¼ˆfunc.lengthï¼‰ç›¸åŒæˆ–è€…æ›´é•¿ï¼Œé‚£ä¹ˆåªéœ€è¦å°†è°ƒç”¨ä¼ é€’ç»™å®ƒå³å¯</span>
      <span class="token keyword">return</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦åˆ™ï¼Œè·å–ä¸€ä¸ªåå‡½æ•°ï¼Œfunc è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼›è¿”å›å¦ä¸€ä¸ªåŒ…è£…å™¨ ï¼Œå®ƒå°†é‡æ–°åº”ç”¨ curriedï¼Œå°†ä¹‹å‰ä¼ å…¥çš„å‚æ•°ä¸æ–°çš„å‚æ•°ä¸€èµ·ä¼ å…¥ï¼›åœ¨ä¸€ä¸ªæ–°çš„è°ƒç”¨ä¸­ï¼Œå†æ¬¡ï¼Œå°†è·å¾—ä¸€ä¸ªæ–°çš„åå‡½æ•°ï¼ˆå¦‚æœå‚æ•°ä¸è¶³çš„è¯ï¼‰ï¼Œæˆ–è€…æœ€ç»ˆçš„ç»“æœ</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">curried</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> curriedSum <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">curriedSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6ï¼Œä»ç„¶å¯ä»¥è¢«æ­£å¸¸è°ƒç”¨</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">curriedSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6ï¼Œå¯¹ç¬¬ä¸€ä¸ªå‚æ•°çš„æŸ¯é‡ŒåŒ–</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">curriedSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6ï¼Œå…¨æŸ¯é‡ŒåŒ–</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">æŸ¯é‡ŒåŒ–è¦æ±‚å‡½æ•°å…·æœ‰å›ºå®šæ•°é‡çš„å‚æ•°ï¼Œf(...args)ï¼Œä¸èƒ½ä»¥è¿™ç§æ–¹å¼è¿›è¡ŒæŸ¯é‡ŒåŒ–</code></pre></div>
<h2>Reference Type</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Reference Type æ˜¯è¯­è¨€å†…éƒ¨çš„ä¸€ä¸ªç±»å‹</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- åœ¨obj.method()ä¸­  .  è¿”å›çš„å‡†ç¡®æ¥è¯´ä¸æ˜¯å±æ€§çš„å€¼ è€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ â€œReference Typeâ€ å€¼ å…¶ä¸­å‚¨å­˜ç€å±æ€§çš„å€¼å’Œå®ƒçš„æ¥æºå¯¹è±¡

- è¿™æ˜¯ä¸ºäº†ã€éšåã€‘çš„æ–¹æ³•è°ƒç”¨ () è·å–æ¥æºå¯¹è±¡ï¼Œç„¶åå°† this è®¾ä¸ºå®ƒ

- å¯¹äºæ‰€æœ‰å…¶å®ƒæ“ä½œï¼ŒReference Type ä¼šè‡ªåŠ¨å˜æˆå±æ€§çš„å€¼</code></pre></div>
<h2>BigInt</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»º bigint çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šåœ¨ä¸€ä¸ªæ•´æ•°å­—é¢é‡åé¢åŠ  n æˆ–è€…è°ƒç”¨ BigInt å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ä¸­ç”Ÿæˆ bigint</span>

<span class="token keyword">const</span> bigint <span class="token operator">=</span> <span class="token number">1234567890123456789012345678901234567890n</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sameBigint <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token string">"1234567890123456789012345678901234567890"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bigintFromNumber <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸ 10n ç›¸åŒ</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ä¸å¯ä»¥æŠŠ bigint å’Œå¸¸è§„æ•°å­—ç±»å‹æ··åˆä½¿ç”¨ï¼Œåº”è¯¥æ˜¾å¼åœ°è½¬æ¢

- å¯¹ bigint å’Œ number ç±»å‹çš„æ•°å­—è¿›è¡Œæ¯”è¾ƒæ²¡æœ‰é—®é¢˜

- == æ¯”è¾ƒæ—¶ç›¸ç­‰ï¼Œä½†åœ¨è¿›è¡Œ ===ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰æ¯”è¾ƒæ—¶ä¸ç›¸ç­‰

- é™¤æ³• å‘ä¸‹æ•´é™¤

- BigInt ä¸æ”¯æŒä¸€å…ƒåŠ æ³•

- bigint 0n ä¸ºå‡ï¼Œå…¶ä»–å€¼ä¸º true</code></pre></div>
<p>ğŸš©Polyfill</p>
<p><a href="https://github.com/GoogleChromeLabs/jsbi">https://github.com/GoogleChromeLabs/jsbi</a></p>
<blockquote>
<p>ä½œè€…ï¼š<a href="https://www.shanejix.com/">shanejix</a>
å‡ºå¤„ï¼š<a href="https://www.shanejix.com/posts/%E7%8E%B0%E4%BB%A3%20JavaScript%20%E6%95%99%E7%A8%8B%20%E2%80%94%20JavaScript%20%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%AF%87/">https://www.shanejix.com/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/</a>
ç‰ˆæƒï¼šæœ¬ä½œå“é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">ã€Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…ã€</a>è®¸å¯åè®®è¿›è¡Œè®¸å¯ã€‚
å£°æ˜ï¼šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
</blockquote></section><section style="margin-top:4.375rem"><p><a href="https://github.com/shanejix/shanejix.github.io/issues/45" target="_blank" rel="noopener noreferrer">Edit on GitHub</a> â€¢ <a href="https://github.com/shanejix/shanejix.github.io/issues/45" target="_blank" rel="noopener noreferrer">Discuss on GitHub</a></p></section></article><hr style="margin-bottom:1.75rem"/><div style="display:flex;margin-bottom:3.5rem"><img src="/static/bio-0d7082db0bcaf1381f0ae2cbdc939311.png" alt="Shane Jix" style="margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://github.com/shanejix">Shane Jix</a>. IÂ explain with words and code.</p></div><nav style="padding-bottom:2rem"><div style="display:flex;flex-wrap:wrap;justify-content:space-between;padding:0;margin-left:0"><div><a rel="next" href="/posts/ä» 0 åˆ° 1 å…¥é—¨åŠ¨æ€è§„åˆ’/">â† <!-- -->ä» 0 åˆ° 1 å…¥é—¨åŠ¨æ€è§„åˆ’</a></div><div><a rel="prev" href="/posts/å¦‚ä½•ä½¿ç”¨ JavaScript å®ç°äºŒå‰æ ‘ï¼ŒäºŒå‰å¹³è¡¡æ ‘å’Œçº¢é»‘æ ‘/">å¦‚ä½•ä½¿ç”¨ JavaScript å®ç°äºŒå‰æ ‘ï¼ŒäºŒå‰å¹³è¡¡æ ‘å’Œçº¢é»‘æ ‘<!-- -->â†’</a></div></div></nav></main><style data-emotion-css="v9ddz0">.css-v9ddz0{min-height:10vh;max-height:10vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><footer class="css-v9ddz0"><style data-emotion-css="s70iz6">.css-s70iz6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><div class="css-s70iz6"><style data-emotion-css="180pfyr">.css-180pfyr{display:inline-block;margin-right:1rem;}</style><span class="css-180pfyr"><a href="/links">Links</a></span><span class="css-180pfyr"><a href="/tools">Tools</a></span></div><style data-emotion-css="1yltmzw">.css-1yltmzw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding-bottom:10px;}</style><div class="css-1yltmzw">Â© 2019 - <!-- -->2022<!-- -->, Built with<span style="padding:0 4px"><a href="https://www.gatsbyjs.org">Gatsby</a></span></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-220985232-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-220985232-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X8ZKVHVCJT"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-X8ZKVHVCJT',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-X8ZKVHVCJT', {"anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/ç°ä»£ JavaScript æ•™ç¨‹ â€” JavaScript ç¼–ç¨‹è¯­è¨€ç¯‡/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e795261d8342deefff90.js"],"app":["/app-5c7248fcb69374f91873.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ad6431e4664bcf916d19.js"],"component---src-pages-404-js":["/component---src-pages-404-js-f46c2501822c6849dd3b.js"],"component---src-pages-about-backup-js":["/component---src-pages-about-backup-js-e12992febc3f9c7942f9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ba76b73faf9b13c49b7e.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-cc55ba5d0837e95934be.js"],"component---src-pages-snippets-js":["/component---src-pages-snippets-js-314b523a31e26de10a3a.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-b6cd53c7d21e3e064fd1.js"],"component---src-templates-blog-page-js":["/component---src-templates-blog-page-js-3c820d4c74001e03e229.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-06eb50339f2f3ac086e8.js"],"component---src-templates-blog-tags-js":["/component---src-templates-blog-tags-js-55b14af861a6825c50ba.js"],"component---src-templates-posts-pagination-js":["/component---src-templates-posts-pagination-js-f887a69f275fa18320d2.js"]};/*]]>*/</script><script src="/polyfill-e795261d8342deefff90.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-06eb50339f2f3ac086e8.js" async=""></script><script src="/cac18b802c8b308508681dc900d8d8f756c7bdb5-c7c9c4e9ce9bf74cce02.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-5c7248fcb69374f91873.js" async=""></script><script src="/framework-b17a64ad725e0b3c1338.js" async=""></script><script src="/webpack-runtime-e0256f23ab3c5c1ffc4c.js" async=""></script></body></html>